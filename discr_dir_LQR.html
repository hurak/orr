<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Finite-horizon LQR as a QP – B(E)3M35ORR – Optimal and Robust Control</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./discr_dir_mpc.html" rel="next">
<link href="./discr_dir_general.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-50b4abff8b0f30bb501ab99a3cda6e79.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./discr_dir_goals.html">3. Discrete-time optimal control – direct approach</a></li><li class="breadcrumb-item"><a href="./discr_dir_LQR.html">Finite-horizon LQR as a QP</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">B(E)3M35ORR – Optimal and Robust Control</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">0. Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">What is optimal and robust control?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_outline.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course outline</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_rules.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Rules of the course</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Software for the course</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literature for the course</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_similar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Similar courses</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">1. Optimization – theory</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_theory_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_theory_problems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Optimization problems</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_theory_reformulations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Problem reformulations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_theory_unconstrained.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unconstrained optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_theory_constrained.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Constrained optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_theory_modellers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Optimization modelling languages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_theory_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_theory_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">2. Optimization – algorithms</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_algo_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_algo_derivatives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Computing the derivatives</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_algo_unconstrained.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unconstrained optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_algo_constrained.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Constrained optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_algo_solvers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Numerical solvers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_algo_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_algo_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">3. Discrete-time optimal control – direct approach</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General finite-horizon nonlinear optimal control as an NLP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_LQR.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Finite-horizon LQR as a QP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_mpc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Model predictive control (MPC)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_mpc_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Numerical solvers for MPC</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">4. Discrete-time optimal control – indirect approach</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_indir_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_indir_general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General finite-horizon nonlinear optimal control as a TP-BVP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_indir_LQR_fin_horizon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Discrete-time LQR on a finite horizon</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_indir_LQR_inf_horizon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Discrete-time LQR on an infinite horizon</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_indir_DARE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Discrete-time algebraic Riccati equation (DARE)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_indir_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_indir_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">5. Discrete-time optimal control – dynamic programming (DP)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_programming_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">DP and discrete-time optimal control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_programming_tabular.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tabular outcomes of DP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_programming_LQR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Solving LQR via DP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_programming_DDP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Differential dynamic programming (DDP)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_programming_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_programming_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">6. More on MPC</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_mpc_stability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Stability of MPC</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_mpc_recursive_feasibility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Recursive feasibility</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_mpc_economic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Economic MPC</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_mpc_explicit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Explicit MPC</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_mpc_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_mpc_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">7. Continuous-time optimal control - indirect approach via calculus of variations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview of continuous-time optimal control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_calculus_of_variations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Calculus of variations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_via_calculus_of_variations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Indirect approach to optimal control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_LQR_fin_horizon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Indirect approach to LQR on a finite horizon</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_LQR_inf_horizon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Indirect approach to LQR on an infinite horizon</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_CARE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Continuous-time Riccati equation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_trajectory_stabilization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Trajectory stabilization and neigboring extremals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">8. Continuous-time optimal control - indirect approach via Pontryagin’s maximum principle</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_Pontryagin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pontryagin’s maximum principle</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_constrained.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Constrained optimal control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_time_optimal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time-optimal control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_references_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_hw_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true">
 <span class="menu-text">9. Numerical methods for continuous-time optimal control - both indirect and direct approaches</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_numerical_indirect.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Numerical methods for indirect approach</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_numerical_direct.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Numerical methods for direct approach</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_numerical_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Software</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_numerical_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_numerical_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="true">
 <span class="menu-text">9.X. Continuous-time optimal control – dynamic programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_dp_HJB.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dynamic programming for continuous-time optimal control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_dp_LQR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using HJB equation to solve the continuous-time LQR problem</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_dp_DDP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Differential dynamic programming (DDP)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_dp_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_dp_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true">
 <span class="menu-text">10. Some extensions: LQG, LTR, H2</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ext_stochastic_LQR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LQR for stochastic systems</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ext_LQG.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LQG control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ext_LTR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Loop transfer recovery (LTR)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ext_H2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">H2-optimal control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ext_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Software</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ext_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ext_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="true">
 <span class="menu-text">11. Uncertainty modelling and robustness analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./roban_uncertainty.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Uncertainty (in) modelling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./roban_unstructured.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Robustness analysis for unstructured uncertainty</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./roban_structured.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Robustness analysis for structured uncertainty</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./roban_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Software</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./roban_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./roban_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" role="navigation" aria-expanded="true">
 <span class="menu-text">12. Robust control</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-14" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rocond_mixed_sensitivity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mixed sensitivity design</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rocond_H_infinity_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hinfinity-optimal control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rocond_mu_synthesis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mu synthesis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rocond_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Software</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rocond_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rocond_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" role="navigation" aria-expanded="true">
 <span class="menu-text">13. Limitations of achievable performance</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-15" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./limitations_SISO.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Limitations for SISO systems</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./limitations_MIMO.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Limitations for MIMO systems</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./limitations_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./limitations_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-16" role="navigation" aria-expanded="true">
 <span class="menu-text">14. Model and controller order reduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-16" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-16" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reduction_order_model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Model order reduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reduction_order_controller.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Controller order reduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reduction_order_benchmarks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Benchmarks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reduction_order_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reduction_order_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#simultaneous-sparse-formulation" id="toc-simultaneous-sparse-formulation" class="nav-link active" data-scroll-target="#simultaneous-sparse-formulation">Simultaneous (sparse) formulation</a>
  <ul class="collapse">
  <li><a href="#adding-constraints-on-controls-and-states" id="toc-adding-constraints-on-controls-and-states" class="nav-link" data-scroll-target="#adding-constraints-on-controls-and-states">Adding constraints on controls and states</a></li>
  </ul></li>
  <li><a href="#sequential-dense-formulation" id="toc-sequential-dense-formulation" class="nav-link" data-scroll-target="#sequential-dense-formulation">Sequential (dense) formulation</a>
  <ul class="collapse">
  <li><a href="#adding-the-constraints-on-controls" id="toc-adding-the-constraints-on-controls" class="nav-link" data-scroll-target="#adding-the-constraints-on-controls">Adding the constraints on controls</a></li>
  <li><a href="#adding-the-constraints-on-states" id="toc-adding-the-constraints-on-states" class="nav-link" data-scroll-target="#adding-the-constraints-on-states">Adding the constraints on states</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/hurak/orr/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./discr_dir_goals.html">3. Discrete-time optimal control – direct approach</a></li><li class="breadcrumb-item"><a href="./discr_dir_LQR.html">Finite-horizon LQR as a QP</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Finite-horizon LQR as a QP</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/1MHV-L4--lI?si=6Orm_cGxmTAX_myT" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<p>Here we specialize the general procedure from the previous section to the case of a <strong>L</strong>inear system and a <strong>Q</strong>uadratic cost. We start by considering a simple problem of <strong>R</strong>egulation, wherein the goal is to bring the system either exactly or approximately to zero final state, that is, <span class="math inline">\mathbf x^\text{ref}=\mathbf 0</span> and we want <span class="math inline">\bm x_N=\mathbf x^\text{ref}</span> or <span class="math inline">\bm x_N\approx\mathbf x^\text{ref}</span>, respectively. The problem is known as the <strong>LQR</strong> problem. <span class="math display">
\begin{aligned}
\operatorname*{minimize}_{\mathbf u_0,\ldots, \mathbf u_{N-1}, \mathbf x_{0},\ldots, \mathbf x_N} &amp;\quad  \frac{1}{2} \bm x_N^\top \mathbf S \bm x_N + \frac{1}{2} \sum_{k=0}^{N-1} \left(\bm x_k^\top \mathbf Q \bm x_k + \bm u_k^\top \mathbf R \bm u_k \right)\\
\text{subject to}   &amp;\quad \bm x_{k+1} = \mathbf A\bm x_k + \mathbf B\bm u_k,\quad k = 0, \ldots, N-1, \\
                    &amp;\quad \bm x_0 = \mathbf x_0,\\
                    &amp;\quad \bm x_N = \mathbf 0\;  (\text{or}\, \bm x_N \approx \mathbf 0).
\end{aligned}
</span></p>
<p>Referring to the two options for the last constraint,</p>
<ul>
<li>if the condition <span class="math inline">\bm x_N=\mathbf 0</span> on the final state is strictly enforced, the terminal state cost (the term <span class="math inline">\frac{1}{2} \bm x_N^\top \mathbf S \bm x_N</span> in the cost function) is redundant and can be removed;</li>
<li>if the final state condition can be relaxed to <span class="math inline">\bm x_N\approx\mathbf 0</span>, it is by increasing the weight <span class="math inline">\mathbf S</span> in the terminal cost function <span class="math inline">\frac{1}{2} \bm x_N^\top \mathbf S \bm x_N</span> that <span class="math inline">\bm x_N</span> can be made arbitrarily close to <span class="math inline">\mathbf 0</span>.</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>It is a standard dilemma in optimization, not only in optimal control, that if we want to satisfy some requirement, we can either strictly enforce it through constraints or we can seemingly relax it and set a cost to be paid for not satysfying it.</p>
</div>
</div>
<section id="simultaneous-sparse-formulation" class="level2">
<h2 class="anchored" data-anchor-id="simultaneous-sparse-formulation">Simultaneous (sparse) formulation</h2>
<p>Below we rewrite the latter problem, that is, <span class="math inline">\bm x_N\approx\mathbf 0</span>, in the “unrolled” form, where we stack the state and control variables into “long” vectors <span class="math inline">\bar{\bm x}</span> and <span class="math inline">\bar{\bm u}</span>. Doing the same for the former is straightforward. <span class="math display">
\begin{aligned}
\operatorname*{minimize}_{\bar{\bm u},\bar{\bm x}} &amp; \frac{1}{2}\left(\begin{bmatrix} \bm x_1^\top &amp; \bm x_2^\top &amp; \ldots &amp; \bm x_N^\top \end{bmatrix}
\underbrace{\begin{bmatrix}\mathbf Q &amp; &amp; &amp; \\ &amp; \mathbf Q &amp; &amp;\\ &amp; &amp;\ddots &amp; \\ &amp; &amp; &amp; \mathbf S \end{bmatrix}}_{\overline{\mathbf Q}}
\underbrace{\begin{bmatrix} \bm x_1 \\ \bm x_2 \\ \vdots \\ \bm x_N \end{bmatrix}}_{\bar{\bm x}}\right.\\
&amp;\qquad +\left.
\begin{bmatrix} \bm u_0^\top &amp; \bm u_1^\top &amp; \ldots &amp; \bm u_{N-1}^\top \end{bmatrix}
\underbrace{\begin{bmatrix}\mathbf R &amp; &amp; &amp; \\ &amp; \mathbf R &amp; &amp;\\ &amp; &amp;\ddots &amp; \\ &amp; &amp; &amp; \mathbf R \end{bmatrix}}_{\overline{\mathbf R}}
\underbrace{\begin{bmatrix} \bm u_0 \\ \bm u_1 \\ \vdots \\ \bm u_{N-1} \end{bmatrix}}_{\bar{\bm u}}\right)
+ \underbrace{\frac{1}{2}\mathbf x_0^\top \mathbf Q \mathbf x_0}_{\mathrm{constant}}
\end{aligned}
</span> subject to <span class="math display">
\begin{bmatrix} \bm x_1 \\ \bm x_2 \\ \bm x_3\\ \vdots \\ \bm x_N \end{bmatrix} = \underbrace{\begin{bmatrix}\mathbf 0 &amp; &amp; &amp; &amp;\\\mathbf A &amp; \mathbf 0 &amp; &amp; &amp;\\ &amp;\mathbf A &amp;\mathbf 0 &amp; &amp; \\ &amp; &amp; &amp;\ddots &amp; \\&amp; &amp; &amp;\mathbf A &amp; \mathbf 0 \end{bmatrix}}_{\overline{\mathbf A}}
\begin{bmatrix} \bm x_1 \\ \bm x_2 \\ \bm x_3\\ \vdots \\ \bm x_N \end{bmatrix} + \underbrace{\begin{bmatrix}\mathbf B &amp; &amp; &amp; &amp; \\ &amp; \mathbf B &amp; &amp; &amp; \\&amp; &amp;\mathbf B &amp; \\ &amp; &amp; &amp;\ddots \\ &amp; &amp; &amp; &amp; \mathbf B \end{bmatrix}}_{\overline{\mathbf B}}\begin{bmatrix} \bm u_0 \\ \bm u_1 \\ \bm u_2\\\vdots \\ \bm u_{N-1} \end{bmatrix} + \underbrace{\begin{bmatrix}\mathbf A\\\mathbf 0\\\mathbf 0\\\vdots\\\mathbf 0\end{bmatrix}}_{\overline{\mathbf A}_0}\mathbf x_0,    
</span></p>
<p>in which we have already substituted the particular <span class="math inline">\mathbf x_0</span> for the variable <span class="math inline">\bm x_0</span>. Consequently, the last term in the cost function can be discarded because it is constant.</p>
<p>The terms with the <span class="math inline">\bar{\bm x}</span> vector can be combined and we get <span id="eq-linear_system_linear_constraints_matrix_format"><span class="math display">
\begin{bmatrix} \mathbf 0 \\ \mathbf 0 \\ \mathbf 0\\ \vdots \\ \mathbf 0 \end{bmatrix} = \underbrace{\begin{bmatrix}-\mathbf I &amp; &amp; &amp; &amp;\\\mathbf A &amp; -\mathbf I &amp; &amp; &amp;\\ &amp;\mathbf A &amp;-\mathbf I &amp; &amp; \\ &amp; &amp; &amp;\ddots &amp; \\&amp; &amp; &amp;\mathbf A &amp; -\mathbf I \end{bmatrix}}_{\overline{\mathbf A} - \mathbf I}
\begin{bmatrix} \mathbf x_1 \\ \mathbf x_2 \\ \mathbf x_3\\ \vdots \\ \mathbf x_N \end{bmatrix} + \underbrace{\begin{bmatrix}\mathbf B &amp; &amp; &amp; &amp; \\ &amp; \mathbf B &amp; &amp; &amp; \\&amp; &amp;\mathbf B &amp; \\ &amp; &amp; &amp;\ddots \\ &amp; &amp; &amp; &amp; \mathbf B \end{bmatrix}}_{\overline{\mathbf B}}\begin{bmatrix} \mathbf u_0 \\ \mathbf u_1 \\ \mathbf u_2\\\vdots \\ \mathbf u_{N-1} \end{bmatrix} + \underbrace{\begin{bmatrix}\mathbf A\\\mathbf 0\\\mathbf 0\\\vdots\\\mathbf 0\end{bmatrix}}_{\overline{\mathbf A}_0}\mathbf x_0.
\tag{1}</span></span></p>
<p>Upon stacking the two “long” vectors into <span class="math inline">\bar{\bm z}</span> we reformulate the optimization problem as <span class="math display">
\operatorname*{minimize}_{\widetilde{\mathbf z}\in\mathbb{R}^{2N}}\quad \frac{1}{2}\underbrace{\begin{bmatrix}\bar{\bm x}^\top &amp;\bar{\bm u}^\top\end{bmatrix}}_{\bar{\bm z}^\top} \underbrace{\begin{bmatrix}\overline{\mathbf Q} &amp; \\ &amp; \overline{\mathbf R} \end{bmatrix}}_{\widetilde{\mathbf Q}}\underbrace{\begin{bmatrix}\bar{\bm x}\\\bar{\bm u}\end{bmatrix}}_{\bar{\bm z}}
</span> subject to <span class="math display">
\mathbf 0 = \underbrace{\begin{bmatrix}(\overline{\mathbf A}-\mathbf I) &amp; \overline{\mathbf B}\end{bmatrix}}_{\widetilde{\mathbf A}}\underbrace{\begin{bmatrix}\bar{\bm x}\\\bar{\bm u}\end{bmatrix}}_{\bar{\bm z}} + \underbrace{\overline{\mathbf A}_0 \mathbf x_0}_{\tilde{\mathbf b}}.
</span></p>
<p>To summarize, we have reformulated the optimal control problem as a linearly constrained quadratic program <span class="math display">
\boxed{
\begin{aligned}
\underset{\bar{\bm z}\in\mathbb{R}^{2N}}{\text{minimize}} &amp;\quad \frac{1}{2}\bar{\bm z}^\top \widetilde{\mathbf Q} \bar{\bm z}\\
\text{subject to} &amp;\quad \widetilde{\mathbf A} \bar{\bm z} + \tilde{\bm b} = \mathbf 0.
\end{aligned}}
</span></p>
<p>This constrained optimization problem can still be solved without invoking a numerical solver for solving quadratic programs (QP). We do it by introducing a vector <span class="math inline">\boldsymbol\lambda</span> of Lagrange multipliers to form the Lagrangian function <span class="math display">
\mathcal{L}(\bar{\bm z}, \boldsymbol \lambda) = \frac{1}{2}\bar{\bm z}^\top \widetilde{\mathbf Q} \bar{\bm z} + \boldsymbol\lambda^\top(\widetilde{\mathbf A} \bar{\bm z} + \tilde{\mathbf b}),
</span> for which the gradients with respect to <span class="math inline">\bar{\bm z}</span> and <span class="math inline">\boldsymbol\lambda</span> are <span class="math display">
\begin{aligned}
\nabla_{\tilde{\bm{z}}} \mathcal{L}(\bar{\bm z}, \boldsymbol\lambda) &amp;= \widetilde{\mathbf Q}\bar{\bm z} + \tilde{\mathbf A}^\top\boldsymbol\lambda,\\
\nabla_{\boldsymbol{\lambda}} \mathcal{L}(\tilde{\bm x}, \boldsymbol\lambda) &amp;=\widetilde{\mathbf A} \bar{\bm z} + \tilde{\mathbf b}.
\end{aligned}
</span></p>
<p>Requiring that the overall gradient vanishes leads to the following KKT set of linear equations <span class="math display">
\begin{bmatrix}
  \widetilde{\mathbf Q} &amp; \widetilde{\mathbf A}^\top\\ \widetilde{\mathbf A} &amp; \mathbf 0
\end{bmatrix}
\begin{bmatrix}
\bar{\bm z}\\\boldsymbol\lambda
\end{bmatrix}
=
\begin{bmatrix}
\mathbf 0\\ -\tilde{\mathbf b}
\end{bmatrix}.
</span></p>
<p>Solving this could be accomplished by using some general solver for linear systems or by using some more tailored solver for symmetric indefinite systems (based on <a href="https://en.wikipedia.org/wiki/Cholesky_decomposition#LDL_decomposition">LDL factorization</a>).</p>
<div id="exm-direct-simultaneous" class="theorem example">
<p><span class="theorem-title"><strong>Example 1 (Reformulating the unconstrained LQR problem as a system of linear equations – simultaneous approach)</strong></span> &nbsp;</p>
<div id="2" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">BlockArrays</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LinearAlgebra</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LinearSolve</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">QDLDL</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">SparseArrays</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">direct_dlqr_simultaneous</span>(A,B,x₀,Q,R,S,N)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="fu">size</span>(A)[<span class="fl">1</span>]</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    m <span class="op">=</span> <span class="fu">size</span>(B)[<span class="fl">2</span>]</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    Q̄ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>n,N<span class="op">*</span>n),<span class="fu">repeat</span>([n],N),<span class="fu">repeat</span>([n],N))</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>(N<span class="op">-</span><span class="fl">1</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>        Q̄[<span class="fu">Block</span>(i,i)] <span class="op">=</span> Q</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    Q̄[<span class="fu">Block</span>(N,N)] <span class="op">=</span> S</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    R̄ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>m,N<span class="op">*</span>m),<span class="fu">repeat</span>([m],N),<span class="fu">repeat</span>([m],N))</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>N</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>        R̄[<span class="fu">Block</span>(i,i)] <span class="op">=</span> R</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    Q̃ <span class="op">=</span> <span class="fu">blockdiag</span>(<span class="fu">sparse</span>(Q̄),<span class="fu">sparse</span>(R̄))              <span class="co"># The matrix defining the quadratic cost.</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    B̄ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>n,N<span class="op">*</span>m),<span class="fu">repeat</span>([n],N),<span class="fu">repeat</span>([m],N))</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>N</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>        B̄[<span class="fu">Block</span>(i,i)] <span class="op">=</span> B</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    Ā <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">sparse</span>(<span class="op">-</span><span class="fl">1.0</span><span class="op">*</span>I,n<span class="op">*</span>N,n<span class="op">*</span>N),<span class="fu">repeat</span>([n],N),<span class="fu">repeat</span>([n],N))</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">2</span><span class="op">:</span>N</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>        Ā[<span class="fu">Block</span>(i,(i<span class="op">-</span><span class="fl">1</span>))] <span class="op">=</span> A</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    Ã <span class="op">=</span> <span class="fu">sparse</span>([Ā B̄])                               <span class="co"># The matrix defining the linear (affine) equation.</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    Ā₀ <span class="op">=</span> <span class="fu">spzeros</span>(n<span class="op">*</span>N,n)</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    Ā₀[<span class="fl">1</span><span class="op">:</span>n,<span class="fl">1</span><span class="op">:</span>n] <span class="op">=</span> A</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    b̃ <span class="op">=</span> <span class="fu">Ā₀*sparse</span>(x₀)                               <span class="co"># The constant offset for the linear (affine) equation.</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    K <span class="op">=</span> [Q̃ Ã<span class="ch">'; Ã spzeros(size(Ã,1),size(Ã,1))]      # Sparse KKT matrix.</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    k <span class="op">=</span> [<span class="fu">spzeros</span>(<span class="fu">size</span>(Q̃,<span class="fl">1</span>)); <span class="op">-</span>b̃]                    <span class="co"># Right hand side of the KKT system</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    prob <span class="op">=</span> <span class="fu">LinearProblem</span>(K,k)                       <span class="co"># The KKT system as a linear problem.</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    z̃λ <span class="op">=</span> LinearSolve.<span class="fu">solve</span>(prob)                    <span class="co"># Solving the KKT system. Ready for trying various solvers.</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    xopt <span class="op">=</span> <span class="fu">reshape</span>(z̃λ[<span class="fl">1</span><span class="op">:</span>(n<span class="op">*</span>N)],(n,<span class="op">:</span>))</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    uopt <span class="op">=</span> <span class="fu">reshape</span>(z̃λ[(n<span class="op">*</span>N<span class="op">+</span><span class="fl">1</span>)<span class="op">:</span>(n<span class="op">+</span>m)<span class="op">*</span>N],(m,<span class="op">:</span>))</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    return xopt,uopt</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="fl">2</span>               <span class="co"># Number of state variables.</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> <span class="fl">1</span>               <span class="co"># Number of (control) input variables. </span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> <span class="fu">rand</span>(n,n)       <span class="co"># State matrix.</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> <span class="fu">rand</span>(n,m)       <span class="co"># Input coupling matrix.</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>x₀ <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">3.0</span>]     <span class="co"># Initial state.</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="fl">10</span>              <span class="co"># Time horizon.</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">2.0</span>]      </span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">2.0</span>]</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> [<span class="fl">1.0</span>]</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>S <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>s)     <span class="co"># Matrix defining the terminal state cost.</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>Q <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>q)     <span class="co"># Matrix defining the running state dost.</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>R <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>r)     <span class="co"># Matrix defining the cost of control.</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>xopt,uopt <span class="op">=</span> <span class="fu">direct_dlqr_simultaneous</span>(A,B,x₀,Q,R,S,N)</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Plots</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>p1 <span class="op">=</span> <span class="fu">plot</span>(<span class="fl">0</span><span class="op">:</span>(N<span class="op">-</span><span class="fl">1</span>),uopt<span class="op">'</span>,marker<span class="op">=:</span>diamond,label<span class="op">=</span><span class="st">"u"</span>,linetype<span class="op">=:</span>steppost)</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"k"</span>)</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"u"</span>)</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>p2 <span class="op">=</span> <span class="fu">plot</span>(<span class="fl">0</span><span class="op">:</span>N,<span class="fu">hcat</span>(x₀,xopt)<span class="ch">',marker=:diamond,label=["x₁" "x₂"],linetype=:steppost)</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"k"</span>)</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"x"</span>)</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(p1,p2,layout<span class="op">=</span>(<span class="fl">2</span>,<span class="fl">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="1">
<!--?xml version="1.0" encoding="utf-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="672" height="480" viewbox="0 0 2688 1920">
<defs>
  <clippath id="clip410">
    <rect x="0" y="0" width="2688" height="1920"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip410)" d="M0 1920 L2688 1920 L2688 0 L0 0  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip411">
    <rect x="537" y="0" width="1883" height="1883"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip410)" d="M263.478 774.117 L2640.76 774.117 L2640.76 47.2441 L263.478 47.2441  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip412">
    <rect x="263" y="47" width="2378" height="728"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip412)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="330.76,774.117 330.76,47.2441 "></polyline>
<polyline clip-path="url(#clip412)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="829.141,774.117 829.141,47.2441 "></polyline>
<polyline clip-path="url(#clip412)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1327.52,774.117 1327.52,47.2441 "></polyline>
<polyline clip-path="url(#clip412)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1825.9,774.117 1825.9,47.2441 "></polyline>
<polyline clip-path="url(#clip412)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2324.28,774.117 2324.28,47.2441 "></polyline>
<polyline clip-path="url(#clip412)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,634.368 2640.76,634.368 "></polyline>
<polyline clip-path="url(#clip412)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,492.717 2640.76,492.717 "></polyline>
<polyline clip-path="url(#clip412)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,351.066 2640.76,351.066 "></polyline>
<polyline clip-path="url(#clip412)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,209.415 2640.76,209.415 "></polyline>
<polyline clip-path="url(#clip412)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,67.7639 2640.76,67.7639 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,774.117 2640.76,774.117 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="330.76,774.117 330.76,755.219 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="829.141,774.117 829.141,755.219 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1327.52,774.117 1327.52,755.219 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1825.9,774.117 1825.9,755.219 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2324.28,774.117 2324.28,755.219 "></polyline>
<path clip-path="url(#clip410)" d="M330.76 807.34 Q327.149 807.34 325.32 810.904 Q323.514 814.446 323.514 821.576 Q323.514 828.682 325.32 832.247 Q327.149 835.789 330.76 835.789 Q334.394 835.789 336.2 832.247 Q338.028 828.682 338.028 821.576 Q338.028 814.446 336.2 810.904 Q334.394 807.34 330.76 807.34 M330.76 803.636 Q336.57 803.636 339.625 808.242 Q342.704 812.826 342.704 821.576 Q342.704 830.303 339.625 834.909 Q336.57 839.492 330.76 839.492 Q324.95 839.492 321.871 834.909 Q318.815 830.303 318.815 821.576 Q318.815 812.826 321.871 808.242 Q324.95 803.636 330.76 803.636 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M823.794 834.886 L840.113 834.886 L840.113 838.821 L818.169 838.821 L818.169 834.886 Q820.831 832.131 825.414 827.502 Q830.02 822.849 831.201 821.506 Q833.446 818.983 834.326 817.247 Q835.229 815.488 835.229 813.798 Q835.229 811.043 833.284 809.307 Q831.363 807.571 828.261 807.571 Q826.062 807.571 823.608 808.335 Q821.178 809.099 818.4 810.65 L818.4 805.928 Q821.224 804.793 823.678 804.215 Q826.132 803.636 828.169 803.636 Q833.539 803.636 836.733 806.321 Q839.928 809.006 839.928 813.497 Q839.928 815.627 839.118 817.548 Q838.331 819.446 836.224 822.039 Q835.645 822.71 832.544 825.928 Q829.442 829.122 823.794 834.886 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M1330.53 808.335 L1318.73 826.784 L1330.53 826.784 L1330.53 808.335 M1329.3 804.261 L1335.18 804.261 L1335.18 826.784 L1340.11 826.784 L1340.11 830.673 L1335.18 830.673 L1335.18 838.821 L1330.53 838.821 L1330.53 830.673 L1314.93 830.673 L1314.93 826.159 L1329.3 804.261 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M1826.31 819.678 Q1823.16 819.678 1821.31 821.83 Q1819.48 823.983 1819.48 827.733 Q1819.48 831.46 1821.31 833.636 Q1823.16 835.789 1826.31 835.789 Q1829.46 835.789 1831.28 833.636 Q1833.14 831.46 1833.14 827.733 Q1833.14 823.983 1831.28 821.83 Q1829.46 819.678 1826.31 819.678 M1835.59 805.025 L1835.59 809.284 Q1833.83 808.451 1832.03 808.011 Q1830.24 807.571 1828.48 807.571 Q1823.85 807.571 1821.4 810.696 Q1818.97 813.821 1818.62 820.141 Q1819.99 818.127 1822.05 817.062 Q1824.11 815.974 1826.59 815.974 Q1831.79 815.974 1834.8 819.145 Q1837.84 822.293 1837.84 827.733 Q1837.84 833.057 1834.69 836.275 Q1831.54 839.492 1826.31 839.492 Q1820.31 839.492 1817.14 834.909 Q1813.97 830.303 1813.97 821.576 Q1813.97 813.381 1817.86 808.52 Q1821.75 803.636 1828.3 803.636 Q1830.06 803.636 1831.84 803.983 Q1833.65 804.33 1835.59 805.025 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M2324.28 822.409 Q2320.95 822.409 2319.03 824.191 Q2317.13 825.974 2317.13 829.099 Q2317.13 832.224 2319.03 834.006 Q2320.95 835.789 2324.28 835.789 Q2327.62 835.789 2329.54 834.006 Q2331.46 832.201 2331.46 829.099 Q2331.46 825.974 2329.54 824.191 Q2327.64 822.409 2324.28 822.409 M2319.61 820.418 Q2316.6 819.678 2314.91 817.617 Q2313.24 815.557 2313.24 812.594 Q2313.24 808.451 2316.18 806.043 Q2319.15 803.636 2324.28 803.636 Q2329.45 803.636 2332.39 806.043 Q2335.33 808.451 2335.33 812.594 Q2335.33 815.557 2333.64 817.617 Q2331.97 819.678 2328.98 820.418 Q2332.36 821.205 2334.24 823.497 Q2336.14 825.789 2336.14 829.099 Q2336.14 834.122 2333.06 836.807 Q2330 839.492 2324.28 839.492 Q2318.57 839.492 2315.49 836.807 Q2312.43 834.122 2312.43 829.099 Q2312.43 825.789 2314.33 823.497 Q2316.23 821.205 2319.61 820.418 M2317.9 813.034 Q2317.9 815.719 2319.56 817.224 Q2321.25 818.729 2324.28 818.729 Q2327.29 818.729 2328.98 817.224 Q2330.7 815.719 2330.7 813.034 Q2330.7 810.349 2328.98 808.844 Q2327.29 807.34 2324.28 807.34 Q2321.25 807.34 2319.56 808.844 Q2317.9 810.349 2317.9 813.034 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M1436.3 873.776 L1442.19 873.776 L1442.19 903.026 L1459.66 887.653 L1467.14 887.653 L1448.23 904.331 L1467.94 923.301 L1460.3 923.301 L1442.19 905.891 L1442.19 923.301 L1436.3 923.301 L1436.3 873.776 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,774.117 263.478,47.2441 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,634.368 282.376,634.368 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,492.717 282.376,492.717 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,351.066 282.376,351.066 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,209.415 282.376,209.415 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,67.7639 282.376,67.7639 "></polyline>
<path clip-path="url(#clip410)" d="M116.214 634.819 L145.89 634.819 L145.89 638.754 L116.214 638.754 L116.214 634.819 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M160.011 647.712 L176.33 647.712 L176.33 651.648 L154.386 651.648 L154.386 647.712 Q157.048 644.958 161.631 640.328 Q166.237 635.675 167.418 634.333 Q169.663 631.81 170.543 630.074 Q171.446 628.314 171.446 626.625 Q171.446 623.87 169.501 622.134 Q167.58 620.398 164.478 620.398 Q162.279 620.398 159.825 621.162 Q157.395 621.926 154.617 623.476 L154.617 618.754 Q157.441 617.62 159.895 617.041 Q162.348 616.463 164.385 616.463 Q169.756 616.463 172.95 619.148 Q176.145 621.833 176.145 626.324 Q176.145 628.453 175.334 630.375 Q174.547 632.273 172.441 634.865 Q171.862 635.537 168.76 638.754 Q165.659 641.949 160.011 647.712 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M186.145 645.768 L191.029 645.768 L191.029 651.648 L186.145 651.648 L186.145 645.768 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M211.214 620.166 Q207.603 620.166 205.774 623.731 Q203.969 627.273 203.969 634.402 Q203.969 641.509 205.774 645.074 Q207.603 648.615 211.214 648.615 Q214.848 648.615 216.654 645.074 Q218.482 641.509 218.482 634.402 Q218.482 627.273 216.654 623.731 Q214.848 620.166 211.214 620.166 M211.214 616.463 Q217.024 616.463 220.08 621.069 Q223.158 625.652 223.158 634.402 Q223.158 643.129 220.08 647.736 Q217.024 652.319 211.214 652.319 Q205.404 652.319 202.325 647.736 Q199.27 643.129 199.27 634.402 Q199.27 625.652 202.325 621.069 Q205.404 616.463 211.214 616.463 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M117.21 493.168 L146.886 493.168 L146.886 497.103 L117.21 497.103 L117.21 493.168 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M157.788 506.062 L165.427 506.062 L165.427 479.696 L157.117 481.363 L157.117 477.103 L165.381 475.437 L170.057 475.437 L170.057 506.062 L177.696 506.062 L177.696 509.997 L157.788 509.997 L157.788 506.062 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M187.14 504.117 L192.024 504.117 L192.024 509.997 L187.14 509.997 L187.14 504.117 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M202.256 475.437 L220.612 475.437 L220.612 479.372 L206.538 479.372 L206.538 487.844 Q207.557 487.497 208.575 487.335 Q209.594 487.15 210.612 487.15 Q216.399 487.15 219.779 490.321 Q223.158 493.492 223.158 498.909 Q223.158 504.487 219.686 507.589 Q216.214 510.668 209.894 510.668 Q207.719 510.668 205.45 510.298 Q203.205 509.927 200.797 509.186 L200.797 504.487 Q202.881 505.622 205.103 506.177 Q207.325 506.733 209.802 506.733 Q213.807 506.733 216.144 504.626 Q218.482 502.52 218.482 498.909 Q218.482 495.298 216.144 493.191 Q213.807 491.085 209.802 491.085 Q207.927 491.085 206.052 491.501 Q204.2 491.918 202.256 492.798 L202.256 475.437 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M116.214 351.517 L145.89 351.517 L145.89 355.452 L116.214 355.452 L116.214 351.517 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M156.793 364.411 L164.432 364.411 L164.432 338.045 L156.122 339.712 L156.122 335.452 L164.385 333.786 L169.061 333.786 L169.061 364.411 L176.7 364.411 L176.7 368.346 L156.793 368.346 L156.793 364.411 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M186.145 362.466 L191.029 362.466 L191.029 368.346 L186.145 368.346 L186.145 362.466 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M211.214 336.864 Q207.603 336.864 205.774 340.429 Q203.969 343.971 203.969 351.1 Q203.969 358.207 205.774 361.772 Q207.603 365.313 211.214 365.313 Q214.848 365.313 216.654 361.772 Q218.482 358.207 218.482 351.1 Q218.482 343.971 216.654 340.429 Q214.848 336.864 211.214 336.864 M211.214 333.161 Q217.024 333.161 220.08 337.767 Q223.158 342.351 223.158 351.1 Q223.158 359.827 220.08 364.434 Q217.024 369.017 211.214 369.017 Q205.404 369.017 202.325 364.434 Q199.27 359.827 199.27 351.1 Q199.27 342.351 202.325 337.767 Q205.404 333.161 211.214 333.161 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M117.21 209.866 L146.886 209.866 L146.886 213.801 L117.21 213.801 L117.21 209.866 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M166.978 195.213 Q163.367 195.213 161.538 198.778 Q159.733 202.32 159.733 209.45 Q159.733 216.556 161.538 220.121 Q163.367 223.662 166.978 223.662 Q170.612 223.662 172.418 220.121 Q174.247 216.556 174.247 209.45 Q174.247 202.32 172.418 198.778 Q170.612 195.213 166.978 195.213 M166.978 191.51 Q172.788 191.51 175.844 196.116 Q178.922 200.7 178.922 209.45 Q178.922 218.176 175.844 222.783 Q172.788 227.366 166.978 227.366 Q161.168 227.366 158.089 222.783 Q155.034 218.176 155.034 209.45 Q155.034 200.7 158.089 196.116 Q161.168 191.51 166.978 191.51 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M187.14 220.815 L192.024 220.815 L192.024 226.695 L187.14 226.695 L187.14 220.815 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M202.256 192.135 L220.612 192.135 L220.612 196.07 L206.538 196.07 L206.538 204.542 Q207.557 204.195 208.575 204.033 Q209.594 203.848 210.612 203.848 Q216.399 203.848 219.779 207.019 Q223.158 210.19 223.158 215.607 Q223.158 221.186 219.686 224.287 Q216.214 227.366 209.894 227.366 Q207.719 227.366 205.45 226.996 Q203.205 226.625 200.797 225.885 L200.797 221.186 Q202.881 222.32 205.103 222.875 Q207.325 223.431 209.802 223.431 Q213.807 223.431 216.144 221.324 Q218.482 219.218 218.482 215.607 Q218.482 211.996 216.144 209.889 Q213.807 207.783 209.802 207.783 Q207.927 207.783 206.052 208.2 Q204.2 208.616 202.256 209.496 L202.256 192.135 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M165.983 53.5625 Q162.372 53.5625 160.543 57.1273 Q158.737 60.669 158.737 67.7986 Q158.737 74.905 160.543 78.4698 Q162.372 82.0115 165.983 82.0115 Q169.617 82.0115 171.422 78.4698 Q173.251 74.905 173.251 67.7986 Q173.251 60.669 171.422 57.1273 Q169.617 53.5625 165.983 53.5625 M165.983 49.8589 Q171.793 49.8589 174.848 54.4653 Q177.927 59.0486 177.927 67.7986 Q177.927 76.5254 174.848 81.1318 Q171.793 85.7151 165.983 85.7151 Q160.173 85.7151 157.094 81.1318 Q154.038 76.5254 154.038 67.7986 Q154.038 59.0486 157.094 54.4653 Q160.173 49.8589 165.983 49.8589 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M186.145 79.1643 L191.029 79.1643 L191.029 85.0439 L186.145 85.0439 L186.145 79.1643 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M211.214 53.5625 Q207.603 53.5625 205.774 57.1273 Q203.969 60.669 203.969 67.7986 Q203.969 74.905 205.774 78.4698 Q207.603 82.0115 211.214 82.0115 Q214.848 82.0115 216.654 78.4698 Q218.482 74.905 218.482 67.7986 Q218.482 60.669 216.654 57.1273 Q214.848 53.5625 211.214 53.5625 M211.214 49.8589 Q217.024 49.8589 220.08 54.4653 Q223.158 59.0486 223.158 67.7986 Q223.158 76.5254 220.08 81.1318 Q217.024 85.7151 211.214 85.7151 Q205.404 85.7151 202.325 81.1318 Q199.27 76.5254 199.27 67.7986 Q199.27 59.0486 202.325 54.4653 Q205.404 49.8589 211.214 49.8589 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M47.5702 425.608 L25.9905 425.608 L25.9905 419.752 L47.3474 419.752 Q52.4082 419.752 54.9545 417.778 Q57.4689 415.805 57.4689 411.858 Q57.4689 407.116 54.4452 404.378 Q51.4215 401.609 46.2016 401.609 L25.9905 401.609 L25.9905 395.753 L61.6384 395.753 L61.6384 401.609 L56.1639 401.609 Q59.4104 403.742 61.0019 406.575 Q62.5615 409.376 62.5615 413.1 Q62.5615 419.242 58.742 422.425 Q54.9226 425.608 47.5702 425.608 M25.1311 410.872 L25.1311 410.872 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip412)" d="M330.76 737.545 L314.76 753.545 L330.76 769.545 L346.76 753.545 L330.76 737.545 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip412)" d="M579.95 304.758 L563.95 320.758 L579.95 336.758 L595.95 320.758 L579.95 304.758 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip412)" d="M829.141 136.725 L813.141 152.725 L829.141 168.725 L845.141 152.725 L829.141 136.725 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip412)" d="M1078.33 83.1387 L1062.33 99.1387 L1078.33 115.139 L1094.33 99.1387 L1078.33 83.1387 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip412)" d="M1327.52 62.2894 L1311.52 78.2894 L1327.52 94.2894 L1343.52 78.2894 L1327.52 62.2894 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip412)" d="M1576.71 55.6547 L1560.71 71.6547 L1576.71 87.6547 L1592.71 71.6547 L1576.71 55.6547 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip412)" d="M1825.9 53.0675 L1809.9 69.0675 L1825.9 85.0675 L1841.9 69.0675 L1825.9 53.0675 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip412)" d="M2075.09 52.2454 L2059.09 68.2454 L2075.09 84.2454 L2091.09 68.2454 L2075.09 52.2454 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip412)" d="M2324.28 51.9229 L2308.28 67.9229 L2324.28 83.9229 L2340.28 67.9229 L2324.28 51.9229 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip412)" d="M2573.47 51.816 L2557.47 67.816 L2573.47 83.816 L2589.47 67.816 L2573.47 51.816 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip412)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="330.76,753.545 579.95,753.545 579.95,320.758 829.141,320.758 829.141,152.725 1078.33,152.725 1078.33,99.1387 1327.52,99.1387 1327.52,78.2894 1576.71,78.2894 1576.71,71.6547 1825.9,71.6547 1825.9,69.0675 2075.09,69.0675 2075.09,68.2454 2324.28,68.2454 2324.28,67.9229 2573.47,67.9229 2573.47,67.816 "></polyline>
<path clip-path="url(#clip410)" d="M2302.07 749.888 L2561.51 749.888 L2561.51 646.208 L2302.07 646.208  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2302.07,749.888 2561.51,749.888 2561.51,646.208 2302.07,646.208 2302.07,749.888 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2328.49,698.048 2486.97,698.048 "></polyline>
<path clip-path="url(#clip410)" d="M2513.39 705.096 L2513.39 689.402 L2517.65 689.402 L2517.65 704.934 Q2517.65 708.615 2519.08 710.467 Q2520.52 712.295 2523.39 712.295 Q2526.84 712.295 2528.83 710.096 Q2530.84 707.897 2530.84 704.101 L2530.84 689.402 L2535.1 689.402 L2535.1 715.328 L2530.84 715.328 L2530.84 711.346 Q2529.29 713.708 2527.23 714.865 Q2525.19 715.999 2522.48 715.999 Q2518.02 715.999 2515.7 713.221 Q2513.39 710.444 2513.39 705.096 M2524.1 688.777 L2524.1 688.777 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M263.478 1734.12 L2640.76 1734.12 L2640.76 1007.24 L263.478 1007.24  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip413">
    <rect x="263" y="1007" width="2378" height="728"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip413)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="330.76,1734.12 330.76,1007.24 "></polyline>
<polyline clip-path="url(#clip413)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="891.438,1734.12 891.438,1007.24 "></polyline>
<polyline clip-path="url(#clip413)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1452.12,1734.12 1452.12,1007.24 "></polyline>
<polyline clip-path="url(#clip413)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2012.8,1734.12 2012.8,1007.24 "></polyline>
<polyline clip-path="url(#clip413)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2573.47,1734.12 2573.47,1007.24 "></polyline>
<polyline clip-path="url(#clip413)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,1713.56 2640.76,1713.56 "></polyline>
<polyline clip-path="url(#clip413)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,1484.98 2640.76,1484.98 "></polyline>
<polyline clip-path="url(#clip413)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,1256.4 2640.76,1256.4 "></polyline>
<polyline clip-path="url(#clip413)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,1027.82 2640.76,1027.82 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,1734.12 2640.76,1734.12 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="330.76,1734.12 330.76,1715.22 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="891.438,1734.12 891.438,1715.22 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1452.12,1734.12 1452.12,1715.22 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2012.8,1734.12 2012.8,1715.22 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2573.47,1734.12 2573.47,1715.22 "></polyline>
<path clip-path="url(#clip410)" d="M308.144 1767.34 Q304.533 1767.34 302.704 1770.9 Q300.899 1774.45 300.899 1781.58 Q300.899 1788.68 302.704 1792.25 Q304.533 1795.79 308.144 1795.79 Q311.778 1795.79 313.584 1792.25 Q315.413 1788.68 315.413 1781.58 Q315.413 1774.45 313.584 1770.9 Q311.778 1767.34 308.144 1767.34 M308.144 1763.64 Q313.954 1763.64 317.01 1768.24 Q320.089 1772.83 320.089 1781.58 Q320.089 1790.3 317.01 1794.91 Q313.954 1799.49 308.144 1799.49 Q302.334 1799.49 299.255 1794.91 Q296.2 1790.3 296.2 1781.58 Q296.2 1772.83 299.255 1768.24 Q302.334 1763.64 308.144 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M328.306 1792.94 L333.19 1792.94 L333.19 1798.82 L328.306 1798.82 L328.306 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M353.375 1767.34 Q349.764 1767.34 347.936 1770.9 Q346.13 1774.45 346.13 1781.58 Q346.13 1788.68 347.936 1792.25 Q349.764 1795.79 353.375 1795.79 Q357.01 1795.79 358.815 1792.25 Q360.644 1788.68 360.644 1781.58 Q360.644 1774.45 358.815 1770.9 Q357.01 1767.34 353.375 1767.34 M353.375 1763.64 Q359.186 1763.64 362.241 1768.24 Q365.32 1772.83 365.32 1781.58 Q365.32 1790.3 362.241 1794.91 Q359.186 1799.49 353.375 1799.49 Q347.565 1799.49 344.487 1794.91 Q341.431 1790.3 341.431 1781.58 Q341.431 1772.83 344.487 1768.24 Q347.565 1763.64 353.375 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M863.175 1794.89 L879.494 1794.89 L879.494 1798.82 L857.55 1798.82 L857.55 1794.89 Q860.212 1792.13 864.795 1787.5 Q869.402 1782.85 870.582 1781.51 Q872.827 1778.98 873.707 1777.25 Q874.61 1775.49 874.61 1773.8 Q874.61 1771.04 872.665 1769.31 Q870.744 1767.57 867.642 1767.57 Q865.443 1767.57 862.99 1768.34 Q860.559 1769.1 857.781 1770.65 L857.781 1765.93 Q860.605 1764.79 863.059 1764.21 Q865.513 1763.64 867.55 1763.64 Q872.92 1763.64 876.114 1766.32 Q879.309 1769.01 879.309 1773.5 Q879.309 1775.63 878.499 1777.55 Q877.712 1779.45 875.605 1782.04 Q875.026 1782.71 871.925 1785.93 Q868.823 1789.12 863.175 1794.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M889.309 1792.94 L894.193 1792.94 L894.193 1798.82 L889.309 1798.82 L889.309 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M904.424 1764.26 L922.781 1764.26 L922.781 1768.2 L908.707 1768.2 L908.707 1776.67 Q909.725 1776.32 910.744 1776.16 Q911.762 1775.97 912.781 1775.97 Q918.568 1775.97 921.948 1779.15 Q925.327 1782.32 925.327 1787.73 Q925.327 1793.31 921.855 1796.41 Q918.383 1799.49 912.063 1799.49 Q909.887 1799.49 907.619 1799.12 Q905.374 1798.75 902.966 1798.01 L902.966 1793.31 Q905.049 1794.45 907.272 1795 Q909.494 1795.56 911.971 1795.56 Q915.975 1795.56 918.313 1793.45 Q920.651 1791.34 920.651 1787.73 Q920.651 1784.12 918.313 1782.02 Q915.975 1779.91 911.971 1779.91 Q910.096 1779.91 908.221 1780.33 Q906.369 1780.74 904.424 1781.62 L904.424 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M1419.28 1764.26 L1437.64 1764.26 L1437.64 1768.2 L1423.56 1768.2 L1423.56 1776.67 Q1424.58 1776.32 1425.6 1776.16 Q1426.62 1775.97 1427.64 1775.97 Q1433.43 1775.97 1436.8 1779.15 Q1440.18 1782.32 1440.18 1787.73 Q1440.18 1793.31 1436.71 1796.41 Q1433.24 1799.49 1426.92 1799.49 Q1424.74 1799.49 1422.48 1799.12 Q1420.23 1798.75 1417.82 1798.01 L1417.82 1793.31 Q1419.91 1794.45 1422.13 1795 Q1424.35 1795.56 1426.83 1795.56 Q1430.83 1795.56 1433.17 1793.45 Q1435.51 1791.34 1435.51 1787.73 Q1435.51 1784.12 1433.17 1782.02 Q1430.83 1779.91 1426.83 1779.91 Q1424.95 1779.91 1423.08 1780.33 Q1421.23 1780.74 1419.28 1781.62 L1419.28 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M1449.4 1792.94 L1454.28 1792.94 L1454.28 1798.82 L1449.4 1798.82 L1449.4 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M1474.47 1767.34 Q1470.86 1767.34 1469.03 1770.9 Q1467.22 1774.45 1467.22 1781.58 Q1467.22 1788.68 1469.03 1792.25 Q1470.86 1795.79 1474.47 1795.79 Q1478.1 1795.79 1479.91 1792.25 Q1481.74 1788.68 1481.74 1781.58 Q1481.74 1774.45 1479.91 1770.9 Q1478.1 1767.34 1474.47 1767.34 M1474.47 1763.64 Q1480.28 1763.64 1483.33 1768.24 Q1486.41 1772.83 1486.41 1781.58 Q1486.41 1790.3 1483.33 1794.91 Q1480.28 1799.49 1474.47 1799.49 Q1468.66 1799.49 1465.58 1794.91 Q1462.52 1790.3 1462.52 1781.58 Q1462.52 1772.83 1465.58 1768.24 Q1468.66 1763.64 1474.47 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M1979.12 1764.26 L2001.34 1764.26 L2001.34 1766.25 L1988.79 1798.82 L1983.91 1798.82 L1995.71 1768.2 L1979.12 1768.2 L1979.12 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M2010.46 1792.94 L2015.34 1792.94 L2015.34 1798.82 L2010.46 1798.82 L2010.46 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M2025.57 1764.26 L2043.93 1764.26 L2043.93 1768.2 L2029.86 1768.2 L2029.86 1776.67 Q2030.87 1776.32 2031.89 1776.16 Q2032.91 1775.97 2033.93 1775.97 Q2039.72 1775.97 2043.1 1779.15 Q2046.48 1782.32 2046.48 1787.73 Q2046.48 1793.31 2043 1796.41 Q2039.53 1799.49 2033.21 1799.49 Q2031.04 1799.49 2028.77 1799.12 Q2026.52 1798.75 2024.12 1798.01 L2024.12 1793.31 Q2026.2 1794.45 2028.42 1795 Q2030.64 1795.56 2033.12 1795.56 Q2037.12 1795.56 2039.46 1793.45 Q2041.8 1791.34 2041.8 1787.73 Q2041.8 1784.12 2039.46 1782.02 Q2037.12 1779.91 2033.12 1779.91 Q2031.24 1779.91 2029.37 1780.33 Q2027.52 1780.74 2025.57 1781.62 L2025.57 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M2525.55 1794.89 L2533.19 1794.89 L2533.19 1768.52 L2524.88 1770.19 L2524.88 1765.93 L2533.14 1764.26 L2537.81 1764.26 L2537.81 1794.89 L2545.45 1794.89 L2545.45 1798.82 L2525.55 1798.82 L2525.55 1794.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M2564.9 1767.34 Q2561.29 1767.34 2559.46 1770.9 Q2557.65 1774.45 2557.65 1781.58 Q2557.65 1788.68 2559.46 1792.25 Q2561.29 1795.79 2564.9 1795.79 Q2568.53 1795.79 2570.34 1792.25 Q2572.17 1788.68 2572.17 1781.58 Q2572.17 1774.45 2570.34 1770.9 Q2568.53 1767.34 2564.9 1767.34 M2564.9 1763.64 Q2570.71 1763.64 2573.76 1768.24 Q2576.84 1772.83 2576.84 1781.58 Q2576.84 1790.3 2573.76 1794.91 Q2570.71 1799.49 2564.9 1799.49 Q2559.09 1799.49 2556.01 1794.91 Q2552.95 1790.3 2552.95 1781.58 Q2552.95 1772.83 2556.01 1768.24 Q2559.09 1763.64 2564.9 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M2585.06 1792.94 L2589.94 1792.94 L2589.94 1798.82 L2585.06 1798.82 L2585.06 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M2610.13 1767.34 Q2606.52 1767.34 2604.69 1770.9 Q2602.88 1774.45 2602.88 1781.58 Q2602.88 1788.68 2604.69 1792.25 Q2606.52 1795.79 2610.13 1795.79 Q2613.76 1795.79 2615.57 1792.25 Q2617.4 1788.68 2617.4 1781.58 Q2617.4 1774.45 2615.57 1770.9 Q2613.76 1767.34 2610.13 1767.34 M2610.13 1763.64 Q2615.94 1763.64 2619 1768.24 Q2622.07 1772.83 2622.07 1781.58 Q2622.07 1790.3 2619 1794.91 Q2615.94 1799.49 2610.13 1799.49 Q2604.32 1799.49 2601.24 1794.91 Q2598.18 1790.3 2598.18 1781.58 Q2598.18 1772.83 2601.24 1768.24 Q2604.32 1763.64 2610.13 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M1436.3 1833.78 L1442.19 1833.78 L1442.19 1863.03 L1459.66 1847.65 L1467.14 1847.65 L1448.23 1864.33 L1467.94 1883.3 L1460.3 1883.3 L1442.19 1865.89 L1442.19 1883.3 L1436.3 1883.3 L1436.3 1833.78 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,1734.12 263.478,1007.24 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,1713.56 282.376,1713.56 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,1484.98 282.376,1484.98 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,1256.4 282.376,1256.4 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,1027.82 282.376,1027.82 "></polyline>
<path clip-path="url(#clip410)" d="M211.214 1699.36 Q207.603 1699.36 205.774 1702.92 Q203.969 1706.47 203.969 1713.6 Q203.969 1720.7 205.774 1724.27 Q207.603 1727.81 211.214 1727.81 Q214.848 1727.81 216.654 1724.27 Q218.482 1720.7 218.482 1713.6 Q218.482 1706.47 216.654 1702.92 Q214.848 1699.36 211.214 1699.36 M211.214 1695.66 Q217.024 1695.66 220.08 1700.26 Q223.158 1704.85 223.158 1713.6 Q223.158 1722.32 220.08 1726.93 Q217.024 1731.51 211.214 1731.51 Q205.404 1731.51 202.325 1726.93 Q199.27 1722.32 199.27 1713.6 Q199.27 1704.85 202.325 1700.26 Q205.404 1695.66 211.214 1695.66 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M203.251 1498.32 L210.89 1498.32 L210.89 1471.96 L202.58 1473.63 L202.58 1469.37 L210.844 1467.7 L215.519 1467.7 L215.519 1498.32 L223.158 1498.32 L223.158 1502.26 L203.251 1502.26 L203.251 1498.32 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M206.839 1269.74 L223.158 1269.74 L223.158 1273.68 L201.214 1273.68 L201.214 1269.74 Q203.876 1266.99 208.459 1262.36 Q213.066 1257.71 214.246 1256.36 Q216.492 1253.84 217.371 1252.1 Q218.274 1250.34 218.274 1248.65 Q218.274 1245.9 216.33 1244.16 Q214.408 1242.43 211.307 1242.43 Q209.107 1242.43 206.654 1243.19 Q204.223 1243.96 201.445 1245.51 L201.445 1240.78 Q204.27 1239.65 206.723 1239.07 Q209.177 1238.49 211.214 1238.49 Q216.584 1238.49 219.779 1241.18 Q222.973 1243.86 222.973 1248.35 Q222.973 1250.48 222.163 1252.4 Q221.376 1254.3 219.269 1256.9 Q218.691 1257.57 215.589 1260.78 Q212.487 1263.98 206.839 1269.74 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M216.029 1026.46 Q219.385 1027.18 221.26 1029.45 Q223.158 1031.72 223.158 1035.05 Q223.158 1040.17 219.64 1042.97 Q216.121 1045.77 209.64 1045.77 Q207.464 1045.77 205.149 1045.33 Q202.857 1044.91 200.404 1044.05 L200.404 1039.54 Q202.348 1040.67 204.663 1041.25 Q206.978 1041.83 209.501 1041.83 Q213.899 1041.83 216.191 1040.1 Q218.506 1038.36 218.506 1035.05 Q218.506 1031.99 216.353 1030.28 Q214.223 1028.55 210.404 1028.55 L206.376 1028.55 L206.376 1024.7 L210.589 1024.7 Q214.038 1024.7 215.867 1023.34 Q217.695 1021.95 217.695 1019.36 Q217.695 1016.69 215.797 1015.28 Q213.922 1013.85 210.404 1013.85 Q208.482 1013.85 206.283 1014.26 Q204.084 1014.68 201.445 1015.56 L201.445 1011.39 Q204.107 1010.65 206.422 1010.28 Q208.76 1009.91 210.82 1009.91 Q216.144 1009.91 219.246 1012.34 Q222.348 1014.75 222.348 1018.87 Q222.348 1021.74 220.705 1023.73 Q219.061 1025.7 216.029 1026.46 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M109.046 1354.07 L126.392 1366.96 L144.694 1353.4 L144.694 1360.3 L130.689 1370.68 L144.694 1381.06 L144.694 1387.96 L126.042 1374.12 L109.046 1386.79 L109.046 1379.88 L121.745 1370.43 L109.046 1360.97 L109.046 1354.07 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip413)" d="M330.76 1468.98 L314.76 1484.98 L330.76 1500.98 L346.76 1484.98 L330.76 1468.98 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M555.031 1501.28 L539.031 1517.28 L555.031 1533.28 L571.031 1517.28 L555.031 1501.28 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M779.303 1669.67 L763.303 1685.67 L779.303 1701.67 L795.303 1685.67 L779.303 1669.67 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M1003.57 1673.08 L987.574 1689.08 L1003.57 1705.08 L1019.57 1689.08 L1003.57 1673.08 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M1227.85 1694.16 L1211.85 1710.16 L1227.85 1726.16 L1243.85 1710.16 L1227.85 1694.16 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M1452.12 1694.51 L1436.12 1710.51 L1452.12 1726.51 L1468.12 1710.51 L1452.12 1694.51 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M1676.39 1697.15 L1660.39 1713.15 L1676.39 1729.15 L1692.39 1713.15 L1676.39 1697.15 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M1900.66 1697.18 L1884.66 1713.18 L1900.66 1729.18 L1916.66 1713.18 L1900.66 1697.18 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M2124.93 1697.51 L2108.93 1713.51 L2124.93 1729.51 L2140.93 1713.51 L2124.93 1697.51 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M2349.2 1697.51 L2333.2 1713.51 L2349.2 1729.51 L2365.2 1713.51 L2349.2 1697.51 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M2573.47 1697.55 L2557.47 1713.55 L2573.47 1729.55 L2589.47 1713.55 L2573.47 1697.55 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip413)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="330.76,1484.98 555.031,1484.98 555.031,1517.28 779.303,1517.28 779.303,1685.67 1003.57,1685.67 1003.57,1689.08 1227.85,1689.08 1227.85,1710.16 1452.12,1710.16 1452.12,1710.51 1676.39,1710.51 1676.39,1713.15 1900.66,1713.15 1900.66,1713.18 2124.93,1713.18 2124.93,1713.51 2349.2,1713.51 2349.2,1713.51 2573.47,1713.51 2573.47,1713.55 "></polyline>
<path clip-path="url(#clip413)" d="M330.76 1011.82 L314.76 1027.82 L330.76 1043.82 L346.76 1027.82 L330.76 1011.82 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M555.031 1618.6 L539.031 1634.6 L555.031 1650.6 L571.031 1634.6 L555.031 1618.6 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M779.303 1611.95 L763.303 1627.95 L779.303 1643.95 L795.303 1627.95 L779.303 1611.95 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M1003.57 1687.99 L987.574 1703.99 L1003.57 1719.99 L1019.57 1703.99 L1003.57 1687.99 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M1227.85 1686.87 L1211.85 1702.87 L1227.85 1718.87 L1243.85 1702.87 L1227.85 1686.87 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M1452.12 1696.4 L1436.12 1712.4 L1452.12 1728.4 L1468.12 1712.4 L1452.12 1696.4 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M1676.39 1696.23 L1660.39 1712.23 L1676.39 1728.23 L1692.39 1712.23 L1676.39 1696.23 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M1900.66 1697.42 L1884.66 1713.42 L1900.66 1729.42 L1916.66 1713.42 L1900.66 1697.42 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M2124.93 1697.39 L2108.93 1713.39 L2124.93 1729.39 L2140.93 1713.39 L2124.93 1697.39 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M2349.2 1697.54 L2333.2 1713.54 L2349.2 1729.54 L2365.2 1713.54 L2349.2 1697.54 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip413)" d="M2573.47 1697.53 L2557.47 1713.53 L2573.47 1729.53 L2589.47 1713.53 L2573.47 1697.53 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip413)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="330.76,1027.82 555.031,1027.82 555.031,1634.6 779.303,1634.6 779.303,1627.95 1003.57,1627.95 1003.57,1703.99 1227.85,1703.99 1227.85,1702.87 1452.12,1702.87 1452.12,1712.4 1676.39,1712.4 1676.39,1712.23 1900.66,1712.23 1900.66,1713.42 2124.93,1713.42 2124.93,1713.39 2349.2,1713.39 2349.2,1713.54 2573.47,1713.54 2573.47,1713.53 "></polyline>
<path clip-path="url(#clip410)" d="M2280.68 1186.99 L2561.51 1186.99 L2561.51 1031.47 L2280.68 1031.47  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip410)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2280.68,1186.99 2561.51,1186.99 2561.51,1031.47 2280.68,1031.47 2280.68,1186.99 "></polyline>
<polyline clip-path="url(#clip410)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2307.1,1083.31 2465.58,1083.31 "></polyline>
<path clip-path="url(#clip410)" d="M2516.65 1074.67 L2507.28 1087.28 L2517.14 1100.59 L2512.11 1100.59 L2504.57 1090.41 L2497.02 1100.59 L2492 1100.59 L2502.07 1087.03 L2492.85 1074.67 L2497.88 1074.67 L2504.75 1083.9 L2511.63 1074.67 L2516.65 1074.67 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M2522.3 1098.05 L2527.02 1098.05 L2527.02 1083.9 L2521.86 1084.85 L2521.86 1082.17 L2527.18 1081.26 L2530.35 1081.26 L2530.35 1098.05 L2535.1 1098.05 L2535.1 1100.59 L2522.3 1100.59 L2522.3 1098.05 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip410)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2307.1,1135.15 2465.58,1135.15 "></polyline>
<path clip-path="url(#clip410)" d="M2516.65 1126.51 L2507.28 1139.12 L2517.14 1152.43 L2512.11 1152.43 L2504.57 1142.25 L2497.02 1152.43 L2492 1152.43 L2502.07 1138.87 L2492.85 1126.51 L2497.88 1126.51 L2504.75 1135.74 L2511.63 1126.51 L2516.65 1126.51 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip410)" d="M2524.89 1149.79 L2534.71 1149.79 L2534.71 1152.43 L2520.86 1152.43 L2520.86 1149.89 Q2521.65 1149.17 2523.11 1147.87 Q2531.07 1140.81 2531.07 1138.64 Q2531.07 1137.11 2529.87 1136.18 Q2528.66 1135.23 2526.7 1135.23 Q2525.49 1135.23 2524.08 1135.65 Q2522.67 1136.04 2521 1136.85 L2521 1134.01 Q2522.78 1133.36 2524.31 1133.04 Q2525.86 1132.71 2527.18 1132.71 Q2530.54 1132.71 2532.55 1134.24 Q2534.57 1135.77 2534.57 1138.27 Q2534.57 1141.48 2526.9 1148.06 Q2525.61 1149.17 2524.89 1149.79 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path></svg>
</div>
</div>
</div>
<section id="adding-constraints-on-controls-and-states" class="level3">
<h3 class="anchored" data-anchor-id="adding-constraints-on-controls-and-states">Adding constraints on controls and states</h3>
<p>When solving a realistic optimal control problem, we may want to impose inequality constraints on <span class="math inline">\bm u_k</span> due to saturation of actuators. We may also want to add constraints on <span class="math inline">\bm x_k</span> as well, which may reflect some performance specifications. In both cases, we would arrive at the full KKT conditions, and rather than trying to solve these, we resort to some finetuned numerical solver for quadratic programming (QP) instead.</p>
</section>
</section>
<section id="sequential-dense-formulation" class="level2">
<h2 class="anchored" data-anchor-id="sequential-dense-formulation">Sequential (dense) formulation</h2>
<p>We can express <span class="math inline">\bar{\bm x}</span> as a function of <span class="math inline">\bar{\bm u}</span> and <span class="math inline">\mathbf x_0</span>. This can be done in a straightforward way using (<a href="#eq-linear_system_linear_constraints_matrix_format" class="quarto-xref">Eq.&nbsp;1</a>), namely, <span class="math display">
\bar{\bm x} = (\mathbf I-\overline{\mathbf A})^{-1}\overline{\mathbf B} \bm u + (\mathbf I-\overline{\mathbf A})^{-1} \overline{\mathbf A}_0 \mathbf x_0.
</span></p>
<p>However, instead of solving the sets of equations, we can do this substitution in a more insightful way. Write down the state equation for several discrete times <span class="math display">
\begin{aligned}
\bm x_1 &amp;= \mathbf A\mathbf x_0 + \mathbf B\bm u_0\\
\bm x_2 &amp;= \mathbf A\mathbf x_0 + \mathbf B\bm u_0\\
     &amp;= \mathbf A(\mathbf A\mathbf x_0 + \mathbf B\bm u_0)+ \mathbf B\bm u_0\\
     &amp;= \mathbf A^2\mathbf x_0 + \mathbf A\mathbf B\bm u_0 + \mathbf B\bm u_0\\
     &amp;\vdots\\
\bm x_k &amp;= \mathbf A^k\mathbf x_0 + \mathbf A^{k-1}\mathbf B\bm u_0 +\mathbf A^{k-2}\mathbf B\bm u_1 +\ldots \mathbf B\bm u_{k-1}.
\end{aligned}
</span></p>
<p>Rewriting into matrix-vector form (and extending the time <span class="math inline">k</span> up to the final time <span class="math inline">N</span>) <span class="math display">
\begin{bmatrix}
\bm x_1\\\bm x_2\\\vdots\\\bm x_N
\end{bmatrix}
=
\underbrace{
\begin{bmatrix}
  \mathbf B &amp; &amp; &amp; \\
  \mathbf A\mathbf B &amp; \mathbf B &amp; &amp; \\
  \vdots &amp; &amp; \ddots &amp;\\
  \mathbf A^{N-1}\mathbf B &amp; \mathbf A^{N-2}\mathbf B &amp; &amp; \mathbf B
\end{bmatrix}}_{\widehat{\mathbf C}}
  \begin{bmatrix}
\bm u_0\\\bm u_1\\\vdots\\\bm u_{N-1}
\end{bmatrix}
+
\underbrace{
  \begin{bmatrix}
\mathbf A\\\mathbf A^2\\\vdots\\\mathbf A^N
\end{bmatrix}}_{\widehat{\mathbf A}}\mathbf x_0.
</span></p>
<p>For convenience, let’s rewrite the compact relation between <span class="math inline">\bar{\bm x}</span> and <span class="math inline">\bar{\bm u}</span> and <span class="math inline">\mathbf x_0</span> <span id="eq-x_as_function_of_u_and_x0"><span class="math display">
\bar{\bm x} = \widehat{\mathbf C} \bar{\bm u} + \widehat{\mathbf A} \mathbf x_0.
\tag{2}</span></span></p>
<p>We can now substitute this into the original cost, which then becomes independent of <span class="math inline">\bar{\bm x}</span>, which we reflect formally by using a new name <span class="math inline">\tilde J</span> <span class="math display">
\begin{aligned}
\tilde J(\bar{\bm u};\mathbf x_0) &amp;= \frac{1}{2}(\widehat{\mathbf C} \bar{\bm u} + \widehat{\mathbf A} \mathbf x_0)^\top\overline{\mathbf Q} (\widehat{\mathbf C} \bar{\bm u} + \widehat{\mathbf A} \mathbf x_0) + \frac{1}{2}\bar{\bm u}^\top\overline{\mathbf R} \bar{\bm u} + \frac{1}{2}\mathbf x_0^\top\mathbf Q\mathbf x_0\\
&amp;= \frac{1}{2}\bar{\bm u}^\top\widehat{\mathbf C}^\top \overline{\mathbf Q} \widehat{\mathbf C} \bar{\bm u} + \mathbf x_0^\top\widehat{\mathbf A}^\top \overline{\mathbf Q} \widehat{\mathbf C} \bar{\bm u} + \frac{1}{2} \mathbf x_0^\top\widehat{\mathbf A}^\top \overline{\mathbf Q} \widehat{\mathbf A} \mathbf x_0 + \frac{1}{2}\bar{\bm u}^\top\overline{\mathbf R} \bar{\bm u} + \frac{1}{2}\mathbf x_0^\top\mathbf Q\mathbf x_0\\
&amp;= \frac{1}{2}\bar{\bm u}^\top(\widehat{\mathbf C}^\top \overline{\mathbf Q} \widehat{\mathbf C} + \overline{\mathbf R})\bar{\bm u} + \mathbf x_0^\top\widehat{\mathbf A}^\top \overline{\mathbf Q} \widehat{\mathbf C} \bar{\bm u} + \frac{1}{2} \mathbf x_0^\top(\widehat{\mathbf A}^\top \overline{\mathbf Q} \widehat{\mathbf A} + \mathbf Q)\mathbf x_0.
\end{aligned}
</span></p>
<p>The last term (the one independent of <span class="math inline">\bar{\bm u}</span>) does not have an impact on the optimal <span class="math inline">\bar{\bm u}</span> and therefore it can be discarded, but such minor modification perhaps does not justify a new name for the cost function. We write it as <span class="math display">
\tilde J(\bar{\bm u};\mathbf x_0) = \frac{1}{2}\bar{\bm u}^\top\underbrace{(\widehat{\mathbf C}^\top \overline{\mathbf Q} \widehat{\mathbf C} + \overline{\mathbf R})}_{\mathbf H}\bar{\bm u} +  \mathbf x_0^\top\underbrace{\widehat{\mathbf A}^\top \overline{\mathbf Q} \widehat{\mathbf C}}_{\mathbf F^\top} \bar{\bm u}.
</span></p>
<p>This cost is a function of <span class="math inline">\bar{\bm u}</span>, the initial state <span class="math inline">\mathbf x_0</span> is regarded as a fixed parameter. Its gradient is <span class="math display">
\nabla \tilde J = \mathbf H\bar{\bm u}+\mathbf F\mathbf x_0.
</span></p>
<p>Setting it to zero leads to the following linear system of equations <span class="math display">
\mathbf H\bar{\bm u}=-\mathbf F\mathbf x_0
</span> that needs to be solved for <span class="math inline">\bar{\bm u}</span>. Formally, we write the solution as <span class="math display">
\bar{\bm u} = -\mathbf H^{-1} \mathbf F \mathbf x_0.
</span></p>
<div id="exm-direct-sequential" class="theorem example">
<p><span class="theorem-title"><strong>Example 2 (Reformulating the unconstrained LQR problem as a system of linear equations – sequential approach)</strong></span> &nbsp;</p>
<div id="4" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">direct_dlqr_sequential</span>(A,B,x₀,Q,R,S,N)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="fu">size</span>(A)[<span class="fl">1</span>]</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    m <span class="op">=</span> <span class="fu">size</span>(B)[<span class="fl">2</span>]</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    Q̄ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>n,N<span class="op">*</span>n),<span class="fu">repeat</span>([n],N),<span class="fu">repeat</span>([n],N))</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>(N<span class="op">-</span><span class="fl">1</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>        Q̄[<span class="fu">Block</span>(i,i)] <span class="op">=</span> Q</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    Q̄[<span class="fu">Block</span>(N,N)] <span class="op">=</span> S</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    R̄ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>m,N<span class="op">*</span>m),<span class="fu">repeat</span>([m],N),<span class="fu">repeat</span>([m],N))</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>N</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        R̄[<span class="fu">Block</span>(i,i)] <span class="op">=</span> R</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    Ĉ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>n,N<span class="op">*</span>m),<span class="fu">repeat</span>([n],N),<span class="fu">repeat</span>([m],N))</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    Â <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>n,n),<span class="fu">repeat</span>([n],N),[n])</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>N</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> j <span class="op">=</span> <span class="fl">1</span><span class="op">:</span>i</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>            Ĉ[<span class="fu">Block</span>(i,j)] <span class="op">=</span> A<span class="op">^</span>(i<span class="op">-</span>j)<span class="op">*</span>B</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>            Â[<span class="fu">Block</span>(i,<span class="fl">1</span>)] <span class="op">=</span> A<span class="op">^</span>i</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    H <span class="op">=</span> Ĉ<span class="ch">'*Q̄*Ĉ + R̄</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    H <span class="op">=</span> <span class="fu">Array</span>(H)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    F <span class="op">=</span> Ĉ<span class="ch">'*Q̄*Â</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    F <span class="op">=</span> <span class="fu">Array</span>(F)</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    uopt <span class="op">=</span> <span class="fu">-H\</span>(F<span class="op">*</span>x₀)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    xopt <span class="op">=</span> Ĉ<span class="op">*</span>uopt <span class="op">+</span> Â<span class="op">*</span>x₀</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    xopt <span class="op">=</span> <span class="fu">reshape</span>(xopt,(<span class="fl">2</span>,<span class="op">:</span>))</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> xopt,uopt</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="fl">2</span>               <span class="co"># Number of state variables.</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> <span class="fl">1</span>               <span class="co"># Number of (control) input variables. </span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> <span class="fu">rand</span>(n,n)       <span class="co"># State matrix.</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> <span class="fu">rand</span>(n,m)       <span class="co"># Input coupling matrix.</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>x₀ <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">3.0</span>]     <span class="co"># Initial state.</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="fl">10</span>              <span class="co"># Time horizon.</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">2.0</span>]      </span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">2.0</span>]</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> [<span class="fl">1.0</span>]</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>S <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>s)     <span class="co"># Matrix defining the terminal state cost.</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>Q <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>q)     <span class="co"># Matrix defining the running state dost.</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>R <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>r)     <span class="co"># Matrix defining the cost of control.</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>xopt,uopt <span class="op">=</span> <span class="fu">direct_dlqr_sequential</span>(A,B,x₀,Q,R,S,N)</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Plots</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>p1 <span class="op">=</span> <span class="fu">plot</span>(<span class="fl">0</span><span class="op">:</span>(N<span class="op">-</span><span class="fl">1</span>),uopt,marker<span class="op">=:</span>diamond,label<span class="op">=</span><span class="st">"u"</span>,linetype<span class="op">=:</span>steppost)</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"k"</span>)</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"u"</span>)</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>p2 <span class="op">=</span> <span class="fu">plot</span>(<span class="fl">0</span><span class="op">:</span>N,<span class="fu">hcat</span>(x₀,xopt)<span class="ch">',marker=:diamond,label=["x₁" "x₂"],linetype=:steppost)</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"k"</span>)</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"x"</span>)</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(p1,p2,layout<span class="op">=</span>(<span class="fl">2</span>,<span class="fl">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="1">
<!--?xml version="1.0" encoding="utf-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="672" height="480" viewbox="0 0 2688 1920">
<defs>
  <clippath id="clip470">
    <rect x="0" y="0" width="2688" height="1920"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip470)" d="M0 1920 L2688 1920 L2688 0 L0 0  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip471">
    <rect x="537" y="0" width="1883" height="1883"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip470)" d="M263.478 774.117 L2640.76 774.117 L2640.76 47.2441 L263.478 47.2441  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip472">
    <rect x="263" y="47" width="2378" height="728"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip472)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="330.76,774.117 330.76,47.2441 "></polyline>
<polyline clip-path="url(#clip472)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="829.141,774.117 829.141,47.2441 "></polyline>
<polyline clip-path="url(#clip472)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1327.52,774.117 1327.52,47.2441 "></polyline>
<polyline clip-path="url(#clip472)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1825.9,774.117 1825.9,47.2441 "></polyline>
<polyline clip-path="url(#clip472)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2324.28,774.117 2324.28,47.2441 "></polyline>
<polyline clip-path="url(#clip472)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,680.275 2640.76,680.275 "></polyline>
<polyline clip-path="url(#clip472)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,477.693 2640.76,477.693 "></polyline>
<polyline clip-path="url(#clip472)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,275.111 2640.76,275.111 "></polyline>
<polyline clip-path="url(#clip472)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,72.5295 2640.76,72.5295 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,774.117 2640.76,774.117 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="330.76,774.117 330.76,755.219 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="829.141,774.117 829.141,755.219 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1327.52,774.117 1327.52,755.219 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1825.9,774.117 1825.9,755.219 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2324.28,774.117 2324.28,755.219 "></polyline>
<path clip-path="url(#clip470)" d="M330.76 807.34 Q327.149 807.34 325.32 810.904 Q323.514 814.446 323.514 821.576 Q323.514 828.682 325.32 832.247 Q327.149 835.789 330.76 835.789 Q334.394 835.789 336.2 832.247 Q338.028 828.682 338.028 821.576 Q338.028 814.446 336.2 810.904 Q334.394 807.34 330.76 807.34 M330.76 803.636 Q336.57 803.636 339.625 808.242 Q342.704 812.826 342.704 821.576 Q342.704 830.303 339.625 834.909 Q336.57 839.492 330.76 839.492 Q324.95 839.492 321.871 834.909 Q318.815 830.303 318.815 821.576 Q318.815 812.826 321.871 808.242 Q324.95 803.636 330.76 803.636 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M823.794 834.886 L840.113 834.886 L840.113 838.821 L818.169 838.821 L818.169 834.886 Q820.831 832.131 825.414 827.502 Q830.02 822.849 831.201 821.506 Q833.446 818.983 834.326 817.247 Q835.229 815.488 835.229 813.798 Q835.229 811.043 833.284 809.307 Q831.363 807.571 828.261 807.571 Q826.062 807.571 823.608 808.335 Q821.178 809.099 818.4 810.65 L818.4 805.928 Q821.224 804.793 823.678 804.215 Q826.132 803.636 828.169 803.636 Q833.539 803.636 836.733 806.321 Q839.928 809.006 839.928 813.497 Q839.928 815.627 839.118 817.548 Q838.331 819.446 836.224 822.039 Q835.645 822.71 832.544 825.928 Q829.442 829.122 823.794 834.886 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M1330.53 808.335 L1318.73 826.784 L1330.53 826.784 L1330.53 808.335 M1329.3 804.261 L1335.18 804.261 L1335.18 826.784 L1340.11 826.784 L1340.11 830.673 L1335.18 830.673 L1335.18 838.821 L1330.53 838.821 L1330.53 830.673 L1314.93 830.673 L1314.93 826.159 L1329.3 804.261 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M1826.31 819.678 Q1823.16 819.678 1821.31 821.83 Q1819.48 823.983 1819.48 827.733 Q1819.48 831.46 1821.31 833.636 Q1823.16 835.789 1826.31 835.789 Q1829.46 835.789 1831.28 833.636 Q1833.14 831.46 1833.14 827.733 Q1833.14 823.983 1831.28 821.83 Q1829.46 819.678 1826.31 819.678 M1835.59 805.025 L1835.59 809.284 Q1833.83 808.451 1832.03 808.011 Q1830.24 807.571 1828.48 807.571 Q1823.85 807.571 1821.4 810.696 Q1818.97 813.821 1818.62 820.141 Q1819.99 818.127 1822.05 817.062 Q1824.11 815.974 1826.59 815.974 Q1831.79 815.974 1834.8 819.145 Q1837.84 822.293 1837.84 827.733 Q1837.84 833.057 1834.69 836.275 Q1831.54 839.492 1826.31 839.492 Q1820.31 839.492 1817.14 834.909 Q1813.97 830.303 1813.97 821.576 Q1813.97 813.381 1817.86 808.52 Q1821.75 803.636 1828.3 803.636 Q1830.06 803.636 1831.84 803.983 Q1833.65 804.33 1835.59 805.025 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M2324.28 822.409 Q2320.95 822.409 2319.03 824.191 Q2317.13 825.974 2317.13 829.099 Q2317.13 832.224 2319.03 834.006 Q2320.95 835.789 2324.28 835.789 Q2327.62 835.789 2329.54 834.006 Q2331.46 832.201 2331.46 829.099 Q2331.46 825.974 2329.54 824.191 Q2327.64 822.409 2324.28 822.409 M2319.61 820.418 Q2316.6 819.678 2314.91 817.617 Q2313.24 815.557 2313.24 812.594 Q2313.24 808.451 2316.18 806.043 Q2319.15 803.636 2324.28 803.636 Q2329.45 803.636 2332.39 806.043 Q2335.33 808.451 2335.33 812.594 Q2335.33 815.557 2333.64 817.617 Q2331.97 819.678 2328.98 820.418 Q2332.36 821.205 2334.24 823.497 Q2336.14 825.789 2336.14 829.099 Q2336.14 834.122 2333.06 836.807 Q2330 839.492 2324.28 839.492 Q2318.57 839.492 2315.49 836.807 Q2312.43 834.122 2312.43 829.099 Q2312.43 825.789 2314.33 823.497 Q2316.23 821.205 2319.61 820.418 M2317.9 813.034 Q2317.9 815.719 2319.56 817.224 Q2321.25 818.729 2324.28 818.729 Q2327.29 818.729 2328.98 817.224 Q2330.7 815.719 2330.7 813.034 Q2330.7 810.349 2328.98 808.844 Q2327.29 807.34 2324.28 807.34 Q2321.25 807.34 2319.56 808.844 Q2317.9 810.349 2317.9 813.034 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M1436.3 873.776 L1442.19 873.776 L1442.19 903.026 L1459.66 887.653 L1467.14 887.653 L1448.23 904.331 L1467.94 923.301 L1460.3 923.301 L1442.19 905.891 L1442.19 923.301 L1436.3 923.301 L1436.3 873.776 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,774.117 263.478,47.2441 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,680.275 282.376,680.275 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,477.693 282.376,477.693 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,275.111 282.376,275.111 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,72.5295 282.376,72.5295 "></polyline>
<path clip-path="url(#clip470)" d="M117.21 680.726 L146.886 680.726 L146.886 684.661 L117.21 684.661 L117.21 680.726 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M157.788 693.62 L165.427 693.62 L165.427 667.254 L157.117 668.921 L157.117 664.661 L165.381 662.995 L170.057 662.995 L170.057 693.62 L177.696 693.62 L177.696 697.555 L157.788 697.555 L157.788 693.62 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M187.14 691.675 L192.024 691.675 L192.024 697.555 L187.14 697.555 L187.14 691.675 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M202.256 662.995 L220.612 662.995 L220.612 666.93 L206.538 666.93 L206.538 675.402 Q207.557 675.055 208.575 674.893 Q209.594 674.708 210.612 674.708 Q216.399 674.708 219.779 677.879 Q223.158 681.05 223.158 686.467 Q223.158 692.046 219.686 695.147 Q216.214 698.226 209.894 698.226 Q207.719 698.226 205.45 697.856 Q203.205 697.485 200.797 696.745 L200.797 692.046 Q202.881 693.18 205.103 693.735 Q207.325 694.291 209.802 694.291 Q213.807 694.291 216.144 692.184 Q218.482 690.078 218.482 686.467 Q218.482 682.856 216.144 680.749 Q213.807 678.643 209.802 678.643 Q207.927 678.643 206.052 679.06 Q204.2 679.476 202.256 680.356 L202.256 662.995 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M116.214 478.144 L145.89 478.144 L145.89 482.08 L116.214 482.08 L116.214 478.144 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M156.793 491.038 L164.432 491.038 L164.432 464.672 L156.122 466.339 L156.122 462.08 L164.385 460.413 L169.061 460.413 L169.061 491.038 L176.7 491.038 L176.7 494.973 L156.793 494.973 L156.793 491.038 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M186.145 489.093 L191.029 489.093 L191.029 494.973 L186.145 494.973 L186.145 489.093 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M211.214 463.492 Q207.603 463.492 205.774 467.057 Q203.969 470.598 203.969 477.728 Q203.969 484.834 205.774 488.399 Q207.603 491.941 211.214 491.941 Q214.848 491.941 216.654 488.399 Q218.482 484.834 218.482 477.728 Q218.482 470.598 216.654 467.057 Q214.848 463.492 211.214 463.492 M211.214 459.788 Q217.024 459.788 220.08 464.395 Q223.158 468.978 223.158 477.728 Q223.158 486.455 220.08 491.061 Q217.024 495.644 211.214 495.644 Q205.404 495.644 202.325 491.061 Q199.27 486.455 199.27 477.728 Q199.27 468.978 202.325 464.395 Q205.404 459.788 211.214 459.788 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M117.21 275.563 L146.886 275.563 L146.886 279.498 L117.21 279.498 L117.21 275.563 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M166.978 260.91 Q163.367 260.91 161.538 264.475 Q159.733 268.016 159.733 275.146 Q159.733 282.252 161.538 285.817 Q163.367 289.359 166.978 289.359 Q170.612 289.359 172.418 285.817 Q174.247 282.252 174.247 275.146 Q174.247 268.016 172.418 264.475 Q170.612 260.91 166.978 260.91 M166.978 257.206 Q172.788 257.206 175.844 261.813 Q178.922 266.396 178.922 275.146 Q178.922 283.873 175.844 288.479 Q172.788 293.063 166.978 293.063 Q161.168 293.063 158.089 288.479 Q155.034 283.873 155.034 275.146 Q155.034 266.396 158.089 261.813 Q161.168 257.206 166.978 257.206 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M187.14 286.512 L192.024 286.512 L192.024 292.391 L187.14 292.391 L187.14 286.512 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M202.256 257.831 L220.612 257.831 L220.612 261.766 L206.538 261.766 L206.538 270.239 Q207.557 269.891 208.575 269.729 Q209.594 269.544 210.612 269.544 Q216.399 269.544 219.779 272.715 Q223.158 275.887 223.158 281.303 Q223.158 286.882 219.686 289.984 Q216.214 293.063 209.894 293.063 Q207.719 293.063 205.45 292.692 Q203.205 292.322 200.797 291.581 L200.797 286.882 Q202.881 288.016 205.103 288.572 Q207.325 289.127 209.802 289.127 Q213.807 289.127 216.144 287.021 Q218.482 284.914 218.482 281.303 Q218.482 277.692 216.144 275.586 Q213.807 273.479 209.802 273.479 Q207.927 273.479 206.052 273.896 Q204.2 274.313 202.256 275.192 L202.256 257.831 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M165.983 58.3282 Q162.372 58.3282 160.543 61.893 Q158.737 65.4346 158.737 72.5642 Q158.737 79.6707 160.543 83.2355 Q162.372 86.7771 165.983 86.7771 Q169.617 86.7771 171.422 83.2355 Q173.251 79.6707 173.251 72.5642 Q173.251 65.4346 171.422 61.893 Q169.617 58.3282 165.983 58.3282 M165.983 54.6245 Q171.793 54.6245 174.848 59.2309 Q177.927 63.8143 177.927 72.5642 Q177.927 81.291 174.848 85.8975 Q171.793 90.4808 165.983 90.4808 Q160.173 90.4808 157.094 85.8975 Q154.038 81.291 154.038 72.5642 Q154.038 63.8143 157.094 59.2309 Q160.173 54.6245 165.983 54.6245 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M186.145 83.9299 L191.029 83.9299 L191.029 89.8095 L186.145 89.8095 L186.145 83.9299 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M211.214 58.3282 Q207.603 58.3282 205.774 61.893 Q203.969 65.4346 203.969 72.5642 Q203.969 79.6707 205.774 83.2355 Q207.603 86.7771 211.214 86.7771 Q214.848 86.7771 216.654 83.2355 Q218.482 79.6707 218.482 72.5642 Q218.482 65.4346 216.654 61.893 Q214.848 58.3282 211.214 58.3282 M211.214 54.6245 Q217.024 54.6245 220.08 59.2309 Q223.158 63.8143 223.158 72.5642 Q223.158 81.291 220.08 85.8975 Q217.024 90.4808 211.214 90.4808 Q205.404 90.4808 202.325 85.8975 Q199.27 81.291 199.27 72.5642 Q199.27 63.8143 202.325 59.2309 Q205.404 54.6245 211.214 54.6245 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M47.5702 425.608 L25.9905 425.608 L25.9905 419.752 L47.3474 419.752 Q52.4082 419.752 54.9545 417.778 Q57.4689 415.805 57.4689 411.858 Q57.4689 407.116 54.4452 404.378 Q51.4215 401.609 46.2016 401.609 L25.9905 401.609 L25.9905 395.753 L61.6384 395.753 L61.6384 401.609 L56.1639 401.609 Q59.4104 403.742 61.0019 406.575 Q62.5615 409.376 62.5615 413.1 Q62.5615 419.242 58.742 422.425 Q54.9226 425.608 47.5702 425.608 M25.1311 410.872 L25.1311 410.872 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip472)" d="M330.76 737.545 L314.76 753.545 L330.76 769.545 L346.76 753.545 L330.76 737.545 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip472)" d="M579.95 182.998 L563.95 198.998 L579.95 214.998 L595.95 198.998 L579.95 182.998 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip472)" d="M829.141 68.4728 L813.141 84.4728 L829.141 100.473 L845.141 84.4728 L829.141 68.4728 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip472)" d="M1078.33 51.816 L1062.33 67.816 L1078.33 83.816 L1094.33 67.816 L1078.33 51.816 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip472)" d="M1327.52 52.5765 L1311.52 68.5765 L1327.52 84.5765 L1343.52 68.5765 L1327.52 52.5765 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip472)" d="M1576.71 54.5986 L1560.71 70.5986 L1576.71 86.5986 L1592.71 70.5986 L1576.71 54.5986 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip472)" d="M1825.9 55.7415 L1809.9 71.7415 L1825.9 87.7415 L1841.9 71.7415 L1825.9 55.7415 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip472)" d="M2075.09 56.2379 L2059.09 72.2379 L2075.09 88.2379 L2091.09 72.2379 L2075.09 56.2379 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip472)" d="M2324.28 56.4292 L2308.28 72.4292 L2324.28 88.4292 L2340.28 72.4292 L2324.28 56.4292 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip472)" d="M2573.47 56.4991 L2557.47 72.4991 L2573.47 88.4991 L2589.47 72.4991 L2573.47 56.4991 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip472)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="330.76,753.545 579.95,753.545 579.95,198.998 829.141,198.998 829.141,84.4728 1078.33,84.4728 1078.33,67.816 1327.52,67.816 1327.52,68.5765 1576.71,68.5765 1576.71,70.5986 1825.9,70.5986 1825.9,71.7415 2075.09,71.7415 2075.09,72.2379 2324.28,72.2379 2324.28,72.4292 2573.47,72.4292 2573.47,72.4991 "></polyline>
<path clip-path="url(#clip470)" d="M2302.07 749.888 L2561.51 749.888 L2561.51 646.208 L2302.07 646.208  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2302.07,749.888 2561.51,749.888 2561.51,646.208 2302.07,646.208 2302.07,749.888 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2328.49,698.048 2486.97,698.048 "></polyline>
<path clip-path="url(#clip470)" d="M2513.39 705.096 L2513.39 689.402 L2517.65 689.402 L2517.65 704.934 Q2517.65 708.615 2519.08 710.467 Q2520.52 712.295 2523.39 712.295 Q2526.84 712.295 2528.83 710.096 Q2530.84 707.897 2530.84 704.101 L2530.84 689.402 L2535.1 689.402 L2535.1 715.328 L2530.84 715.328 L2530.84 711.346 Q2529.29 713.708 2527.23 714.865 Q2525.19 715.999 2522.48 715.999 Q2518.02 715.999 2515.7 713.221 Q2513.39 710.444 2513.39 705.096 M2524.1 688.777 L2524.1 688.777 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M263.478 1734.12 L2640.76 1734.12 L2640.76 1007.24 L263.478 1007.24  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip473">
    <rect x="263" y="1007" width="2378" height="728"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip473)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="330.76,1734.12 330.76,1007.24 "></polyline>
<polyline clip-path="url(#clip473)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="891.438,1734.12 891.438,1007.24 "></polyline>
<polyline clip-path="url(#clip473)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1452.12,1734.12 1452.12,1007.24 "></polyline>
<polyline clip-path="url(#clip473)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2012.8,1734.12 2012.8,1007.24 "></polyline>
<polyline clip-path="url(#clip473)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2573.47,1734.12 2573.47,1007.24 "></polyline>
<polyline clip-path="url(#clip473)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,1698.8 2640.76,1698.8 "></polyline>
<polyline clip-path="url(#clip473)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,1475.14 2640.76,1475.14 "></polyline>
<polyline clip-path="url(#clip473)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,1251.48 2640.76,1251.48 "></polyline>
<polyline clip-path="url(#clip473)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.478,1027.82 2640.76,1027.82 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,1734.12 2640.76,1734.12 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="330.76,1734.12 330.76,1715.22 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="891.438,1734.12 891.438,1715.22 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1452.12,1734.12 1452.12,1715.22 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2012.8,1734.12 2012.8,1715.22 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2573.47,1734.12 2573.47,1715.22 "></polyline>
<path clip-path="url(#clip470)" d="M308.144 1767.34 Q304.533 1767.34 302.704 1770.9 Q300.899 1774.45 300.899 1781.58 Q300.899 1788.68 302.704 1792.25 Q304.533 1795.79 308.144 1795.79 Q311.778 1795.79 313.584 1792.25 Q315.413 1788.68 315.413 1781.58 Q315.413 1774.45 313.584 1770.9 Q311.778 1767.34 308.144 1767.34 M308.144 1763.64 Q313.954 1763.64 317.01 1768.24 Q320.089 1772.83 320.089 1781.58 Q320.089 1790.3 317.01 1794.91 Q313.954 1799.49 308.144 1799.49 Q302.334 1799.49 299.255 1794.91 Q296.2 1790.3 296.2 1781.58 Q296.2 1772.83 299.255 1768.24 Q302.334 1763.64 308.144 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M328.306 1792.94 L333.19 1792.94 L333.19 1798.82 L328.306 1798.82 L328.306 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M353.375 1767.34 Q349.764 1767.34 347.936 1770.9 Q346.13 1774.45 346.13 1781.58 Q346.13 1788.68 347.936 1792.25 Q349.764 1795.79 353.375 1795.79 Q357.01 1795.79 358.815 1792.25 Q360.644 1788.68 360.644 1781.58 Q360.644 1774.45 358.815 1770.9 Q357.01 1767.34 353.375 1767.34 M353.375 1763.64 Q359.186 1763.64 362.241 1768.24 Q365.32 1772.83 365.32 1781.58 Q365.32 1790.3 362.241 1794.91 Q359.186 1799.49 353.375 1799.49 Q347.565 1799.49 344.487 1794.91 Q341.431 1790.3 341.431 1781.58 Q341.431 1772.83 344.487 1768.24 Q347.565 1763.64 353.375 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M863.175 1794.89 L879.494 1794.89 L879.494 1798.82 L857.55 1798.82 L857.55 1794.89 Q860.212 1792.13 864.795 1787.5 Q869.402 1782.85 870.582 1781.51 Q872.827 1778.98 873.707 1777.25 Q874.61 1775.49 874.61 1773.8 Q874.61 1771.04 872.665 1769.31 Q870.744 1767.57 867.642 1767.57 Q865.443 1767.57 862.99 1768.34 Q860.559 1769.1 857.781 1770.65 L857.781 1765.93 Q860.605 1764.79 863.059 1764.21 Q865.513 1763.64 867.55 1763.64 Q872.92 1763.64 876.114 1766.32 Q879.309 1769.01 879.309 1773.5 Q879.309 1775.63 878.499 1777.55 Q877.712 1779.45 875.605 1782.04 Q875.026 1782.71 871.925 1785.93 Q868.823 1789.12 863.175 1794.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M889.309 1792.94 L894.193 1792.94 L894.193 1798.82 L889.309 1798.82 L889.309 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M904.424 1764.26 L922.781 1764.26 L922.781 1768.2 L908.707 1768.2 L908.707 1776.67 Q909.725 1776.32 910.744 1776.16 Q911.762 1775.97 912.781 1775.97 Q918.568 1775.97 921.948 1779.15 Q925.327 1782.32 925.327 1787.73 Q925.327 1793.31 921.855 1796.41 Q918.383 1799.49 912.063 1799.49 Q909.887 1799.49 907.619 1799.12 Q905.374 1798.75 902.966 1798.01 L902.966 1793.31 Q905.049 1794.45 907.272 1795 Q909.494 1795.56 911.971 1795.56 Q915.975 1795.56 918.313 1793.45 Q920.651 1791.34 920.651 1787.73 Q920.651 1784.12 918.313 1782.02 Q915.975 1779.91 911.971 1779.91 Q910.096 1779.91 908.221 1780.33 Q906.369 1780.74 904.424 1781.62 L904.424 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M1419.28 1764.26 L1437.64 1764.26 L1437.64 1768.2 L1423.56 1768.2 L1423.56 1776.67 Q1424.58 1776.32 1425.6 1776.16 Q1426.62 1775.97 1427.64 1775.97 Q1433.43 1775.97 1436.8 1779.15 Q1440.18 1782.32 1440.18 1787.73 Q1440.18 1793.31 1436.71 1796.41 Q1433.24 1799.49 1426.92 1799.49 Q1424.74 1799.49 1422.48 1799.12 Q1420.23 1798.75 1417.82 1798.01 L1417.82 1793.31 Q1419.91 1794.45 1422.13 1795 Q1424.35 1795.56 1426.83 1795.56 Q1430.83 1795.56 1433.17 1793.45 Q1435.51 1791.34 1435.51 1787.73 Q1435.51 1784.12 1433.17 1782.02 Q1430.83 1779.91 1426.83 1779.91 Q1424.95 1779.91 1423.08 1780.33 Q1421.23 1780.74 1419.28 1781.62 L1419.28 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M1449.4 1792.94 L1454.28 1792.94 L1454.28 1798.82 L1449.4 1798.82 L1449.4 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M1474.47 1767.34 Q1470.86 1767.34 1469.03 1770.9 Q1467.22 1774.45 1467.22 1781.58 Q1467.22 1788.68 1469.03 1792.25 Q1470.86 1795.79 1474.47 1795.79 Q1478.1 1795.79 1479.91 1792.25 Q1481.74 1788.68 1481.74 1781.58 Q1481.74 1774.45 1479.91 1770.9 Q1478.1 1767.34 1474.47 1767.34 M1474.47 1763.64 Q1480.28 1763.64 1483.33 1768.24 Q1486.41 1772.83 1486.41 1781.58 Q1486.41 1790.3 1483.33 1794.91 Q1480.28 1799.49 1474.47 1799.49 Q1468.66 1799.49 1465.58 1794.91 Q1462.52 1790.3 1462.52 1781.58 Q1462.52 1772.83 1465.58 1768.24 Q1468.66 1763.64 1474.47 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M1979.12 1764.26 L2001.34 1764.26 L2001.34 1766.25 L1988.79 1798.82 L1983.91 1798.82 L1995.71 1768.2 L1979.12 1768.2 L1979.12 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M2010.46 1792.94 L2015.34 1792.94 L2015.34 1798.82 L2010.46 1798.82 L2010.46 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M2025.57 1764.26 L2043.93 1764.26 L2043.93 1768.2 L2029.86 1768.2 L2029.86 1776.67 Q2030.87 1776.32 2031.89 1776.16 Q2032.91 1775.97 2033.93 1775.97 Q2039.72 1775.97 2043.1 1779.15 Q2046.48 1782.32 2046.48 1787.73 Q2046.48 1793.31 2043 1796.41 Q2039.53 1799.49 2033.21 1799.49 Q2031.04 1799.49 2028.77 1799.12 Q2026.52 1798.75 2024.12 1798.01 L2024.12 1793.31 Q2026.2 1794.45 2028.42 1795 Q2030.64 1795.56 2033.12 1795.56 Q2037.12 1795.56 2039.46 1793.45 Q2041.8 1791.34 2041.8 1787.73 Q2041.8 1784.12 2039.46 1782.02 Q2037.12 1779.91 2033.12 1779.91 Q2031.24 1779.91 2029.37 1780.33 Q2027.52 1780.74 2025.57 1781.62 L2025.57 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M2525.55 1794.89 L2533.19 1794.89 L2533.19 1768.52 L2524.88 1770.19 L2524.88 1765.93 L2533.14 1764.26 L2537.81 1764.26 L2537.81 1794.89 L2545.45 1794.89 L2545.45 1798.82 L2525.55 1798.82 L2525.55 1794.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M2564.9 1767.34 Q2561.29 1767.34 2559.46 1770.9 Q2557.65 1774.45 2557.65 1781.58 Q2557.65 1788.68 2559.46 1792.25 Q2561.29 1795.79 2564.9 1795.79 Q2568.53 1795.79 2570.34 1792.25 Q2572.17 1788.68 2572.17 1781.58 Q2572.17 1774.45 2570.34 1770.9 Q2568.53 1767.34 2564.9 1767.34 M2564.9 1763.64 Q2570.71 1763.64 2573.76 1768.24 Q2576.84 1772.83 2576.84 1781.58 Q2576.84 1790.3 2573.76 1794.91 Q2570.71 1799.49 2564.9 1799.49 Q2559.09 1799.49 2556.01 1794.91 Q2552.95 1790.3 2552.95 1781.58 Q2552.95 1772.83 2556.01 1768.24 Q2559.09 1763.64 2564.9 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M2585.06 1792.94 L2589.94 1792.94 L2589.94 1798.82 L2585.06 1798.82 L2585.06 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M2610.13 1767.34 Q2606.52 1767.34 2604.69 1770.9 Q2602.88 1774.45 2602.88 1781.58 Q2602.88 1788.68 2604.69 1792.25 Q2606.52 1795.79 2610.13 1795.79 Q2613.76 1795.79 2615.57 1792.25 Q2617.4 1788.68 2617.4 1781.58 Q2617.4 1774.45 2615.57 1770.9 Q2613.76 1767.34 2610.13 1767.34 M2610.13 1763.64 Q2615.94 1763.64 2619 1768.24 Q2622.07 1772.83 2622.07 1781.58 Q2622.07 1790.3 2619 1794.91 Q2615.94 1799.49 2610.13 1799.49 Q2604.32 1799.49 2601.24 1794.91 Q2598.18 1790.3 2598.18 1781.58 Q2598.18 1772.83 2601.24 1768.24 Q2604.32 1763.64 2610.13 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M1436.3 1833.78 L1442.19 1833.78 L1442.19 1863.03 L1459.66 1847.65 L1467.14 1847.65 L1448.23 1864.33 L1467.94 1883.3 L1460.3 1883.3 L1442.19 1865.89 L1442.19 1883.3 L1436.3 1883.3 L1436.3 1833.78 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,1734.12 263.478,1007.24 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,1698.8 282.376,1698.8 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,1475.14 282.376,1475.14 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,1251.48 282.376,1251.48 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.478,1027.82 282.376,1027.82 "></polyline>
<path clip-path="url(#clip470)" d="M211.214 1684.59 Q207.603 1684.59 205.774 1688.16 Q203.969 1691.7 203.969 1698.83 Q203.969 1705.94 205.774 1709.5 Q207.603 1713.04 211.214 1713.04 Q214.848 1713.04 216.654 1709.5 Q218.482 1705.94 218.482 1698.83 Q218.482 1691.7 216.654 1688.16 Q214.848 1684.59 211.214 1684.59 M211.214 1680.89 Q217.024 1680.89 220.08 1685.5 Q223.158 1690.08 223.158 1698.83 Q223.158 1707.56 220.08 1712.16 Q217.024 1716.75 211.214 1716.75 Q205.404 1716.75 202.325 1712.16 Q199.27 1707.56 199.27 1698.83 Q199.27 1690.08 202.325 1685.5 Q205.404 1680.89 211.214 1680.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M203.251 1488.48 L210.89 1488.48 L210.89 1462.11 L202.58 1463.78 L202.58 1459.52 L210.844 1457.86 L215.519 1457.86 L215.519 1488.48 L223.158 1488.48 L223.158 1492.42 L203.251 1492.42 L203.251 1488.48 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M206.839 1264.82 L223.158 1264.82 L223.158 1268.76 L201.214 1268.76 L201.214 1264.82 Q203.876 1262.07 208.459 1257.44 Q213.066 1252.78 214.246 1251.44 Q216.492 1248.92 217.371 1247.18 Q218.274 1245.42 218.274 1243.73 Q218.274 1240.98 216.33 1239.24 Q214.408 1237.51 211.307 1237.51 Q209.107 1237.51 206.654 1238.27 Q204.223 1239.03 201.445 1240.58 L201.445 1235.86 Q204.27 1234.73 206.723 1234.15 Q209.177 1233.57 211.214 1233.57 Q216.584 1233.57 219.779 1236.26 Q222.973 1238.94 222.973 1243.43 Q222.973 1245.56 222.163 1247.48 Q221.376 1249.38 219.269 1251.97 Q218.691 1252.64 215.589 1255.86 Q212.487 1259.06 206.839 1264.82 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M216.029 1026.46 Q219.385 1027.18 221.26 1029.45 Q223.158 1031.72 223.158 1035.05 Q223.158 1040.17 219.64 1042.97 Q216.121 1045.77 209.64 1045.77 Q207.464 1045.77 205.149 1045.33 Q202.857 1044.91 200.404 1044.05 L200.404 1039.54 Q202.348 1040.67 204.663 1041.25 Q206.978 1041.83 209.501 1041.83 Q213.899 1041.83 216.191 1040.1 Q218.506 1038.36 218.506 1035.05 Q218.506 1031.99 216.353 1030.28 Q214.223 1028.55 210.404 1028.55 L206.376 1028.55 L206.376 1024.7 L210.589 1024.7 Q214.038 1024.7 215.867 1023.34 Q217.695 1021.95 217.695 1019.36 Q217.695 1016.69 215.797 1015.28 Q213.922 1013.85 210.404 1013.85 Q208.482 1013.85 206.283 1014.26 Q204.084 1014.68 201.445 1015.56 L201.445 1011.39 Q204.107 1010.65 206.422 1010.28 Q208.76 1009.91 210.82 1009.91 Q216.144 1009.91 219.246 1012.34 Q222.348 1014.75 222.348 1018.87 Q222.348 1021.74 220.705 1023.73 Q219.061 1025.7 216.029 1026.46 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M109.046 1354.07 L126.392 1366.96 L144.694 1353.4 L144.694 1360.3 L130.689 1370.68 L144.694 1381.06 L144.694 1387.96 L126.042 1374.12 L109.046 1386.79 L109.046 1379.88 L121.745 1370.43 L109.046 1360.97 L109.046 1354.07 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip473)" d="M330.76 1459.14 L314.76 1475.14 L330.76 1491.14 L346.76 1475.14 L330.76 1459.14 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M555.031 1672.35 L539.031 1688.35 L555.031 1704.35 L571.031 1688.35 L555.031 1672.35 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M779.303 1697.55 L763.303 1713.55 L779.303 1729.55 L795.303 1713.55 L779.303 1697.55 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M1003.57 1692.63 L987.574 1708.63 L1003.57 1724.63 L1019.57 1708.63 L1003.57 1692.63 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M1227.85 1687.32 L1211.85 1703.32 L1227.85 1719.32 L1243.85 1703.32 L1227.85 1687.32 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M1452.12 1684.59 L1436.12 1700.59 L1452.12 1716.59 L1468.12 1700.59 L1452.12 1684.59 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M1676.39 1683.45 L1660.39 1699.45 L1676.39 1715.45 L1692.39 1699.45 L1676.39 1683.45 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M1900.66 1683.02 L1884.66 1699.02 L1900.66 1715.02 L1916.66 1699.02 L1900.66 1683.02 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M2124.93 1682.87 L2108.93 1698.87 L2124.93 1714.87 L2140.93 1698.87 L2124.93 1682.87 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M2349.2 1682.82 L2333.2 1698.82 L2349.2 1714.82 L2365.2 1698.82 L2349.2 1682.82 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M2573.47 1682.8 L2557.47 1698.8 L2573.47 1714.8 L2589.47 1698.8 L2573.47 1682.8 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip473)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="330.76,1475.14 555.031,1475.14 555.031,1688.35 779.303,1688.35 779.303,1713.55 1003.57,1713.55 1003.57,1708.63 1227.85,1708.63 1227.85,1703.32 1452.12,1703.32 1452.12,1700.59 1676.39,1700.59 1676.39,1699.45 1900.66,1699.45 1900.66,1699.02 2124.93,1699.02 2124.93,1698.87 2349.2,1698.87 2349.2,1698.82 2573.47,1698.82 2573.47,1698.8 "></polyline>
<path clip-path="url(#clip473)" d="M330.76 1011.82 L314.76 1027.82 L330.76 1043.82 L346.76 1027.82 L330.76 1011.82 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M555.031 1504.47 L539.031 1520.47 L555.031 1536.47 L571.031 1520.47 L555.031 1504.47 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M779.303 1638.77 L763.303 1654.77 L779.303 1670.77 L795.303 1654.77 L779.303 1638.77 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M1003.57 1673.12 L987.574 1689.12 L1003.57 1705.12 L1019.57 1689.12 L1003.57 1673.12 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M1227.85 1681.12 L1211.85 1697.12 L1227.85 1713.12 L1243.85 1697.12 L1227.85 1681.12 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M1452.12 1682.7 L1436.12 1698.7 L1452.12 1714.7 L1468.12 1698.7 L1452.12 1682.7 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M1676.39 1682.9 L1660.39 1698.9 L1676.39 1714.9 L1692.39 1698.9 L1676.39 1682.9 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M1900.66 1682.86 L1884.66 1698.86 L1900.66 1714.86 L1916.66 1698.86 L1900.66 1682.86 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M2124.93 1682.83 L2108.93 1698.83 L2124.93 1714.83 L2140.93 1698.83 L2124.93 1682.83 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M2349.2 1682.81 L2333.2 1698.81 L2349.2 1714.81 L2365.2 1698.81 L2349.2 1682.81 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip473)" d="M2573.47 1682.8 L2557.47 1698.8 L2573.47 1714.8 L2589.47 1698.8 L2573.47 1682.8 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip473)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="330.76,1027.82 555.031,1027.82 555.031,1520.47 779.303,1520.47 779.303,1654.77 1003.57,1654.77 1003.57,1689.12 1227.85,1689.12 1227.85,1697.12 1452.12,1697.12 1452.12,1698.7 1676.39,1698.7 1676.39,1698.9 1900.66,1698.9 1900.66,1698.86 2124.93,1698.86 2124.93,1698.83 2349.2,1698.83 2349.2,1698.81 2573.47,1698.81 2573.47,1698.8 "></polyline>
<path clip-path="url(#clip470)" d="M2280.68 1186.99 L2561.51 1186.99 L2561.51 1031.47 L2280.68 1031.47  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip470)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2280.68,1186.99 2561.51,1186.99 2561.51,1031.47 2280.68,1031.47 2280.68,1186.99 "></polyline>
<polyline clip-path="url(#clip470)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2307.1,1083.31 2465.58,1083.31 "></polyline>
<path clip-path="url(#clip470)" d="M2516.65 1074.67 L2507.28 1087.28 L2517.14 1100.59 L2512.11 1100.59 L2504.57 1090.41 L2497.02 1100.59 L2492 1100.59 L2502.07 1087.03 L2492.85 1074.67 L2497.88 1074.67 L2504.75 1083.9 L2511.63 1074.67 L2516.65 1074.67 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M2522.3 1098.05 L2527.02 1098.05 L2527.02 1083.9 L2521.86 1084.85 L2521.86 1082.17 L2527.18 1081.26 L2530.35 1081.26 L2530.35 1098.05 L2535.1 1098.05 L2535.1 1100.59 L2522.3 1100.59 L2522.3 1098.05 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip470)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2307.1,1135.15 2465.58,1135.15 "></polyline>
<path clip-path="url(#clip470)" d="M2516.65 1126.51 L2507.28 1139.12 L2517.14 1152.43 L2512.11 1152.43 L2504.57 1142.25 L2497.02 1152.43 L2492 1152.43 L2502.07 1138.87 L2492.85 1126.51 L2497.88 1126.51 L2504.75 1135.74 L2511.63 1126.51 L2516.65 1126.51 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip470)" d="M2524.89 1149.79 L2534.71 1149.79 L2534.71 1152.43 L2520.86 1152.43 L2520.86 1149.89 Q2521.65 1149.17 2523.11 1147.87 Q2531.07 1140.81 2531.07 1138.64 Q2531.07 1137.11 2529.87 1136.18 Q2528.66 1135.23 2526.7 1135.23 Q2525.49 1135.23 2524.08 1135.65 Q2522.67 1136.04 2521 1136.85 L2521 1134.01 Q2522.78 1133.36 2524.31 1133.04 Q2525.86 1132.71 2527.18 1132.71 Q2530.54 1132.71 2532.55 1134.24 Q2534.57 1135.77 2534.57 1138.27 Q2534.57 1141.48 2526.9 1148.06 Q2525.61 1149.17 2524.89 1149.79 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path></svg>
</div>
</div>
</div>
<section id="adding-the-constraints-on-controls" class="level3">
<h3 class="anchored" data-anchor-id="adding-the-constraints-on-controls">Adding the constraints on controls</h3>
<p>Adding constraints on <span class="math inline">\bar{\bm u}</span> is straightforward. It is just that instead of a linear system we will have a linear system with additional inequality constraints. Let’s get one <span class="math display">
\begin{aligned}
\operatorname*{minimize}_{\bar{\bm u}} &amp; \quad \frac{1}{2}\bar{\bm u}^T \mathbf H \bar{\bm u} + \mathbf x_0^T\mathbf F^T \bar{\bm u}\\
\text{subject to} &amp;\quad \bar{\bm u} \leq \bar{\mathbf u}^\mathrm{max}\\
               &amp;\quad \bar{\bm u} \geq \bar{\mathbf u}^\mathrm{min},
\end{aligned}
</span> which we can rewrite more explicitly (in the matrix-vector format) as <span class="math display">
\begin{aligned}
\operatorname*{minimize}_{\bar{\bm u}} &amp; \quad \frac{1}{2}\bar{\bm u}^T \mathbf H \bar{\bm u} + \mathbf x_0^T\mathbf F^T \bar{\bm u}\\
\text{subject to} &amp; \begin{bmatrix}
                  \mathbf{I}  &amp;    &amp;         &amp;    \\
                    &amp; \mathbf{I}  &amp;         &amp;    \\
                    &amp;    &amp; \ddots  &amp;    \\
                    &amp;    &amp;         &amp;  \mathbf{I} \\
                    -\mathbf{I}   &amp;   &amp;     &amp;    \\
                    &amp; -\mathbf{I} &amp;         &amp;    \\
                    &amp;    &amp; \ddots  &amp;    \\
                    &amp;    &amp;         &amp;  -\mathbf{I}
                 \end{bmatrix}
                 \begin{bmatrix}
                  \bm u_0 \\ \bm u_1 \\ \vdots \\ \bm u_{N-1}
                 \end{bmatrix}
                 \leq
                 \begin{bmatrix}
                  \mathbf u^\mathbf{max} \\ \mathbf u^\mathrm{max} \\ \vdots \\ \mathbf u^\mathrm{max}\\ -\mathbf u^\mathrm{min} \\ -\mathbf u^\mathrm{min} \\ \vdots \\ -\mathbf u^\mathrm{min}
                 \end{bmatrix}.
\end{aligned}
</span></p>
<div id="exm-direct-sequential-constrained-u" class="theorem example">
<p><span class="theorem-title"><strong>Example 3 (Reformulating the LQR problem with constraints on control as a quadratic program – sequential approach)</strong></span> &nbsp;</p>
<div id="6" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Convex</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">SCS</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">direct_dlqr_sequential</span>(A,B,x₀,Q,R,S,N,(umin,umax))</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="fu">size</span>(A)[<span class="fl">1</span>]</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    m <span class="op">=</span> <span class="fu">size</span>(B)[<span class="fl">2</span>]</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    Q̄ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>n,N<span class="op">*</span>n),<span class="fu">repeat</span>([n],N),<span class="fu">repeat</span>([n],N))</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>(N<span class="op">-</span><span class="fl">1</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        Q̄[<span class="fu">Block</span>(i,i)] <span class="op">=</span> Q</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    Q̄[<span class="fu">Block</span>(N,N)] <span class="op">=</span> S</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    R̄ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>m,N<span class="op">*</span>m),<span class="fu">repeat</span>([m],N),<span class="fu">repeat</span>([m],N))</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>N</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        R̄[<span class="fu">Block</span>(i,i)] <span class="op">=</span> R</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    Ĉ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>n,N<span class="op">*</span>m),<span class="fu">repeat</span>([n],N),<span class="fu">repeat</span>([m],N))</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    Â <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>n,n),<span class="fu">repeat</span>([n],N),[n])</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>N</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> j <span class="op">=</span> <span class="fl">1</span><span class="op">:</span>i</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>            Ĉ[<span class="fu">Block</span>(i,j)] <span class="op">=</span> A<span class="op">^</span>(i<span class="op">-</span>j)<span class="op">*</span>B</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>            Â[<span class="fu">Block</span>(i,<span class="fl">1</span>)] <span class="op">=</span> A<span class="op">^</span>i</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    H <span class="op">=</span> Ĉ<span class="ch">'*Q̄*Ĉ + R̄</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    H <span class="op">=</span> <span class="fu">Array</span>(H)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    F <span class="op">=</span> Ĉ<span class="ch">'*Q̄*Â</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    F <span class="op">=</span> <span class="fu">Array</span>(F)</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    u <span class="op">=</span> <span class="fu">Variable</span>(N<span class="op">*</span>m)</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    problem <span class="op">=</span> <span class="fu">minimize</span>(<span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="fu">*quadform</span>(u,H) <span class="op">+</span> <span class="fu">dot</span>(F<span class="op">*</span>x₀,u))</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    problem.constraints <span class="op">=</span> [u <span class="op">&gt;=</span> umin, u <span class="op">&lt;=</span> umax]</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    Convex.<span class="fu">solve!</span>(problem, SCS.Optimizer; silent <span class="op">=</span> <span class="cn">true</span>)</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>    xopt <span class="op">=</span> Ĉ<span class="op">*</span>u.value <span class="op">+</span> Â<span class="op">*</span>x₀</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>    xopt <span class="op">=</span> <span class="fu">reshape</span>(xopt,(<span class="fl">2</span>,<span class="op">:</span>))</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>    uopt <span class="op">=</span> u.value</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> xopt,uopt</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="fl">2</span>               <span class="co"># Number of state variables.</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> <span class="fl">1</span>               <span class="co"># Number of (control) input variables. </span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> <span class="fu">rand</span>(n,n)       <span class="co"># State matrix.</span></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> <span class="fu">rand</span>(n,m)       <span class="co"># Input coupling matrix.</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>x₀ <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">3.0</span>]     <span class="co"># Initial state.</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="fl">10</span>              <span class="co"># Time horizon.</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">2.0</span>]      </span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">2.0</span>]</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> [<span class="fl">1.0</span>]</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>S <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>s)     <span class="co"># Matrix defining the terminal state cost.</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>Q <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>q)     <span class="co"># Matrix defining the running state dost.</span></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>R <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>r)     <span class="co"># Matrix defining the cost of control.</span></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>umin <span class="op">=</span> <span class="op">-</span><span class="fl">1.0</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>umax <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>xopt,uopt <span class="op">=</span> <span class="fu">direct_dlqr_sequential</span>(A,B,x₀,Q,R,S,N,(umin,umax))</span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Plots</span></span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>p1 <span class="op">=</span> <span class="fu">plot</span>(<span class="fl">0</span><span class="op">:</span>(N<span class="op">-</span><span class="fl">1</span>),uopt,marker<span class="op">=:</span>diamond,label<span class="op">=</span><span class="st">"u"</span>,linetype<span class="op">=:</span>steppost)</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"k"</span>)</span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"u"</span>)</span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>p2 <span class="op">=</span> <span class="fu">plot</span>(<span class="fl">0</span><span class="op">:</span>N,<span class="fu">hcat</span>(x₀,xopt)<span class="ch">',marker=:diamond,label=["x₁" "x₂"],linetype=:steppost)</span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"k"</span>)</span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"x"</span>)</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(p1,p2,layout<span class="op">=</span>(<span class="fl">2</span>,<span class="fl">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="1">
<!--?xml version="1.0" encoding="utf-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="672" height="480" viewbox="0 0 2688 1920">
<defs>
  <clippath id="clip530">
    <rect x="0" y="0" width="2688" height="1920"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip530)" d="M0 1920 L2688 1920 L2688 0 L0 0  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip531">
    <rect x="537" y="0" width="1883" height="1883"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip530)" d="M384.126 774.117 L2640.76 774.117 L2640.76 47.2441 L384.126 47.2441  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip532">
    <rect x="384" y="47" width="2258" height="728"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip532)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="447.993,774.117 447.993,47.2441 "></polyline>
<polyline clip-path="url(#clip532)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="921.081,774.117 921.081,47.2441 "></polyline>
<polyline clip-path="url(#clip532)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1394.17,774.117 1394.17,47.2441 "></polyline>
<polyline clip-path="url(#clip532)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1867.26,774.117 1867.26,47.2441 "></polyline>
<polyline clip-path="url(#clip532)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2340.34,774.117 2340.34,47.2441 "></polyline>
<polyline clip-path="url(#clip532)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="384.126,644.678 2640.76,644.678 "></polyline>
<polyline clip-path="url(#clip532)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="384.126,488.806 2640.76,488.806 "></polyline>
<polyline clip-path="url(#clip532)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="384.126,332.935 2640.76,332.935 "></polyline>
<polyline clip-path="url(#clip532)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="384.126,177.063 2640.76,177.063 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="384.126,774.117 2640.76,774.117 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="447.993,774.117 447.993,755.219 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="921.081,774.117 921.081,755.219 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1394.17,774.117 1394.17,755.219 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1867.26,774.117 1867.26,755.219 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2340.34,774.117 2340.34,755.219 "></polyline>
<path clip-path="url(#clip530)" d="M447.993 807.34 Q444.382 807.34 442.553 810.904 Q440.747 814.446 440.747 821.576 Q440.747 828.682 442.553 832.247 Q444.382 835.789 447.993 835.789 Q451.627 835.789 453.432 832.247 Q455.261 828.682 455.261 821.576 Q455.261 814.446 453.432 810.904 Q451.627 807.34 447.993 807.34 M447.993 803.636 Q453.803 803.636 456.858 808.242 Q459.937 812.826 459.937 821.576 Q459.937 830.303 456.858 834.909 Q453.803 839.492 447.993 839.492 Q442.183 839.492 439.104 834.909 Q436.048 830.303 436.048 821.576 Q436.048 812.826 439.104 808.242 Q442.183 803.636 447.993 803.636 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M915.734 834.886 L932.053 834.886 L932.053 838.821 L910.109 838.821 L910.109 834.886 Q912.771 832.131 917.354 827.502 Q921.96 822.849 923.141 821.506 Q925.386 818.983 926.266 817.247 Q927.169 815.488 927.169 813.798 Q927.169 811.043 925.224 809.307 Q923.303 807.571 920.201 807.571 Q918.002 807.571 915.548 808.335 Q913.118 809.099 910.34 810.65 L910.34 805.928 Q913.164 804.793 915.618 804.215 Q918.072 803.636 920.109 803.636 Q925.479 803.636 928.673 806.321 Q931.868 809.006 931.868 813.497 Q931.868 815.627 931.058 817.548 Q930.271 819.446 928.164 822.039 Q927.585 822.71 924.484 825.928 Q921.382 829.122 915.734 834.886 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M1397.18 808.335 L1385.37 826.784 L1397.18 826.784 L1397.18 808.335 M1395.95 804.261 L1401.83 804.261 L1401.83 826.784 L1406.76 826.784 L1406.76 830.673 L1401.83 830.673 L1401.83 838.821 L1397.18 838.821 L1397.18 830.673 L1381.58 830.673 L1381.58 826.159 L1395.95 804.261 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M1867.66 819.678 Q1864.51 819.678 1862.66 821.83 Q1860.83 823.983 1860.83 827.733 Q1860.83 831.46 1862.66 833.636 Q1864.51 835.789 1867.66 835.789 Q1870.81 835.789 1872.64 833.636 Q1874.49 831.46 1874.49 827.733 Q1874.49 823.983 1872.64 821.83 Q1870.81 819.678 1867.66 819.678 M1876.94 805.025 L1876.94 809.284 Q1875.19 808.451 1873.38 808.011 Q1871.6 807.571 1869.84 807.571 Q1865.21 807.571 1862.75 810.696 Q1860.32 813.821 1859.98 820.141 Q1861.34 818.127 1863.4 817.062 Q1865.46 815.974 1867.94 815.974 Q1873.15 815.974 1876.16 819.145 Q1879.19 822.293 1879.19 827.733 Q1879.19 833.057 1876.04 836.275 Q1872.89 839.492 1867.66 839.492 Q1861.67 839.492 1858.5 834.909 Q1855.32 830.303 1855.32 821.576 Q1855.32 813.381 1859.21 808.52 Q1863.1 803.636 1869.65 803.636 Q1871.41 803.636 1873.19 803.983 Q1875 804.33 1876.94 805.025 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M2340.34 822.409 Q2337.01 822.409 2335.09 824.191 Q2333.19 825.974 2333.19 829.099 Q2333.19 832.224 2335.09 834.006 Q2337.01 835.789 2340.34 835.789 Q2343.68 835.789 2345.6 834.006 Q2347.52 832.201 2347.52 829.099 Q2347.52 825.974 2345.6 824.191 Q2343.7 822.409 2340.34 822.409 M2335.67 820.418 Q2332.66 819.678 2330.97 817.617 Q2329.3 815.557 2329.3 812.594 Q2329.3 808.451 2332.24 806.043 Q2335.21 803.636 2340.34 803.636 Q2345.51 803.636 2348.45 806.043 Q2351.39 808.451 2351.39 812.594 Q2351.39 815.557 2349.7 817.617 Q2348.03 819.678 2345.04 820.418 Q2348.42 821.205 2350.3 823.497 Q2352.2 825.789 2352.2 829.099 Q2352.2 834.122 2349.12 836.807 Q2346.06 839.492 2340.34 839.492 Q2334.63 839.492 2331.55 836.807 Q2328.49 834.122 2328.49 829.099 Q2328.49 825.789 2330.39 823.497 Q2332.29 821.205 2335.67 820.418 M2333.96 813.034 Q2333.96 815.719 2335.62 817.224 Q2337.31 818.729 2340.34 818.729 Q2343.35 818.729 2345.04 817.224 Q2346.76 815.719 2346.76 813.034 Q2346.76 810.349 2345.04 808.844 Q2343.35 807.34 2340.34 807.34 Q2337.31 807.34 2335.62 808.844 Q2333.96 810.349 2333.96 813.034 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M1496.62 873.776 L1502.51 873.776 L1502.51 903.026 L1519.98 887.653 L1527.46 887.653 L1508.56 904.331 L1528.26 923.301 L1520.62 923.301 L1502.51 905.891 L1502.51 923.301 L1496.62 923.301 L1496.62 873.776 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="384.126,774.117 384.126,47.2441 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="384.126,644.678 403.023,644.678 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="384.126,488.806 403.023,488.806 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="384.126,332.935 403.023,332.935 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="384.126,177.063 403.023,177.063 "></polyline>
<path clip-path="url(#clip530)" d="M116.214 645.13 L145.89 645.13 L145.89 649.065 L116.214 649.065 L116.214 645.13 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M165.983 630.477 Q162.372 630.477 160.543 634.042 Q158.737 637.583 158.737 644.713 Q158.737 651.819 160.543 655.384 Q162.372 658.926 165.983 658.926 Q169.617 658.926 171.422 655.384 Q173.251 651.819 173.251 644.713 Q173.251 637.583 171.422 634.042 Q169.617 630.477 165.983 630.477 M165.983 626.773 Q171.793 626.773 174.848 631.38 Q177.927 635.963 177.927 644.713 Q177.927 653.44 174.848 658.046 Q171.793 662.629 165.983 662.629 Q160.173 662.629 157.094 658.046 Q154.038 653.44 154.038 644.713 Q154.038 635.963 157.094 631.38 Q160.173 626.773 165.983 626.773 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M186.145 656.079 L191.029 656.079 L191.029 661.958 L186.145 661.958 L186.145 656.079 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M201.353 661.241 L201.353 656.981 Q203.112 657.815 204.918 658.255 Q206.723 658.694 208.459 658.694 Q213.089 658.694 215.519 655.592 Q217.973 652.468 218.32 646.125 Q216.978 648.116 214.918 649.18 Q212.857 650.245 210.357 650.245 Q205.172 650.245 202.14 647.12 Q199.131 643.972 199.131 638.532 Q199.131 633.208 202.279 629.991 Q205.427 626.773 210.658 626.773 Q216.654 626.773 219.802 631.38 Q222.973 635.963 222.973 644.713 Q222.973 652.884 219.084 657.768 Q215.219 662.629 208.668 662.629 Q206.908 662.629 205.103 662.282 Q203.297 661.935 201.353 661.241 M210.658 646.588 Q213.807 646.588 215.635 644.435 Q217.487 642.282 217.487 638.532 Q217.487 634.806 215.635 632.653 Q213.807 630.477 210.658 630.477 Q207.51 630.477 205.658 632.653 Q203.83 634.806 203.83 638.532 Q203.83 642.282 205.658 644.435 Q207.51 646.588 210.658 646.588 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M231.515 661.241 L231.515 656.981 Q233.274 657.815 235.08 658.255 Q236.885 658.694 238.621 658.694 Q243.251 658.694 245.681 655.592 Q248.135 652.468 248.482 646.125 Q247.14 648.116 245.079 649.18 Q243.019 650.245 240.519 650.245 Q235.334 650.245 232.302 647.12 Q229.293 643.972 229.293 638.532 Q229.293 633.208 232.441 629.991 Q235.589 626.773 240.82 626.773 Q246.816 626.773 249.964 631.38 Q253.135 635.963 253.135 644.713 Q253.135 652.884 249.246 657.768 Q245.38 662.629 238.83 662.629 Q237.07 662.629 235.265 662.282 Q233.459 661.935 231.515 661.241 M240.82 646.588 Q243.968 646.588 245.797 644.435 Q247.649 642.282 247.649 638.532 Q247.649 634.806 245.797 632.653 Q243.968 630.477 240.82 630.477 Q237.672 630.477 235.82 632.653 Q233.992 634.806 233.992 638.532 Q233.992 642.282 235.82 644.435 Q237.672 646.588 240.82 646.588 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M261.677 661.241 L261.677 656.981 Q263.436 657.815 265.241 658.255 Q267.047 658.694 268.783 658.694 Q273.413 658.694 275.843 655.592 Q278.297 652.468 278.644 646.125 Q277.302 648.116 275.241 649.18 Q273.181 650.245 270.681 650.245 Q265.496 650.245 262.464 647.12 Q259.454 643.972 259.454 638.532 Q259.454 633.208 262.603 629.991 Q265.751 626.773 270.982 626.773 Q276.977 626.773 280.126 631.38 Q283.297 635.963 283.297 644.713 Q283.297 652.884 279.408 657.768 Q275.542 662.629 268.991 662.629 Q267.232 662.629 265.427 662.282 Q263.621 661.935 261.677 661.241 M270.982 646.588 Q274.13 646.588 275.959 644.435 Q277.811 642.282 277.811 638.532 Q277.811 634.806 275.959 632.653 Q274.13 630.477 270.982 630.477 Q267.834 630.477 265.982 632.653 Q264.153 634.806 264.153 638.532 Q264.153 642.282 265.982 644.435 Q267.834 646.588 270.982 646.588 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M291.839 661.241 L291.839 656.981 Q293.598 657.815 295.403 658.255 Q297.209 658.694 298.945 658.694 Q303.575 658.694 306.005 655.592 Q308.459 652.468 308.806 646.125 Q307.463 648.116 305.403 649.18 Q303.343 650.245 300.843 650.245 Q295.658 650.245 292.626 647.12 Q289.616 643.972 289.616 638.532 Q289.616 633.208 292.764 629.991 Q295.913 626.773 301.144 626.773 Q307.139 626.773 310.287 631.38 Q313.459 635.963 313.459 644.713 Q313.459 652.884 309.57 657.768 Q305.704 662.629 299.153 662.629 Q297.394 662.629 295.588 662.282 Q293.783 661.935 291.839 661.241 M301.144 646.588 Q304.292 646.588 306.121 644.435 Q307.973 642.282 307.973 638.532 Q307.973 634.806 306.121 632.653 Q304.292 630.477 301.144 630.477 Q297.996 630.477 296.144 632.653 Q294.315 634.806 294.315 638.532 Q294.315 642.282 296.144 644.435 Q297.996 646.588 301.144 646.588 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M331.861 630.477 Q328.25 630.477 326.422 634.042 Q324.616 637.583 324.616 644.713 Q324.616 651.819 326.422 655.384 Q328.25 658.926 331.861 658.926 Q335.496 658.926 337.301 655.384 Q339.13 651.819 339.13 644.713 Q339.13 637.583 337.301 634.042 Q335.496 630.477 331.861 630.477 M331.861 626.773 Q337.672 626.773 340.727 631.38 Q343.806 635.963 343.806 644.713 Q343.806 653.44 340.727 658.046 Q337.672 662.629 331.861 662.629 Q326.051 662.629 322.973 658.046 Q319.917 653.44 319.917 644.713 Q319.917 635.963 322.973 631.38 Q326.051 626.773 331.861 626.773 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M117.21 489.258 L146.886 489.258 L146.886 493.193 L117.21 493.193 L117.21 489.258 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M166.978 474.605 Q163.367 474.605 161.538 478.17 Q159.733 481.712 159.733 488.841 Q159.733 495.948 161.538 499.512 Q163.367 503.054 166.978 503.054 Q170.612 503.054 172.418 499.512 Q174.247 495.948 174.247 488.841 Q174.247 481.712 172.418 478.17 Q170.612 474.605 166.978 474.605 M166.978 470.901 Q172.788 470.901 175.844 475.508 Q178.922 480.091 178.922 488.841 Q178.922 497.568 175.844 502.174 Q172.788 506.758 166.978 506.758 Q161.168 506.758 158.089 502.174 Q155.034 497.568 155.034 488.841 Q155.034 480.091 158.089 475.508 Q161.168 470.901 166.978 470.901 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M187.14 500.207 L192.024 500.207 L192.024 506.086 L187.14 506.086 L187.14 500.207 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M202.348 505.369 L202.348 501.11 Q204.107 501.943 205.913 502.383 Q207.719 502.823 209.455 502.823 Q214.084 502.823 216.515 499.721 Q218.969 496.596 219.316 490.253 Q217.973 492.244 215.913 493.309 Q213.853 494.374 211.353 494.374 Q206.168 494.374 203.135 491.249 Q200.126 488.1 200.126 482.661 Q200.126 477.337 203.274 474.119 Q206.422 470.901 211.654 470.901 Q217.649 470.901 220.797 475.508 Q223.968 480.091 223.968 488.841 Q223.968 497.012 220.08 501.897 Q216.214 506.758 209.663 506.758 Q207.904 506.758 206.098 506.411 Q204.293 506.063 202.348 505.369 M211.654 490.716 Q214.802 490.716 216.631 488.563 Q218.482 486.411 218.482 482.661 Q218.482 478.934 216.631 476.781 Q214.802 474.605 211.654 474.605 Q208.506 474.605 206.654 476.781 Q204.825 478.934 204.825 482.661 Q204.825 486.411 206.654 488.563 Q208.506 490.716 211.654 490.716 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M232.51 505.369 L232.51 501.11 Q234.269 501.943 236.075 502.383 Q237.88 502.823 239.617 502.823 Q244.246 502.823 246.677 499.721 Q249.13 496.596 249.478 490.253 Q248.135 492.244 246.075 493.309 Q244.015 494.374 241.515 494.374 Q236.33 494.374 233.297 491.249 Q230.288 488.1 230.288 482.661 Q230.288 477.337 233.436 474.119 Q236.584 470.901 241.816 470.901 Q247.811 470.901 250.959 475.508 Q254.13 480.091 254.13 488.841 Q254.13 497.012 250.242 501.897 Q246.376 506.758 239.825 506.758 Q238.066 506.758 236.26 506.411 Q234.455 506.063 232.51 505.369 M241.816 490.716 Q244.964 490.716 246.792 488.563 Q248.644 486.411 248.644 482.661 Q248.644 478.934 246.792 476.781 Q244.964 474.605 241.816 474.605 Q238.667 474.605 236.816 476.781 Q234.987 478.934 234.987 482.661 Q234.987 486.411 236.816 488.563 Q238.667 490.716 241.816 490.716 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M262.672 505.369 L262.672 501.11 Q264.431 501.943 266.237 502.383 Q268.042 502.823 269.778 502.823 Q274.408 502.823 276.839 499.721 Q279.292 496.596 279.639 490.253 Q278.297 492.244 276.237 493.309 Q274.177 494.374 271.677 494.374 Q266.491 494.374 263.459 491.249 Q260.45 488.1 260.45 482.661 Q260.45 477.337 263.598 474.119 Q266.746 470.901 271.977 470.901 Q277.973 470.901 281.121 475.508 Q284.292 480.091 284.292 488.841 Q284.292 497.012 280.403 501.897 Q276.538 506.758 269.987 506.758 Q268.228 506.758 266.422 506.411 Q264.616 506.063 262.672 505.369 M271.977 490.716 Q275.126 490.716 276.954 488.563 Q278.806 486.411 278.806 482.661 Q278.806 478.934 276.954 476.781 Q275.126 474.605 271.977 474.605 Q268.829 474.605 266.978 476.781 Q265.149 478.934 265.149 482.661 Q265.149 486.411 266.978 488.563 Q268.829 490.716 271.977 490.716 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M302.695 489.674 Q299.362 489.674 297.44 491.457 Q295.542 493.239 295.542 496.364 Q295.542 499.489 297.44 501.272 Q299.362 503.054 302.695 503.054 Q306.028 503.054 307.95 501.272 Q309.871 499.466 309.871 496.364 Q309.871 493.239 307.95 491.457 Q306.051 489.674 302.695 489.674 M298.019 487.684 Q295.01 486.943 293.32 484.883 Q291.653 482.823 291.653 479.86 Q291.653 475.716 294.593 473.309 Q297.556 470.901 302.695 470.901 Q307.857 470.901 310.797 473.309 Q313.737 475.716 313.737 479.86 Q313.737 482.823 312.047 484.883 Q310.38 486.943 307.394 487.684 Q310.774 488.471 312.649 490.762 Q314.547 493.054 314.547 496.364 Q314.547 501.387 311.468 504.073 Q308.412 506.758 302.695 506.758 Q296.977 506.758 293.899 504.073 Q290.843 501.387 290.843 496.364 Q290.843 493.054 292.741 490.762 Q294.639 488.471 298.019 487.684 M296.306 480.3 Q296.306 482.985 297.973 484.489 Q299.663 485.994 302.695 485.994 Q305.704 485.994 307.394 484.489 Q309.107 482.985 309.107 480.3 Q309.107 477.614 307.394 476.11 Q305.704 474.605 302.695 474.605 Q299.663 474.605 297.973 476.11 Q296.306 477.614 296.306 480.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M322.903 471.526 L341.26 471.526 L341.26 475.462 L327.186 475.462 L327.186 483.934 Q328.204 483.587 329.223 483.425 Q330.241 483.239 331.26 483.239 Q337.047 483.239 340.426 486.411 Q343.806 489.582 343.806 494.999 Q343.806 500.577 340.334 503.679 Q336.861 506.758 330.542 506.758 Q328.366 506.758 326.098 506.387 Q323.852 506.017 321.445 505.276 L321.445 500.577 Q323.528 501.711 325.75 502.267 Q327.973 502.823 330.449 502.823 Q334.454 502.823 336.792 500.716 Q339.13 498.61 339.13 494.999 Q339.13 491.387 336.792 489.281 Q334.454 487.175 330.449 487.175 Q328.574 487.175 326.699 487.591 Q324.848 488.008 322.903 488.887 L322.903 471.526 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M116.214 333.386 L145.89 333.386 L145.89 337.321 L116.214 337.321 L116.214 333.386 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M165.983 318.733 Q162.372 318.733 160.543 322.298 Q158.737 325.84 158.737 332.969 Q158.737 340.076 160.543 343.641 Q162.372 347.182 165.983 347.182 Q169.617 347.182 171.422 343.641 Q173.251 340.076 173.251 332.969 Q173.251 325.84 171.422 322.298 Q169.617 318.733 165.983 318.733 M165.983 315.03 Q171.793 315.03 174.848 319.636 Q177.927 324.219 177.927 332.969 Q177.927 341.696 174.848 346.303 Q171.793 350.886 165.983 350.886 Q160.173 350.886 157.094 346.303 Q154.038 341.696 154.038 332.969 Q154.038 324.219 157.094 319.636 Q160.173 315.03 165.983 315.03 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M186.145 344.335 L191.029 344.335 L191.029 350.215 L186.145 350.215 L186.145 344.335 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M201.353 349.497 L201.353 345.238 Q203.112 346.071 204.918 346.511 Q206.723 346.951 208.459 346.951 Q213.089 346.951 215.519 343.849 Q217.973 340.724 218.32 334.381 Q216.978 336.372 214.918 337.437 Q212.857 338.502 210.357 338.502 Q205.172 338.502 202.14 335.377 Q199.131 332.229 199.131 326.789 Q199.131 321.465 202.279 318.247 Q205.427 315.03 210.658 315.03 Q216.654 315.03 219.802 319.636 Q222.973 324.219 222.973 332.969 Q222.973 341.141 219.084 346.025 Q215.219 350.886 208.668 350.886 Q206.908 350.886 205.103 350.539 Q203.297 350.192 201.353 349.497 M210.658 334.844 Q213.807 334.844 215.635 332.692 Q217.487 330.539 217.487 326.789 Q217.487 323.062 215.635 320.909 Q213.807 318.733 210.658 318.733 Q207.51 318.733 205.658 320.909 Q203.83 323.062 203.83 326.789 Q203.83 330.539 205.658 332.692 Q207.51 334.844 210.658 334.844 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M231.515 349.497 L231.515 345.238 Q233.274 346.071 235.08 346.511 Q236.885 346.951 238.621 346.951 Q243.251 346.951 245.681 343.849 Q248.135 340.724 248.482 334.381 Q247.14 336.372 245.079 337.437 Q243.019 338.502 240.519 338.502 Q235.334 338.502 232.302 335.377 Q229.293 332.229 229.293 326.789 Q229.293 321.465 232.441 318.247 Q235.589 315.03 240.82 315.03 Q246.816 315.03 249.964 319.636 Q253.135 324.219 253.135 332.969 Q253.135 341.141 249.246 346.025 Q245.38 350.886 238.83 350.886 Q237.07 350.886 235.265 350.539 Q233.459 350.192 231.515 349.497 M240.82 334.844 Q243.968 334.844 245.797 332.692 Q247.649 330.539 247.649 326.789 Q247.649 323.062 245.797 320.909 Q243.968 318.733 240.82 318.733 Q237.672 318.733 235.82 320.909 Q233.992 323.062 233.992 326.789 Q233.992 330.539 235.82 332.692 Q237.672 334.844 240.82 334.844 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M261.677 349.497 L261.677 345.238 Q263.436 346.071 265.241 346.511 Q267.047 346.951 268.783 346.951 Q273.413 346.951 275.843 343.849 Q278.297 340.724 278.644 334.381 Q277.302 336.372 275.241 337.437 Q273.181 338.502 270.681 338.502 Q265.496 338.502 262.464 335.377 Q259.454 332.229 259.454 326.789 Q259.454 321.465 262.603 318.247 Q265.751 315.03 270.982 315.03 Q276.977 315.03 280.126 319.636 Q283.297 324.219 283.297 332.969 Q283.297 341.141 279.408 346.025 Q275.542 350.886 268.991 350.886 Q267.232 350.886 265.427 350.539 Q263.621 350.192 261.677 349.497 M270.982 334.844 Q274.13 334.844 275.959 332.692 Q277.811 330.539 277.811 326.789 Q277.811 323.062 275.959 320.909 Q274.13 318.733 270.982 318.733 Q267.834 318.733 265.982 320.909 Q264.153 323.062 264.153 326.789 Q264.153 330.539 265.982 332.692 Q267.834 334.844 270.982 334.844 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M301.7 333.803 Q298.366 333.803 296.445 335.585 Q294.547 337.368 294.547 340.493 Q294.547 343.617 296.445 345.4 Q298.366 347.182 301.7 347.182 Q305.033 347.182 306.954 345.4 Q308.875 343.594 308.875 340.493 Q308.875 337.368 306.954 335.585 Q305.056 333.803 301.7 333.803 M297.024 331.812 Q294.014 331.071 292.325 329.011 Q290.658 326.951 290.658 323.988 Q290.658 319.844 293.598 317.437 Q296.561 315.03 301.7 315.03 Q306.862 315.03 309.801 317.437 Q312.741 319.844 312.741 323.988 Q312.741 326.951 311.051 329.011 Q309.385 331.071 306.399 331.812 Q309.778 332.599 311.653 334.891 Q313.551 337.182 313.551 340.493 Q313.551 345.516 310.473 348.201 Q307.417 350.886 301.7 350.886 Q295.982 350.886 292.903 348.201 Q289.848 345.516 289.848 340.493 Q289.848 337.182 291.746 334.891 Q293.644 332.599 297.024 331.812 M295.311 324.428 Q295.311 327.113 296.977 328.618 Q298.667 330.122 301.7 330.122 Q304.709 330.122 306.399 328.618 Q308.112 327.113 308.112 324.428 Q308.112 321.743 306.399 320.238 Q304.709 318.733 301.7 318.733 Q298.667 318.733 296.977 320.238 Q295.311 321.743 295.311 324.428 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M331.861 318.733 Q328.25 318.733 326.422 322.298 Q324.616 325.84 324.616 332.969 Q324.616 340.076 326.422 343.641 Q328.25 347.182 331.861 347.182 Q335.496 347.182 337.301 343.641 Q339.13 340.076 339.13 332.969 Q339.13 325.84 337.301 322.298 Q335.496 318.733 331.861 318.733 M331.861 315.03 Q337.672 315.03 340.727 319.636 Q343.806 324.219 343.806 332.969 Q343.806 341.696 340.727 346.303 Q337.672 350.886 331.861 350.886 Q326.051 350.886 322.973 346.303 Q319.917 341.696 319.917 332.969 Q319.917 324.219 322.973 319.636 Q326.051 315.03 331.861 315.03 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M117.21 177.514 L146.886 177.514 L146.886 181.449 L117.21 181.449 L117.21 177.514 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M166.978 162.862 Q163.367 162.862 161.538 166.426 Q159.733 169.968 159.733 177.098 Q159.733 184.204 161.538 187.769 Q163.367 191.311 166.978 191.311 Q170.612 191.311 172.418 187.769 Q174.247 184.204 174.247 177.098 Q174.247 169.968 172.418 166.426 Q170.612 162.862 166.978 162.862 M166.978 159.158 Q172.788 159.158 175.844 163.764 Q178.922 168.348 178.922 177.098 Q178.922 185.824 175.844 190.431 Q172.788 195.014 166.978 195.014 Q161.168 195.014 158.089 190.431 Q155.034 185.824 155.034 177.098 Q155.034 168.348 158.089 163.764 Q161.168 159.158 166.978 159.158 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M187.14 188.463 L192.024 188.463 L192.024 194.343 L187.14 194.343 L187.14 188.463 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M202.348 193.625 L202.348 189.366 Q204.107 190.199 205.913 190.639 Q207.719 191.079 209.455 191.079 Q214.084 191.079 216.515 187.977 Q218.969 184.852 219.316 178.51 Q217.973 180.5 215.913 181.565 Q213.853 182.63 211.353 182.63 Q206.168 182.63 203.135 179.505 Q200.126 176.357 200.126 170.917 Q200.126 165.593 203.274 162.376 Q206.422 159.158 211.654 159.158 Q217.649 159.158 220.797 163.764 Q223.968 168.348 223.968 177.098 Q223.968 185.269 220.08 190.153 Q216.214 195.014 209.663 195.014 Q207.904 195.014 206.098 194.667 Q204.293 194.32 202.348 193.625 M211.654 178.973 Q214.802 178.973 216.631 176.82 Q218.482 174.667 218.482 170.917 Q218.482 167.19 216.631 165.038 Q214.802 162.862 211.654 162.862 Q208.506 162.862 206.654 165.038 Q204.825 167.19 204.825 170.917 Q204.825 174.667 206.654 176.82 Q208.506 178.973 211.654 178.973 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M232.51 193.625 L232.51 189.366 Q234.269 190.199 236.075 190.639 Q237.88 191.079 239.617 191.079 Q244.246 191.079 246.677 187.977 Q249.13 184.852 249.478 178.51 Q248.135 180.5 246.075 181.565 Q244.015 182.63 241.515 182.63 Q236.33 182.63 233.297 179.505 Q230.288 176.357 230.288 170.917 Q230.288 165.593 233.436 162.376 Q236.584 159.158 241.816 159.158 Q247.811 159.158 250.959 163.764 Q254.13 168.348 254.13 177.098 Q254.13 185.269 250.242 190.153 Q246.376 195.014 239.825 195.014 Q238.066 195.014 236.26 194.667 Q234.455 194.32 232.51 193.625 M241.816 178.973 Q244.964 178.973 246.792 176.82 Q248.644 174.667 248.644 170.917 Q248.644 167.19 246.792 165.038 Q244.964 162.862 241.816 162.862 Q238.667 162.862 236.816 165.038 Q234.987 167.19 234.987 170.917 Q234.987 174.667 236.816 176.82 Q238.667 178.973 241.816 178.973 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M262.672 193.625 L262.672 189.366 Q264.431 190.199 266.237 190.639 Q268.042 191.079 269.778 191.079 Q274.408 191.079 276.839 187.977 Q279.292 184.852 279.639 178.51 Q278.297 180.5 276.237 181.565 Q274.177 182.63 271.677 182.63 Q266.491 182.63 263.459 179.505 Q260.45 176.357 260.45 170.917 Q260.45 165.593 263.598 162.376 Q266.746 159.158 271.977 159.158 Q277.973 159.158 281.121 163.764 Q284.292 168.348 284.292 177.098 Q284.292 185.269 280.403 190.153 Q276.538 195.014 269.987 195.014 Q268.228 195.014 266.422 194.667 Q264.616 194.32 262.672 193.625 M271.977 178.973 Q275.126 178.973 276.954 176.82 Q278.806 174.667 278.806 170.917 Q278.806 167.19 276.954 165.038 Q275.126 162.862 271.977 162.862 Q268.829 162.862 266.978 165.038 Q265.149 167.19 265.149 170.917 Q265.149 174.667 266.978 176.82 Q268.829 178.973 271.977 178.973 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M291.514 159.783 L313.737 159.783 L313.737 161.774 L301.19 194.343 L296.306 194.343 L308.112 163.718 L291.514 163.718 L291.514 159.783 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M322.903 159.783 L341.26 159.783 L341.26 163.718 L327.186 163.718 L327.186 172.19 Q328.204 171.843 329.223 171.681 Q330.241 171.496 331.26 171.496 Q337.047 171.496 340.426 174.667 Q343.806 177.838 343.806 183.255 Q343.806 188.834 340.334 191.936 Q336.861 195.014 330.542 195.014 Q328.366 195.014 326.098 194.644 Q323.852 194.273 321.445 193.533 L321.445 188.834 Q323.528 189.968 325.75 190.524 Q327.973 191.079 330.449 191.079 Q334.454 191.079 336.792 188.973 Q339.13 186.866 339.13 183.255 Q339.13 179.644 336.792 177.537 Q334.454 175.431 330.449 175.431 Q328.574 175.431 326.699 175.848 Q324.848 176.264 322.903 177.144 L322.903 159.783 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M47.5702 425.608 L25.9905 425.608 L25.9905 419.752 L47.3474 419.752 Q52.4082 419.752 54.9545 417.778 Q57.4689 415.805 57.4689 411.858 Q57.4689 407.116 54.4452 404.378 Q51.4215 401.609 46.2016 401.609 L25.9905 401.609 L25.9905 395.753 L61.6384 395.753 L61.6384 401.609 L56.1639 401.609 Q59.4104 403.742 61.0019 406.575 Q62.5615 409.376 62.5615 413.1 Q62.5615 419.242 58.742 422.425 Q54.9226 425.608 47.5702 425.608 M25.1311 410.872 L25.1311 410.872 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip532)" d="M447.993 567.575 L431.993 583.575 L447.993 599.575 L463.993 583.575 L447.993 567.575 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip532)" d="M684.537 363.025 L668.537 379.025 L684.537 395.025 L700.537 379.025 L684.537 363.025 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip532)" d="M921.081 179.771 L905.081 195.771 L921.081 211.771 L937.081 195.771 L921.081 179.771 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip532)" d="M1157.62 59.3079 L1141.62 75.3079 L1157.62 91.3079 L1173.62 75.3079 L1157.62 59.3079 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip532)" d="M1394.17 51.816 L1378.17 67.816 L1394.17 83.816 L1410.17 67.816 L1394.17 51.816 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip532)" d="M1630.71 120.869 L1614.71 136.869 L1630.71 152.869 L1646.71 136.869 L1630.71 120.869 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip532)" d="M1867.26 251.283 L1851.26 267.283 L1867.26 283.283 L1883.26 267.283 L1867.26 251.283 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip532)" d="M2103.8 370.967 L2087.8 386.967 L2103.8 402.967 L2119.8 386.967 L2103.8 370.967 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip532)" d="M2340.34 546.212 L2324.34 562.212 L2340.34 578.212 L2356.34 562.212 L2340.34 546.212 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip532)" d="M2576.89 737.545 L2560.89 753.545 L2576.89 769.545 L2592.89 753.545 L2576.89 737.545 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip532)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="447.993,583.575 684.537,583.575 684.537,379.025 921.081,379.025 921.081,195.771 1157.62,195.771 1157.62,75.3079 1394.17,75.3079 1394.17,67.816 1630.71,67.816 1630.71,136.869 1867.26,136.869 1867.26,267.283 2103.8,267.283 2103.8,386.967 2340.34,386.967 2340.34,562.212 2576.89,562.212 2576.89,753.545 "></polyline>
<path clip-path="url(#clip530)" d="M2318.16 175.153 L2565.53 175.153 L2565.53 71.4732 L2318.16 71.4732  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2318.16,175.153 2565.53,175.153 2565.53,71.4732 2318.16,71.4732 2318.16,175.153 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2343.23,123.313 2493.67,123.313 "></polyline>
<path clip-path="url(#clip530)" d="M2518.75 130.362 L2518.75 114.667 L2523.01 114.667 L2523.01 130.2 Q2523.01 133.88 2524.44 135.732 Q2525.88 137.561 2528.75 137.561 Q2532.2 137.561 2534.19 135.362 Q2536.2 133.163 2536.2 129.366 L2536.2 114.667 L2540.46 114.667 L2540.46 140.593 L2536.2 140.593 L2536.2 136.612 Q2534.65 138.973 2532.59 140.13 Q2530.55 141.264 2527.85 141.264 Q2523.38 141.264 2521.06 138.487 Q2518.75 135.709 2518.75 130.362 M2529.47 114.042 L2529.47 114.042 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M384.126 1734.12 L2640.76 1734.12 L2640.76 1007.24 L384.126 1007.24  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip533">
    <rect x="384" y="1007" width="2258" height="728"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip533)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="447.993,1734.12 447.993,1007.24 "></polyline>
<polyline clip-path="url(#clip533)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="980.217,1734.12 980.217,1007.24 "></polyline>
<polyline clip-path="url(#clip533)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1512.44,1734.12 1512.44,1007.24 "></polyline>
<polyline clip-path="url(#clip533)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2044.66,1734.12 2044.66,1007.24 "></polyline>
<polyline clip-path="url(#clip533)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2576.89,1734.12 2576.89,1007.24 "></polyline>
<polyline clip-path="url(#clip533)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="384.126,1685.19 2640.76,1685.19 "></polyline>
<polyline clip-path="url(#clip533)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="384.126,1520.85 2640.76,1520.85 "></polyline>
<polyline clip-path="url(#clip533)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="384.126,1356.5 2640.76,1356.5 "></polyline>
<polyline clip-path="url(#clip533)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="384.126,1192.16 2640.76,1192.16 "></polyline>
<polyline clip-path="url(#clip533)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="384.126,1027.82 2640.76,1027.82 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="384.126,1734.12 2640.76,1734.12 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="447.993,1734.12 447.993,1715.22 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="980.217,1734.12 980.217,1715.22 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1512.44,1734.12 1512.44,1715.22 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2044.66,1734.12 2044.66,1715.22 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2576.89,1734.12 2576.89,1715.22 "></polyline>
<path clip-path="url(#clip530)" d="M425.377 1767.34 Q421.766 1767.34 419.937 1770.9 Q418.132 1774.45 418.132 1781.58 Q418.132 1788.68 419.937 1792.25 Q421.766 1795.79 425.377 1795.79 Q429.011 1795.79 430.817 1792.25 Q432.646 1788.68 432.646 1781.58 Q432.646 1774.45 430.817 1770.9 Q429.011 1767.34 425.377 1767.34 M425.377 1763.64 Q431.187 1763.64 434.243 1768.24 Q437.321 1772.83 437.321 1781.58 Q437.321 1790.3 434.243 1794.91 Q431.187 1799.49 425.377 1799.49 Q419.567 1799.49 416.488 1794.91 Q413.433 1790.3 413.433 1781.58 Q413.433 1772.83 416.488 1768.24 Q419.567 1763.64 425.377 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M445.539 1792.94 L450.423 1792.94 L450.423 1798.82 L445.539 1798.82 L445.539 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M470.608 1767.34 Q466.997 1767.34 465.169 1770.9 Q463.363 1774.45 463.363 1781.58 Q463.363 1788.68 465.169 1792.25 Q466.997 1795.79 470.608 1795.79 Q474.243 1795.79 476.048 1792.25 Q477.877 1788.68 477.877 1781.58 Q477.877 1774.45 476.048 1770.9 Q474.243 1767.34 470.608 1767.34 M470.608 1763.64 Q476.418 1763.64 479.474 1768.24 Q482.553 1772.83 482.553 1781.58 Q482.553 1790.3 479.474 1794.91 Q476.418 1799.49 470.608 1799.49 Q464.798 1799.49 461.719 1794.91 Q458.664 1790.3 458.664 1781.58 Q458.664 1772.83 461.719 1768.24 Q464.798 1763.64 470.608 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M951.953 1794.89 L968.272 1794.89 L968.272 1798.82 L946.328 1798.82 L946.328 1794.89 Q948.99 1792.13 953.573 1787.5 Q958.18 1782.85 959.36 1781.51 Q961.606 1778.98 962.485 1777.25 Q963.388 1775.49 963.388 1773.8 Q963.388 1771.04 961.444 1769.31 Q959.522 1767.57 956.421 1767.57 Q954.222 1767.57 951.768 1768.34 Q949.337 1769.1 946.56 1770.65 L946.56 1765.93 Q949.384 1764.79 951.837 1764.21 Q954.291 1763.64 956.328 1763.64 Q961.698 1763.64 964.893 1766.32 Q968.087 1769.01 968.087 1773.5 Q968.087 1775.63 967.277 1777.55 Q966.49 1779.45 964.384 1782.04 Q963.805 1782.71 960.703 1785.93 Q957.601 1789.12 951.953 1794.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M978.087 1792.94 L982.971 1792.94 L982.971 1798.82 L978.087 1798.82 L978.087 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M993.203 1764.26 L1011.56 1764.26 L1011.56 1768.2 L997.485 1768.2 L997.485 1776.67 Q998.504 1776.32 999.522 1776.16 Q1000.54 1775.97 1001.56 1775.97 Q1007.35 1775.97 1010.73 1779.15 Q1014.11 1782.32 1014.11 1787.73 Q1014.11 1793.31 1010.63 1796.41 Q1007.16 1799.49 1000.84 1799.49 Q998.666 1799.49 996.397 1799.12 Q994.152 1798.75 991.744 1798.01 L991.744 1793.31 Q993.828 1794.45 996.05 1795 Q998.272 1795.56 1000.75 1795.56 Q1004.75 1795.56 1007.09 1793.45 Q1009.43 1791.34 1009.43 1787.73 Q1009.43 1784.12 1007.09 1782.02 Q1004.75 1779.91 1000.75 1779.91 Q998.874 1779.91 996.999 1780.33 Q995.147 1780.74 993.203 1781.62 L993.203 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M1479.61 1764.26 L1497.96 1764.26 L1497.96 1768.2 L1483.89 1768.2 L1483.89 1776.67 Q1484.91 1776.32 1485.92 1776.16 Q1486.94 1775.97 1487.96 1775.97 Q1493.75 1775.97 1497.13 1779.15 Q1500.51 1782.32 1500.51 1787.73 Q1500.51 1793.31 1497.04 1796.41 Q1493.56 1799.49 1487.24 1799.49 Q1485.07 1799.49 1482.8 1799.12 Q1480.55 1798.75 1478.15 1798.01 L1478.15 1793.31 Q1480.23 1794.45 1482.45 1795 Q1484.67 1795.56 1487.15 1795.56 Q1491.16 1795.56 1493.49 1793.45 Q1495.83 1791.34 1495.83 1787.73 Q1495.83 1784.12 1493.49 1782.02 Q1491.16 1779.91 1487.15 1779.91 Q1485.28 1779.91 1483.4 1780.33 Q1481.55 1780.74 1479.61 1781.62 L1479.61 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M1509.72 1792.94 L1514.61 1792.94 L1514.61 1798.82 L1509.72 1798.82 L1509.72 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M1534.79 1767.34 Q1531.18 1767.34 1529.35 1770.9 Q1527.54 1774.45 1527.54 1781.58 Q1527.54 1788.68 1529.35 1792.25 Q1531.18 1795.79 1534.79 1795.79 Q1538.42 1795.79 1540.23 1792.25 Q1542.06 1788.68 1542.06 1781.58 Q1542.06 1774.45 1540.23 1770.9 Q1538.42 1767.34 1534.79 1767.34 M1534.79 1763.64 Q1540.6 1763.64 1543.66 1768.24 Q1546.73 1772.83 1546.73 1781.58 Q1546.73 1790.3 1543.66 1794.91 Q1540.6 1799.49 1534.79 1799.49 Q1528.98 1799.49 1525.9 1794.91 Q1522.85 1790.3 1522.85 1781.58 Q1522.85 1772.83 1525.9 1768.24 Q1528.98 1763.64 1534.79 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M2010.98 1764.26 L2033.21 1764.26 L2033.21 1766.25 L2020.66 1798.82 L2015.78 1798.82 L2027.58 1768.2 L2010.98 1768.2 L2010.98 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M2042.33 1792.94 L2047.21 1792.94 L2047.21 1798.82 L2042.33 1798.82 L2042.33 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M2057.44 1764.26 L2075.8 1764.26 L2075.8 1768.2 L2061.73 1768.2 L2061.73 1776.67 Q2062.74 1776.32 2063.76 1776.16 Q2064.78 1775.97 2065.8 1775.97 Q2071.59 1775.97 2074.97 1779.15 Q2078.35 1782.32 2078.35 1787.73 Q2078.35 1793.31 2074.87 1796.41 Q2071.4 1799.49 2065.08 1799.49 Q2062.91 1799.49 2060.64 1799.12 Q2058.39 1798.75 2055.98 1798.01 L2055.98 1793.31 Q2058.07 1794.45 2060.29 1795 Q2062.51 1795.56 2064.99 1795.56 Q2068.99 1795.56 2071.33 1793.45 Q2073.67 1791.34 2073.67 1787.73 Q2073.67 1784.12 2071.33 1782.02 Q2068.99 1779.91 2064.99 1779.91 Q2063.11 1779.91 2061.24 1780.33 Q2059.39 1780.74 2057.44 1781.62 L2057.44 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M2528.96 1794.89 L2536.6 1794.89 L2536.6 1768.52 L2528.29 1770.19 L2528.29 1765.93 L2536.55 1764.26 L2541.23 1764.26 L2541.23 1794.89 L2548.87 1794.89 L2548.87 1798.82 L2528.96 1798.82 L2528.96 1794.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M2568.31 1767.34 Q2564.7 1767.34 2562.87 1770.9 Q2561.07 1774.45 2561.07 1781.58 Q2561.07 1788.68 2562.87 1792.25 Q2564.7 1795.79 2568.31 1795.79 Q2571.95 1795.79 2573.75 1792.25 Q2575.58 1788.68 2575.58 1781.58 Q2575.58 1774.45 2573.75 1770.9 Q2571.95 1767.34 2568.31 1767.34 M2568.31 1763.64 Q2574.12 1763.64 2577.18 1768.24 Q2580.26 1772.83 2580.26 1781.58 Q2580.26 1790.3 2577.18 1794.91 Q2574.12 1799.49 2568.31 1799.49 Q2562.5 1799.49 2559.42 1794.91 Q2556.37 1790.3 2556.37 1781.58 Q2556.37 1772.83 2559.42 1768.24 Q2562.5 1763.64 2568.31 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M2588.47 1792.94 L2593.36 1792.94 L2593.36 1798.82 L2588.47 1798.82 L2588.47 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M2613.54 1767.34 Q2609.93 1767.34 2608.1 1770.9 Q2606.3 1774.45 2606.3 1781.58 Q2606.3 1788.68 2608.1 1792.25 Q2609.93 1795.79 2613.54 1795.79 Q2617.18 1795.79 2618.98 1792.25 Q2620.81 1788.68 2620.81 1781.58 Q2620.81 1774.45 2618.98 1770.9 Q2617.18 1767.34 2613.54 1767.34 M2613.54 1763.64 Q2619.35 1763.64 2622.41 1768.24 Q2625.49 1772.83 2625.49 1781.58 Q2625.49 1790.3 2622.41 1794.91 Q2619.35 1799.49 2613.54 1799.49 Q2607.73 1799.49 2604.66 1794.91 Q2601.6 1790.3 2601.6 1781.58 Q2601.6 1772.83 2604.66 1768.24 Q2607.73 1763.64 2613.54 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M1496.62 1833.78 L1502.51 1833.78 L1502.51 1863.03 L1519.98 1847.65 L1527.46 1847.65 L1508.56 1864.33 L1528.26 1883.3 L1520.62 1883.3 L1502.51 1865.89 L1502.51 1883.3 L1496.62 1883.3 L1496.62 1833.78 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="384.126,1734.12 384.126,1007.24 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="384.126,1685.19 403.023,1685.19 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="384.126,1520.85 403.023,1520.85 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="384.126,1356.5 403.023,1356.5 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="384.126,1192.16 403.023,1192.16 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="384.126,1027.82 403.023,1027.82 "></polyline>
<path clip-path="url(#clip530)" d="M277.44 1698.54 L285.079 1698.54 L285.079 1672.17 L276.769 1673.84 L276.769 1669.58 L285.033 1667.91 L289.709 1667.91 L289.709 1698.54 L297.348 1698.54 L297.348 1702.47 L277.44 1702.47 L277.44 1698.54 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M306.792 1696.59 L311.676 1696.59 L311.676 1702.47 L306.792 1702.47 L306.792 1696.59 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M331.861 1670.99 Q328.25 1670.99 326.422 1674.55 Q324.616 1678.1 324.616 1685.23 Q324.616 1692.33 326.422 1695.9 Q328.25 1699.44 331.861 1699.44 Q335.496 1699.44 337.301 1695.9 Q339.13 1692.33 339.13 1685.23 Q339.13 1678.1 337.301 1674.55 Q335.496 1670.99 331.861 1670.99 M331.861 1667.29 Q337.672 1667.29 340.727 1671.89 Q343.806 1676.48 343.806 1685.23 Q343.806 1693.95 340.727 1698.56 Q337.672 1703.14 331.861 1703.14 Q326.051 1703.14 322.973 1698.56 Q319.917 1693.95 319.917 1685.23 Q319.917 1676.48 322.973 1671.89 Q326.051 1667.29 331.861 1667.29 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M278.436 1534.19 L286.075 1534.19 L286.075 1507.83 L277.765 1509.49 L277.765 1505.23 L286.028 1503.57 L290.704 1503.57 L290.704 1534.19 L298.343 1534.19 L298.343 1538.13 L278.436 1538.13 L278.436 1534.19 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M307.787 1532.25 L312.672 1532.25 L312.672 1538.13 L307.787 1538.13 L307.787 1532.25 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M322.903 1503.57 L341.26 1503.57 L341.26 1507.5 L327.186 1507.5 L327.186 1515.97 Q328.204 1515.63 329.223 1515.47 Q330.241 1515.28 331.26 1515.28 Q337.047 1515.28 340.426 1518.45 Q343.806 1521.62 343.806 1527.04 Q343.806 1532.62 340.334 1535.72 Q336.861 1538.8 330.542 1538.8 Q328.366 1538.8 326.098 1538.43 Q323.852 1538.06 321.445 1537.32 L321.445 1532.62 Q323.528 1533.75 325.75 1534.31 Q327.973 1534.86 330.449 1534.86 Q334.454 1534.86 336.792 1532.76 Q339.13 1530.65 339.13 1527.04 Q339.13 1523.43 336.792 1521.32 Q334.454 1519.22 330.449 1519.22 Q328.574 1519.22 326.699 1519.63 Q324.848 1520.05 322.903 1520.93 L322.903 1503.57 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M280.658 1369.85 L296.977 1369.85 L296.977 1373.78 L275.033 1373.78 L275.033 1369.85 Q277.695 1367.09 282.278 1362.46 Q286.885 1357.81 288.065 1356.47 Q290.311 1353.95 291.19 1352.21 Q292.093 1350.45 292.093 1348.76 Q292.093 1346.01 290.149 1344.27 Q288.227 1342.53 285.126 1342.53 Q282.927 1342.53 280.473 1343.3 Q278.042 1344.06 275.265 1345.61 L275.265 1340.89 Q278.089 1339.76 280.542 1339.18 Q282.996 1338.6 285.033 1338.6 Q290.403 1338.6 293.598 1341.28 Q296.792 1343.97 296.792 1348.46 Q296.792 1350.59 295.982 1352.51 Q295.195 1354.41 293.088 1357 Q292.51 1357.67 289.408 1360.89 Q286.306 1364.08 280.658 1369.85 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M306.792 1367.9 L311.676 1367.9 L311.676 1373.78 L306.792 1373.78 L306.792 1367.9 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M331.861 1342.3 Q328.25 1342.3 326.422 1345.87 Q324.616 1349.41 324.616 1356.54 Q324.616 1363.64 326.422 1367.21 Q328.25 1370.75 331.861 1370.75 Q335.496 1370.75 337.301 1367.21 Q339.13 1363.64 339.13 1356.54 Q339.13 1349.41 337.301 1345.87 Q335.496 1342.3 331.861 1342.3 M331.861 1338.6 Q337.672 1338.6 340.727 1343.2 Q343.806 1347.79 343.806 1356.54 Q343.806 1365.26 340.727 1369.87 Q337.672 1374.45 331.861 1374.45 Q326.051 1374.45 322.973 1369.87 Q319.917 1365.26 319.917 1356.54 Q319.917 1347.79 322.973 1343.2 Q326.051 1338.6 331.861 1338.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M281.653 1205.5 L297.973 1205.5 L297.973 1209.44 L276.028 1209.44 L276.028 1205.5 Q278.69 1202.75 283.274 1198.12 Q287.88 1193.47 289.061 1192.12 Q291.306 1189.6 292.186 1187.87 Q293.088 1186.11 293.088 1184.42 Q293.088 1181.66 291.144 1179.93 Q289.223 1178.19 286.121 1178.19 Q283.922 1178.19 281.468 1178.95 Q279.038 1179.72 276.26 1181.27 L276.26 1176.55 Q279.084 1175.41 281.538 1174.83 Q283.991 1174.25 286.028 1174.25 Q291.399 1174.25 294.593 1176.94 Q297.788 1179.62 297.788 1184.12 Q297.788 1186.25 296.977 1188.17 Q296.19 1190.06 294.084 1192.66 Q293.505 1193.33 290.403 1196.55 Q287.301 1199.74 281.653 1205.5 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M307.787 1203.56 L312.672 1203.56 L312.672 1209.44 L307.787 1209.44 L307.787 1203.56 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M322.903 1174.88 L341.26 1174.88 L341.26 1178.81 L327.186 1178.81 L327.186 1187.29 Q328.204 1186.94 329.223 1186.78 Q330.241 1186.59 331.26 1186.59 Q337.047 1186.59 340.426 1189.76 Q343.806 1192.94 343.806 1198.35 Q343.806 1203.93 340.334 1207.03 Q336.861 1210.11 330.542 1210.11 Q328.366 1210.11 326.098 1209.74 Q323.852 1209.37 321.445 1208.63 L321.445 1203.93 Q323.528 1205.06 325.75 1205.62 Q327.973 1206.18 330.449 1206.18 Q334.454 1206.18 336.792 1204.07 Q339.13 1201.96 339.13 1198.35 Q339.13 1194.74 336.792 1192.63 Q334.454 1190.53 330.449 1190.53 Q328.574 1190.53 326.699 1190.94 Q324.848 1191.36 322.903 1192.24 L322.903 1174.88 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M290.797 1026.46 Q294.153 1027.18 296.028 1029.45 Q297.926 1031.72 297.926 1035.05 Q297.926 1040.17 294.408 1042.97 Q290.889 1045.77 284.408 1045.77 Q282.232 1045.77 279.917 1045.33 Q277.626 1044.91 275.172 1044.05 L275.172 1039.54 Q277.116 1040.67 279.431 1041.25 Q281.746 1041.83 284.269 1041.83 Q288.667 1041.83 290.959 1040.1 Q293.274 1038.36 293.274 1035.05 Q293.274 1031.99 291.121 1030.28 Q288.991 1028.55 285.172 1028.55 L281.144 1028.55 L281.144 1024.7 L285.357 1024.7 Q288.806 1024.7 290.635 1023.34 Q292.463 1021.95 292.463 1019.36 Q292.463 1016.69 290.565 1015.28 Q288.69 1013.85 285.172 1013.85 Q283.251 1013.85 281.052 1014.26 Q278.852 1014.68 276.214 1015.56 L276.214 1011.39 Q278.876 1010.65 281.19 1010.28 Q283.528 1009.91 285.589 1009.91 Q290.913 1009.91 294.014 1012.34 Q297.116 1014.75 297.116 1018.87 Q297.116 1021.74 295.473 1023.73 Q293.829 1025.7 290.797 1026.46 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M306.792 1039.22 L311.676 1039.22 L311.676 1045.1 L306.792 1045.1 L306.792 1039.22 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M331.861 1013.61 Q328.25 1013.61 326.422 1017.18 Q324.616 1020.72 324.616 1027.85 Q324.616 1034.96 326.422 1038.52 Q328.25 1042.06 331.861 1042.06 Q335.496 1042.06 337.301 1038.52 Q339.13 1034.96 339.13 1027.85 Q339.13 1020.72 337.301 1017.18 Q335.496 1013.61 331.861 1013.61 M331.861 1009.91 Q337.672 1009.91 340.727 1014.52 Q343.806 1019.1 343.806 1027.85 Q343.806 1036.58 340.727 1041.18 Q337.672 1045.77 331.861 1045.77 Q326.051 1045.77 322.973 1041.18 Q319.917 1036.58 319.917 1027.85 Q319.917 1019.1 322.973 1014.52 Q326.051 1009.91 331.861 1009.91 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M184.809 1354.07 L202.156 1366.96 L220.457 1353.4 L220.457 1360.3 L206.452 1370.68 L220.457 1381.06 L220.457 1387.96 L201.806 1374.12 L184.809 1386.79 L184.809 1379.88 L197.509 1370.43 L184.809 1360.97 L184.809 1354.07 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip533)" d="M447.993 1669.19 L431.993 1685.19 L447.993 1701.19 L463.993 1685.19 L447.993 1669.19 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M660.882 1283.75 L644.882 1299.75 L660.882 1315.75 L676.882 1299.75 L660.882 1283.75 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M873.772 1229.08 L857.772 1245.08 L873.772 1261.08 L889.772 1245.08 L873.772 1229.08 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M1086.66 1228.73 L1070.66 1244.73 L1086.66 1260.73 L1102.66 1244.73 L1086.66 1228.73 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M1299.55 1240.06 L1283.55 1256.06 L1299.55 1272.06 L1315.55 1256.06 L1299.55 1240.06 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M1512.44 1257.55 L1496.44 1273.55 L1512.44 1289.55 L1528.44 1273.55 L1512.44 1257.55 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M1725.33 1281.96 L1709.33 1297.96 L1725.33 1313.96 L1741.33 1297.96 L1725.33 1281.96 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M1938.22 1315.69 L1922.22 1331.69 L1938.22 1347.69 L1954.22 1331.69 L1938.22 1315.69 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M2151.11 1362.21 L2135.11 1378.21 L2151.11 1394.21 L2167.11 1378.21 L2151.11 1362.21 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M2364 1426.39 L2348 1442.39 L2364 1458.39 L2380 1442.39 L2364 1426.39 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M2576.89 1514.91 L2560.89 1530.91 L2576.89 1546.91 L2592.89 1530.91 L2576.89 1514.91 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip533)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="447.993,1685.19 660.882,1685.19 660.882,1299.75 873.772,1299.75 873.772,1245.08 1086.66,1245.08 1086.66,1244.73 1299.55,1244.73 1299.55,1256.06 1512.44,1256.06 1512.44,1273.55 1725.33,1273.55 1725.33,1297.96 1938.22,1297.96 1938.22,1331.69 2151.11,1331.69 2151.11,1378.21 2364,1378.21 2364,1442.39 2576.89,1442.39 2576.89,1530.91 "></polyline>
<path clip-path="url(#clip533)" d="M447.993 1011.82 L431.993 1027.82 L447.993 1043.82 L463.993 1027.82 L447.993 1011.82 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M660.882 1446.94 L644.882 1462.94 L660.882 1478.94 L676.882 1462.94 L660.882 1446.94 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M873.772 1518.79 L857.772 1534.79 L873.772 1550.79 L889.772 1534.79 L873.772 1518.79 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M1086.66 1534.71 L1070.66 1550.71 L1086.66 1566.71 L1102.66 1550.71 L1086.66 1534.71 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M1299.55 1543.58 L1283.55 1559.58 L1299.55 1575.58 L1315.55 1559.58 L1299.55 1543.58 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M1512.44 1553.74 L1496.44 1569.74 L1512.44 1585.74 L1528.44 1569.74 L1512.44 1553.74 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M1725.33 1567.44 L1709.33 1583.44 L1725.33 1599.44 L1741.33 1583.44 L1725.33 1567.44 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M1938.22 1586.29 L1922.22 1602.29 L1938.22 1618.29 L1954.22 1602.29 L1938.22 1586.29 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M2151.11 1612.27 L2135.11 1628.27 L2151.11 1644.27 L2167.11 1628.27 L2151.11 1612.27 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M2364 1648.11 L2348 1664.11 L2364 1680.11 L2380 1664.11 L2364 1648.11 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip533)" d="M2576.89 1697.55 L2560.89 1713.55 L2576.89 1729.55 L2592.89 1713.55 L2576.89 1697.55 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip533)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="447.993,1027.82 660.882,1027.82 660.882,1462.94 873.772,1462.94 873.772,1534.79 1086.66,1534.79 1086.66,1550.71 1299.55,1550.71 1299.55,1559.58 1512.44,1559.58 1512.44,1569.74 1725.33,1569.74 1725.33,1583.44 1938.22,1583.44 1938.22,1602.29 2151.11,1602.29 2151.11,1628.27 2364,1628.27 2364,1664.11 2576.89,1664.11 2576.89,1713.55 "></polyline>
<path clip-path="url(#clip530)" d="M2296.77 1186.99 L2565.53 1186.99 L2565.53 1031.47 L2296.77 1031.47  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip530)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2296.77,1186.99 2565.53,1186.99 2565.53,1031.47 2296.77,1031.47 2296.77,1186.99 "></polyline>
<polyline clip-path="url(#clip530)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2321.84,1083.31 2472.29,1083.31 "></polyline>
<path clip-path="url(#clip530)" d="M2522.01 1074.67 L2512.64 1087.28 L2522.5 1100.59 L2517.48 1100.59 L2509.93 1090.41 L2502.38 1100.59 L2497.36 1100.59 L2507.43 1087.03 L2498.22 1074.67 L2503.24 1074.67 L2510.11 1083.9 L2516.99 1074.67 L2522.01 1074.67 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M2527.66 1098.05 L2532.38 1098.05 L2532.38 1083.9 L2527.22 1084.85 L2527.22 1082.17 L2532.54 1081.26 L2535.72 1081.26 L2535.72 1098.05 L2540.46 1098.05 L2540.46 1100.59 L2527.66 1100.59 L2527.66 1098.05 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip530)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2321.84,1135.15 2472.29,1135.15 "></polyline>
<path clip-path="url(#clip530)" d="M2522.01 1126.51 L2512.64 1139.12 L2522.5 1152.43 L2517.48 1152.43 L2509.93 1142.25 L2502.38 1152.43 L2497.36 1152.43 L2507.43 1138.87 L2498.22 1126.51 L2503.24 1126.51 L2510.11 1135.74 L2516.99 1126.51 L2522.01 1126.51 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip530)" d="M2530.25 1149.79 L2540.07 1149.79 L2540.07 1152.43 L2526.23 1152.43 L2526.23 1149.89 Q2527.01 1149.17 2528.47 1147.87 Q2536.43 1140.81 2536.43 1138.64 Q2536.43 1137.11 2535.23 1136.18 Q2534.03 1135.23 2532.06 1135.23 Q2530.85 1135.23 2529.44 1135.65 Q2528.03 1136.04 2526.36 1136.85 L2526.36 1134.01 Q2528.15 1133.36 2529.67 1133.04 Q2531.23 1132.71 2532.54 1132.71 Q2535.9 1132.71 2537.91 1134.24 Q2539.93 1135.77 2539.93 1138.27 Q2539.93 1141.48 2532.27 1148.06 Q2530.97 1149.17 2530.25 1149.79 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path></svg>
</div>
</div>
</div>
</section>
<section id="adding-the-constraints-on-states" class="level3">
<h3 class="anchored" data-anchor-id="adding-the-constraints-on-states">Adding the constraints on states</h3>
<p>We might feel a little bit uneasy about loosing an immediate access to <span class="math inline">\bar{\bm x}</span>. But the game is not lost. We just need to express <span class="math inline">\bar{\bm x}</span> as a function of <span class="math inline">\bar{\bm u}</span> and <span class="math inline">\mathbf x_0</span> and impose the constraint on the result. But such expression is already available, see (<a href="#eq-x_as_function_of_u_and_x0" class="quarto-xref">Eq.&nbsp;2</a>). Therefore, we can formulate the constraint, say, an upper bound on the state vector <span class="math display">
\bm x_k \leq \mathbf x_\mathrm{max}
</span> as <span class="math display">
\bar{\mathbf x}^\mathrm{min} \leq \widehat{\mathbf C} \bar{\bm u} + \widehat{\mathbf A} \mathbf x_0 \leq \bar{\mathbf x}^\mathrm{max},
</span> where the the bars in <span class="math inline">\bar{\mathbf x}^\mathrm{min}</span> and <span class="math inline">\bar{\mathbf x}^\mathrm{max}</span> obviously indicates that these vectors were obtained by stacking the corresponding vectors for all times <span class="math inline">k=1,\ldots,N</span>.</p>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/hurak\.github\.io\/orr\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./discr_dir_general.html" class="pagination-link" aria-label="General finite-horizon nonlinear optimal control as an NLP">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">General finite-horizon nonlinear optimal control as an NLP</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./discr_dir_mpc.html" class="pagination-link" aria-label="Model predictive control (MPC)">
        <span class="nav-page-text">Model predictive control (MPC)</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2025, Zdeněk Hurák</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/hurak/orr/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>