<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Finite-horizon LQR as a QP – B(E)3M35ORR – Optimal and Robust Control</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./discr_dir_mpc.html" rel="next">
<link href="./discr_dir_general.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-06484fad4722108f498d8c00c46b7438.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./discr_dir_goals.html">3. Discrete-time optimal control – direct approach</a></li><li class="breadcrumb-item"><a href="./discr_dir_LQR.html">Finite-horizon LQR as a QP</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">B(E)3M35ORR – Optimal and Robust Control</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">0. Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">What is optimal and robust control?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_outline.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course outline</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_rules.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Rules of the course</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Software for the course</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literature for the course</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_similar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Similar courses</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_projects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Projects</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">1. Optimization – theory</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_theory_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_theory_problems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Optimization problems</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_theory_reformulations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Problem reformulations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_theory_unconstrained.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unconstrained optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_theory_constrained.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Constrained optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_theory_modellers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Optimization modelling languages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_theory_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_theory_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">2. Optimization – algorithms</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_algo_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_algo_derivatives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Computing the derivatives</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_algo_unconstrained.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unconstrained optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_algo_constrained.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Constrained optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_algo_solvers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Numerical solvers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_algo_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opt_algo_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">3. Discrete-time optimal control – direct approach</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General finite-horizon nonlinear optimal control as an NLP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_LQR.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Finite-horizon LQR as a QP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_mpc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Model predictive control (MPC)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_mpc_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Numerical solvers for MPC</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">4. Discrete-time optimal control – indirect approach</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_indir_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_indir_general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General finite-horizon nonlinear optimal control as a TP-BVP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_indir_LQR_fin_horizon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Discrete-time LQR on a finite horizon</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_indir_LQR_inf_horizon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Discrete-time LQR on an infinite horizon using the DARE</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_indir_LQR_tracking.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reference tracking using LQR</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_indir_DARE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Discrete-time algebraic Riccati equation (DARE)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_indir_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Software for discrete-time LQR and DARE</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_indir_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_indir_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">5. Discrete-time optimal control – dynamic programming (DP)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_programming_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">DP and discrete-time optimal control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_programming_tabular.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tabular outcomes of DP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_programming_LQR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LQR via DP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_programming_LQT.qmd" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LQ tracking via DP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_programming_DDP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Differential dynamic programming (DDP)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_programming_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_programming_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">6. More on MPC</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_mpc_stability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Stability of MPC</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_mpc_recursive_feasibility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Recursive feasibility</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_mpc_economic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Economic MPC</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_mpc_explicit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Explicit MPC</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_mpc_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discr_dir_mpc_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">7. Continuous-time optimal control - indirect approach via calculus of variations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview of continuous-time optimal control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_calculus_of_variations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Calculus of variations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_via_calculus_of_variations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General finite-horizon nonlinear optimal control as a TP-BVP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_LQR_fin_horizon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LQR on a finite time horizon</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_LQR_inf_horizon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LQR on an infinite time horizon using the CARE</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_notation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">On notation for Hamiltonians and variations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_trajectory_stabilization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Trajectory stabilization and neigboring extremals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Software for continuous-time LQR and CARE</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">8. Continuous-time optimal control - indirect approach via Pontryagin’s maximum principle</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_goals_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_Pontryagin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pontryagin’s maximum (or minimum) principle</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_free_final_time.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Optimal control with a free final time</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_time_optimal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time-optimal control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_references_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_indir_hw_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true">
 <span class="menu-text">9. Numerical methods for continuous-time optimal control - both indirect and direct approaches</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_numerical_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_numerical_indirect.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Numerical methods for indirect approach</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_numerical_direct.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Numerical methods for direct approach</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_numerical_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Software</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_numerical_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_numerical_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="true">
 <span class="menu-text">9.X. Continuous-time optimal control – dynamic programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_dp_HJB.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dynamic programming for continuous-time optimal control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_dp_LQR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using HJB equation to solve the continuous-time LQR problem</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_dp_DDP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Differential dynamic programming (DDP)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_dp_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cont_dp_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true">
 <span class="menu-text">10. Some extensions: LQG, LTR, H2</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ext_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ext_LQR_margins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guaranteed GM and PM for LQR</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ext_stochastic_LQR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LQR for stochastic systems</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ext_LQG.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LQG control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ext_LTR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Loop transfer recovery (LTR)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ext_H2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">H2-optimal control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ext_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Software</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ext_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ext_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="true">
 <span class="menu-text">11. Uncertainty modelling and robustness analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./roban_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./roban_uncertainty.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Uncertainty (in) modelling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./roban_unstructured.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Robustness analysis for unstructured uncertainty</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./roban_structured.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Robustness analysis for structured uncertainty</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./roban_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Software</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./roban_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./roban_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" role="navigation" aria-expanded="true">
 <span class="menu-text">12. Robust control</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-14" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rocond_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rocond_mixed_sensitivity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mixed sensitivity design</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rocond_H_infinity_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">H-infinity optimal control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rocond_mu_synthesis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">mu synthesis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rocond_H_infinity_loopshaping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">H-infinity loop-shaping</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rocond_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Software</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rocond_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rocond_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" role="navigation" aria-expanded="true">
 <span class="menu-text">13. Limitations of achievable performance</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-15" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./limitations_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./limitations_SISO.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Limitations for SISO systems</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./limitations_MIMO.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Limitations for MIMO systems</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./limitations_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./limitations_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-16" role="navigation" aria-expanded="true">
 <span class="menu-text">14. Model and controller order reduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-16" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-16" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reduction_order_goals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning goals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reduction_order_model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Model order reduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reduction_order_controller.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Controller order reduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reduction_order_benchmarks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Benchmarks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reduction_order_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reduction_order_hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#simultaneous-sparse-formulation" id="toc-simultaneous-sparse-formulation" class="nav-link active" data-scroll-target="#simultaneous-sparse-formulation">Simultaneous (sparse) formulation</a>
  <ul class="collapse">
  <li><a href="#adding-constraints-on-controls-and-states" id="toc-adding-constraints-on-controls-and-states" class="nav-link" data-scroll-target="#adding-constraints-on-controls-and-states">Adding constraints on controls and states</a></li>
  </ul></li>
  <li><a href="#sequential-dense-formulation" id="toc-sequential-dense-formulation" class="nav-link" data-scroll-target="#sequential-dense-formulation">Sequential (dense) formulation</a>
  <ul class="collapse">
  <li><a href="#adding-the-constraints-on-controls" id="toc-adding-the-constraints-on-controls" class="nav-link" data-scroll-target="#adding-the-constraints-on-controls">Adding the constraints on controls</a></li>
  <li><a href="#adding-the-constraints-on-states" id="toc-adding-the-constraints-on-states" class="nav-link" data-scroll-target="#adding-the-constraints-on-states">Adding the constraints on states</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/hurak/orr/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./discr_dir_goals.html">3. Discrete-time optimal control – direct approach</a></li><li class="breadcrumb-item"><a href="./discr_dir_LQR.html">Finite-horizon LQR as a QP</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Finite-horizon LQR as a QP</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/1MHV-L4--lI?si=6Orm_cGxmTAX_myT" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<p>Here we specialize the general procedure from the previous section to the case of a <strong>L</strong>inear system and a <strong>Q</strong>uadratic cost. We start by considering a simple problem of <strong>R</strong>egulation, wherein the goal is to bring the system either exactly or approximately to zero final state, that is, <span class="math inline">\mathbf x^\text{ref}=\mathbf 0</span> and we want <span class="math inline">\bm x_N=\mathbf x^\text{ref}</span> or <span class="math inline">\bm x_N\approx\mathbf x^\text{ref}</span>, respectively. The problem is known as the <strong>LQR</strong> problem. <span class="math display">
\begin{aligned}
\operatorname*{minimize}_{\bm u_0,\ldots, \bm u_{N-1}, \bm x_{0},\ldots, \bm x_N} &amp;\quad  \frac{1}{2} \bm x_N^\top \mathbf S \bm x_N + \frac{1}{2} \sum_{k=0}^{N-1} \left(\bm x_k^\top \mathbf Q \bm x_k + \bm u_k^\top \mathbf R \bm u_k \right)\\
\text{subject to}   &amp;\quad \bm x_{k+1} = \mathbf A\bm x_k + \mathbf B\bm u_k,\quad k = 0, \ldots, N-1, \\
                    &amp;\quad \bm x_0 = \mathbf x_0,\\
                    &amp;\quad \bm x_N = \mathbf 0\;  (\text{or}\, \bm x_N \approx \mathbf 0).
\end{aligned}
</span></p>
<p>Referring to the two options for the last constraint,</p>
<ul>
<li>if the condition <span class="math inline">\bm x_N=\mathbf 0</span> on the final state is strictly enforced, the terminal state cost (the term <span class="math inline">\frac{1}{2} \bm x_N^\top \mathbf S \bm x_N</span> in the cost function) is redundant and can be removed;</li>
<li>if the final state condition can be relaxed to <span class="math inline">\bm x_N\approx\mathbf 0</span>, it is by increasing the weight <span class="math inline">\mathbf S</span> in the terminal cost function <span class="math inline">\frac{1}{2} \bm x_N^\top \mathbf S \bm x_N</span> that <span class="math inline">\bm x_N</span> can be made arbitrarily close to <span class="math inline">\mathbf 0</span>.</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>It is a standard dilemma in optimization, not only in optimal control, that if we want to satisfy some requirement, we can either strictly enforce it through constraints or we can seemingly relax it and set a cost to be paid for not satysfying it.</p>
</div>
</div>
<section id="simultaneous-sparse-formulation" class="level2">
<h2 class="anchored" data-anchor-id="simultaneous-sparse-formulation">Simultaneous (sparse) formulation</h2>
<p>Below we rewrite the latter problem, that is, <span class="math inline">\bm x_N\approx\mathbf 0</span>, in the “unrolled” form, where we stack the state and control variables into “long” vectors <span class="math inline">\bar{\bm x}</span> and <span class="math inline">\bar{\bm u}</span>. Doing the same for the former is straightforward. <span class="math display">
\begin{aligned}
\operatorname*{minimize}_{\bar{\bm u},\bar{\bm x}} &amp; \frac{1}{2}\left(\begin{bmatrix} \bm x_1^\top &amp; \bm x_2^\top &amp; \ldots &amp; \bm x_N^\top \end{bmatrix}
\underbrace{\begin{bmatrix}\mathbf Q &amp; &amp; &amp; \\ &amp; \mathbf Q &amp; &amp;\\ &amp; &amp;\ddots &amp; \\ &amp; &amp; &amp; \mathbf S \end{bmatrix}}_{\overline{\mathbf Q}}
\underbrace{\begin{bmatrix} \bm x_1 \\ \bm x_2 \\ \vdots \\ \bm x_N \end{bmatrix}}_{\bar{\bm x}}\right.\\
&amp;\qquad +\left.
\begin{bmatrix} \bm u_0^\top &amp; \bm u_1^\top &amp; \ldots &amp; \bm u_{N-1}^\top \end{bmatrix}
\underbrace{\begin{bmatrix}\mathbf R &amp; &amp; &amp; \\ &amp; \mathbf R &amp; &amp;\\ &amp; &amp;\ddots &amp; \\ &amp; &amp; &amp; \mathbf R \end{bmatrix}}_{\overline{\mathbf R}}
\underbrace{\begin{bmatrix} \bm u_0 \\ \bm u_1 \\ \vdots \\ \bm u_{N-1} \end{bmatrix}}_{\bar{\bm u}}\right)
+ \underbrace{\frac{1}{2}\mathbf x_0^\top \mathbf Q \mathbf x_0}_{\mathrm{constant}}
\end{aligned}
</span> subject to <span class="math display">
\begin{bmatrix} \bm x_1 \\ \bm x_2 \\ \bm x_3\\ \vdots \\ \bm x_N \end{bmatrix} = \underbrace{\begin{bmatrix}\mathbf 0 &amp; &amp; &amp; &amp;\\\mathbf A &amp; \mathbf 0 &amp; &amp; &amp;\\ &amp;\mathbf A &amp;\mathbf 0 &amp; &amp; \\ &amp; &amp; &amp;\ddots &amp; \\&amp; &amp; &amp;\mathbf A &amp; \mathbf 0 \end{bmatrix}}_{\overline{\mathbf A}}
\begin{bmatrix} \bm x_1 \\ \bm x_2 \\ \bm x_3\\ \vdots \\ \bm x_N \end{bmatrix} + \underbrace{\begin{bmatrix}\mathbf B &amp; &amp; &amp; &amp; \\ &amp; \mathbf B &amp; &amp; &amp; \\&amp; &amp;\mathbf B &amp; \\ &amp; &amp; &amp;\ddots \\ &amp; &amp; &amp; &amp; \mathbf B \end{bmatrix}}_{\overline{\mathbf B}}\begin{bmatrix} \bm u_0 \\ \bm u_1 \\ \bm u_2\\\vdots \\ \bm u_{N-1} \end{bmatrix} + \underbrace{\begin{bmatrix}\mathbf A\\\mathbf 0\\\mathbf 0\\\vdots\\\mathbf 0\end{bmatrix}}_{\overline{\mathbf A}_0}\mathbf x_0,    
</span></p>
<p>in which we have already substituted the particular <span class="math inline">\mathbf x_0</span> for the variable <span class="math inline">\bm x_0</span>. Consequently, the last term in the cost function can be discarded because it is constant.</p>
<p>The terms with the <span class="math inline">\bar{\bm x}</span> vector can be combined and we get <span id="eq-linear_system_linear_constraints_matrix_format"><span class="math display">
\begin{bmatrix} \mathbf 0 \\ \mathbf 0 \\ \mathbf 0\\ \vdots \\ \mathbf 0 \end{bmatrix} = \underbrace{\begin{bmatrix}-\mathbf I &amp; &amp; &amp; &amp;\\\mathbf A &amp; -\mathbf I &amp; &amp; &amp;\\ &amp;\mathbf A &amp;-\mathbf I &amp; &amp; \\ &amp; &amp; &amp;\ddots &amp; \\&amp; &amp; &amp;\mathbf A &amp; -\mathbf I \end{bmatrix}}_{\overline{\mathbf A} - \mathbf I}
\begin{bmatrix} \mathbf x_1 \\ \mathbf x_2 \\ \mathbf x_3\\ \vdots \\ \mathbf x_N \end{bmatrix} + \underbrace{\begin{bmatrix}\mathbf B &amp; &amp; &amp; &amp; \\ &amp; \mathbf B &amp; &amp; &amp; \\&amp; &amp;\mathbf B &amp; \\ &amp; &amp; &amp;\ddots \\ &amp; &amp; &amp; &amp; \mathbf B \end{bmatrix}}_{\overline{\mathbf B}}\begin{bmatrix} \mathbf u_0 \\ \mathbf u_1 \\ \mathbf u_2\\\vdots \\ \mathbf u_{N-1} \end{bmatrix} + \underbrace{\begin{bmatrix}\mathbf A\\\mathbf 0\\\mathbf 0\\\vdots\\\mathbf 0\end{bmatrix}}_{\overline{\mathbf A}_0}\mathbf x_0.
\tag{1}</span></span></p>
<p>Upon stacking the two “long” vectors into <span class="math inline">\bar{\bm z}</span> we reformulate the optimization problem as <span class="math display">
\operatorname*{minimize}_{\widetilde{\mathbf z}\in\mathbb{R}^{2N}}\quad \frac{1}{2}\underbrace{\begin{bmatrix}\bar{\bm x}^\top &amp;\bar{\bm u}^\top\end{bmatrix}}_{\bar{\bm z}^\top} \underbrace{\begin{bmatrix}\overline{\mathbf Q} &amp; \\ &amp; \overline{\mathbf R} \end{bmatrix}}_{\widetilde{\mathbf Q}}\underbrace{\begin{bmatrix}\bar{\bm x}\\\bar{\bm u}\end{bmatrix}}_{\bar{\bm z}}
</span> subject to <span class="math display">
\mathbf 0 = \underbrace{\begin{bmatrix}(\overline{\mathbf A}-\mathbf I) &amp; \overline{\mathbf B}\end{bmatrix}}_{\widetilde{\mathbf A}}\underbrace{\begin{bmatrix}\bar{\bm x}\\\bar{\bm u}\end{bmatrix}}_{\bar{\bm z}} + \underbrace{\overline{\mathbf A}_0 \mathbf x_0}_{\tilde{\mathbf b}}.
</span></p>
<p>To summarize, we have reformulated the optimal control problem as a linearly constrained quadratic program <span class="math display">
\boxed{
\begin{aligned}
\underset{\bar{\bm z}\in\mathbb{R}^{2N}}{\text{minimize}} &amp;\quad \frac{1}{2}\bar{\bm z}^\top \widetilde{\mathbf Q} \bar{\bm z}\\
\text{subject to} &amp;\quad \widetilde{\mathbf A} \bar{\bm z} + \tilde{\bm b} = \mathbf 0.
\end{aligned}}
</span></p>
<p>This constrained optimization problem can still be solved without invoking a numerical solver for solving quadratic programs (QP). We do it by introducing a vector <span class="math inline">\boldsymbol\lambda</span> of Lagrange multipliers to form the Lagrangian function <span class="math display">
\mathcal{L}(\bar{\bm z}, \boldsymbol \lambda) = \frac{1}{2}\bar{\bm z}^\top \widetilde{\mathbf Q} \bar{\bm z} + \boldsymbol\lambda^\top(\widetilde{\mathbf A} \bar{\bm z} + \tilde{\mathbf b}),
</span> for which the gradients with respect to <span class="math inline">\bar{\bm z}</span> and <span class="math inline">\boldsymbol\lambda</span> are <span class="math display">
\begin{aligned}
\nabla_{\tilde{\bm{z}}} \mathcal{L}(\bar{\bm z}, \boldsymbol\lambda) &amp;= \widetilde{\mathbf Q}\bar{\bm z} + \tilde{\mathbf A}^\top\boldsymbol\lambda,\\
\nabla_{\boldsymbol{\lambda}} \mathcal{L}(\tilde{\bm x}, \boldsymbol\lambda) &amp;=\widetilde{\mathbf A} \bar{\bm z} + \tilde{\mathbf b}.
\end{aligned}
</span></p>
<p>Requiring that the overall gradient vanishes leads to the following KKT set of linear equations <span class="math display">
\begin{bmatrix}
  \widetilde{\mathbf Q} &amp; \widetilde{\mathbf A}^\top\\ \widetilde{\mathbf A} &amp; \mathbf 0
\end{bmatrix}
\begin{bmatrix}
\bar{\bm z}\\\boldsymbol\lambda
\end{bmatrix}
=
\begin{bmatrix}
\mathbf 0\\ -\tilde{\mathbf b}
\end{bmatrix}.
</span></p>
<p>Solving this could be accomplished by using some general solver for linear systems or by using some more tailored solver for symmetric indefinite systems (based on <a href="https://en.wikipedia.org/wiki/Cholesky_decomposition#LDL_decomposition">LDL factorization</a>).</p>
<div id="exm-direct-simultaneous" class="theorem example">
<p><span class="theorem-title"><strong>Example 1 (Reformulating the unconstrained LQR problem as a system of linear equations – simultaneous approach)</strong></span> &nbsp;</p>
<div id="2" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">BlockArrays</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LinearAlgebra</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LinearSolve</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">QDLDL</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Random</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="bu">Random</span>.<span class="fu">seed!</span>(<span class="fl">1234</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">SparseArrays</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">direct_dlqr_simultaneous</span>(A,B,x₀,Q,R,S,N)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="fu">size</span>(A)[<span class="fl">1</span>]</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    m <span class="op">=</span> <span class="fu">size</span>(B)[<span class="fl">2</span>]</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    Q̄ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>n,N<span class="op">*</span>n),<span class="fu">repeat</span>([n],N),<span class="fu">repeat</span>([n],N))</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>(N<span class="op">-</span><span class="fl">1</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>        Q̄[<span class="fu">Block</span>(i,i)] <span class="op">=</span> Q</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    Q̄[<span class="fu">Block</span>(N,N)] <span class="op">=</span> S</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    R̄ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>m,N<span class="op">*</span>m),<span class="fu">repeat</span>([m],N),<span class="fu">repeat</span>([m],N))</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>N</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        R̄[<span class="fu">Block</span>(i,i)] <span class="op">=</span> R</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    Q̃ <span class="op">=</span> <span class="fu">blockdiag</span>(<span class="fu">sparse</span>(Q̄),<span class="fu">sparse</span>(R̄))              <span class="co"># The matrix defining the quadratic cost.</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    B̄ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>n,N<span class="op">*</span>m),<span class="fu">repeat</span>([n],N),<span class="fu">repeat</span>([m],N))</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>N</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>        B̄[<span class="fu">Block</span>(i,i)] <span class="op">=</span> B</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    Ā <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">sparse</span>(<span class="op">-</span><span class="fl">1.0</span><span class="op">*</span>I,n<span class="op">*</span>N,n<span class="op">*</span>N),<span class="fu">repeat</span>([n],N),<span class="fu">repeat</span>([n],N))</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">2</span><span class="op">:</span>N</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>        Ā[<span class="fu">Block</span>(i,(i<span class="op">-</span><span class="fl">1</span>))] <span class="op">=</span> A</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    Ã <span class="op">=</span> <span class="fu">sparse</span>([Ā B̄])                               <span class="co"># The matrix defining the linear (affine) equation.</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    Ā₀ <span class="op">=</span> <span class="fu">spzeros</span>(n<span class="op">*</span>N,n)</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    Ā₀[<span class="fl">1</span><span class="op">:</span>n,<span class="fl">1</span><span class="op">:</span>n] <span class="op">=</span> A</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    b̃ <span class="op">=</span> <span class="fu">Ā₀*sparse</span>(x₀)                               <span class="co"># The constant offset for the linear (affine) equation.</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    K <span class="op">=</span> [Q̃ Ã<span class="ch">'; Ã spzeros(size(Ã,1),size(Ã,1))]      # Sparse KKT matrix.</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    k <span class="op">=</span> [<span class="fu">spzeros</span>(<span class="fu">size</span>(Q̃,<span class="fl">1</span>)); <span class="op">-</span>b̃]                    <span class="co"># Right hand side of the KKT system</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    prob <span class="op">=</span> <span class="fu">LinearProblem</span>(K,k)                       <span class="co"># The KKT system as a linear problem.</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    z̃λ <span class="op">=</span> LinearSolve.<span class="fu">solve</span>(prob)                    <span class="co"># Solving the KKT system. Ready for trying various solvers.</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    xopt <span class="op">=</span> <span class="fu">reshape</span>(z̃λ[<span class="fl">1</span><span class="op">:</span>(n<span class="op">*</span>N)],(n,<span class="op">:</span>))</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    uopt <span class="op">=</span> <span class="fu">reshape</span>(z̃λ[(n<span class="op">*</span>N<span class="op">+</span><span class="fl">1</span>)<span class="op">:</span>(n<span class="op">+</span>m)<span class="op">*</span>N],(m,<span class="op">:</span>))</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>    return xopt,uopt</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="fl">2</span>               <span class="co"># Number of state variables.</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> <span class="fl">1</span>               <span class="co"># Number of (control) input variables. </span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> <span class="fu">rand</span>(n,n)       <span class="co"># State matrix.</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> <span class="fu">rand</span>(n,m)       <span class="co"># Input coupling matrix.</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>x₀ <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">3.0</span>]     <span class="co"># Initial state.</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="fl">10</span>              <span class="co"># Time horizon.</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">2.0</span>]      </span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">2.0</span>]</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> [<span class="fl">1.0</span>]</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>S <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>s)     <span class="co"># Matrix defining the terminal state cost.</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>Q <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>q)     <span class="co"># Matrix defining the running state dost.</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>R <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>r)     <span class="co"># Matrix defining the cost of control.</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>xopt,uopt <span class="op">=</span> <span class="fu">direct_dlqr_simultaneous</span>(A,B,x₀,Q,R,S,N)</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Plots</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>p1 <span class="op">=</span> <span class="fu">plot</span>(<span class="fl">0</span><span class="op">:</span>(N<span class="op">-</span><span class="fl">1</span>),uopt<span class="op">'</span>,marker<span class="op">=:</span>diamond,label<span class="op">=</span><span class="st">"u"</span>,linetype<span class="op">=:</span>steppost)</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"k"</span>)</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"u"</span>)</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>p2 <span class="op">=</span> <span class="fu">plot</span>(<span class="fl">0</span><span class="op">:</span>N,<span class="fu">hcat</span>(x₀,xopt)<span class="ch">',marker=:diamond,label=["x₁" "x₂"],linetype=:steppost)</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"k"</span>)</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"x"</span>)</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(p1,p2,layout<span class="op">=</span>(<span class="fl">2</span>,<span class="fl">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="1">
<!--?xml version="1.0" encoding="utf-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="672" height="480" viewbox="0 0 2688 1920">
<defs>
  <clippath id="clip950">
    <rect x="0" y="0" width="2688" height="1920"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip950)" d="M0 1920 L2688 1920 L2688 0 L0 0  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip951">
    <rect x="537" y="0" width="1883" height="1883"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip950)" d="M217.599 774.117 L2640.76 774.117 L2640.76 47.2441 L217.599 47.2441  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip952">
    <rect x="217" y="47" width="2424" height="728"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip952)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="286.179,774.117 286.179,47.2441 "></polyline>
<polyline clip-path="url(#clip952)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="794.178,774.117 794.178,47.2441 "></polyline>
<polyline clip-path="url(#clip952)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1302.18,774.117 1302.18,47.2441 "></polyline>
<polyline clip-path="url(#clip952)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1810.18,774.117 1810.18,47.2441 "></polyline>
<polyline clip-path="url(#clip952)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2318.18,774.117 2318.18,47.2441 "></polyline>
<polyline clip-path="url(#clip952)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="217.599,673.398 2640.76,673.398 "></polyline>
<polyline clip-path="url(#clip952)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="217.599,471.406 2640.76,471.406 "></polyline>
<polyline clip-path="url(#clip952)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="217.599,269.414 2640.76,269.414 "></polyline>
<polyline clip-path="url(#clip952)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="217.599,67.4223 2640.76,67.4223 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,774.117 2640.76,774.117 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="286.179,774.117 286.179,755.219 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="794.178,774.117 794.178,755.219 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1302.18,774.117 1302.18,755.219 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1810.18,774.117 1810.18,755.219 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2318.18,774.117 2318.18,755.219 "></polyline>
<path clip-path="url(#clip950)" d="M286.179 807.34 Q282.568 807.34 280.739 810.904 Q278.934 814.446 278.934 821.576 Q278.934 828.682 280.739 832.247 Q282.568 835.789 286.179 835.789 Q289.813 835.789 291.619 832.247 Q293.447 828.682 293.447 821.576 Q293.447 814.446 291.619 810.904 Q289.813 807.34 286.179 807.34 M286.179 803.636 Q291.989 803.636 295.045 808.242 Q298.123 812.826 298.123 821.576 Q298.123 830.303 295.045 834.909 Q291.989 839.492 286.179 839.492 Q280.369 839.492 277.29 834.909 Q274.234 830.303 274.234 821.576 Q274.234 812.826 277.29 808.242 Q280.369 803.636 286.179 803.636 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M788.831 834.886 L805.15 834.886 L805.15 838.821 L783.206 838.821 L783.206 834.886 Q785.868 832.131 790.451 827.502 Q795.058 822.849 796.238 821.506 Q798.484 818.983 799.363 817.247 Q800.266 815.488 800.266 813.798 Q800.266 811.043 798.322 809.307 Q796.4 807.571 793.299 807.571 Q791.1 807.571 788.646 808.335 Q786.215 809.099 783.438 810.65 L783.438 805.928 Q786.262 804.793 788.715 804.215 Q791.169 803.636 793.206 803.636 Q798.576 803.636 801.771 806.321 Q804.965 809.006 804.965 813.497 Q804.965 815.627 804.155 817.548 Q803.368 819.446 801.262 822.039 Q800.683 822.71 797.581 825.928 Q794.479 829.122 788.831 834.886 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M1305.19 808.335 L1293.38 826.784 L1305.19 826.784 L1305.19 808.335 M1303.96 804.261 L1309.84 804.261 L1309.84 826.784 L1314.77 826.784 L1314.77 830.673 L1309.84 830.673 L1309.84 838.821 L1305.19 838.821 L1305.19 830.673 L1289.59 830.673 L1289.59 826.159 L1303.96 804.261 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M1810.58 819.678 Q1807.43 819.678 1805.58 821.83 Q1803.75 823.983 1803.75 827.733 Q1803.75 831.46 1805.58 833.636 Q1807.43 835.789 1810.58 835.789 Q1813.73 835.789 1815.56 833.636 Q1817.41 831.46 1817.41 827.733 Q1817.41 823.983 1815.56 821.83 Q1813.73 819.678 1810.58 819.678 M1819.86 805.025 L1819.86 809.284 Q1818.11 808.451 1816.3 808.011 Q1814.52 807.571 1812.76 807.571 Q1808.13 807.571 1805.67 810.696 Q1803.24 813.821 1802.9 820.141 Q1804.26 818.127 1806.32 817.062 Q1808.38 815.974 1810.86 815.974 Q1816.07 815.974 1819.08 819.145 Q1822.11 822.293 1822.11 827.733 Q1822.11 833.057 1818.96 836.275 Q1815.81 839.492 1810.58 839.492 Q1804.59 839.492 1801.42 834.909 Q1798.24 830.303 1798.24 821.576 Q1798.24 813.381 1802.13 808.52 Q1806.02 803.636 1812.57 803.636 Q1814.33 803.636 1816.11 803.983 Q1817.92 804.33 1819.86 805.025 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M2318.18 822.409 Q2314.84 822.409 2312.92 824.191 Q2311.02 825.974 2311.02 829.099 Q2311.02 832.224 2312.92 834.006 Q2314.84 835.789 2318.18 835.789 Q2321.51 835.789 2323.43 834.006 Q2325.35 832.201 2325.35 829.099 Q2325.35 825.974 2323.43 824.191 Q2321.53 822.409 2318.18 822.409 M2313.5 820.418 Q2310.49 819.678 2308.8 817.617 Q2307.13 815.557 2307.13 812.594 Q2307.13 808.451 2310.07 806.043 Q2313.04 803.636 2318.18 803.636 Q2323.34 803.636 2326.28 806.043 Q2329.22 808.451 2329.22 812.594 Q2329.22 815.557 2327.53 817.617 Q2325.86 819.678 2322.88 820.418 Q2326.25 821.205 2328.13 823.497 Q2330.03 825.789 2330.03 829.099 Q2330.03 834.122 2326.95 836.807 Q2323.89 839.492 2318.18 839.492 Q2312.46 839.492 2309.38 836.807 Q2306.32 834.122 2306.32 829.099 Q2306.32 825.789 2308.22 823.497 Q2310.12 821.205 2313.5 820.418 M2311.79 813.034 Q2311.79 815.719 2313.45 817.224 Q2315.14 818.729 2318.18 818.729 Q2321.19 818.729 2322.88 817.224 Q2324.59 815.719 2324.59 813.034 Q2324.59 810.349 2322.88 808.844 Q2321.19 807.34 2318.18 807.34 Q2315.14 807.34 2313.45 808.844 Q2311.79 810.349 2311.79 813.034 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M1413.36 873.776 L1419.25 873.776 L1419.25 903.026 L1436.72 887.653 L1444.2 887.653 L1425.29 904.331 L1445 923.301 L1437.36 923.301 L1419.25 905.891 L1419.25 923.301 L1413.36 923.301 L1413.36 873.776 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,774.117 217.599,47.2441 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,673.398 236.497,673.398 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,471.406 236.497,471.406 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,269.414 236.497,269.414 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,67.4223 236.497,67.4223 "></polyline>
<path clip-path="url(#clip950)" d="M116.214 673.849 L145.89 673.849 L145.89 677.784 L116.214 677.784 L116.214 673.849 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M170.149 672.044 Q173.506 672.761 175.381 675.03 Q177.279 677.298 177.279 680.631 Q177.279 685.747 173.76 688.548 Q170.242 691.349 163.76 691.349 Q161.585 691.349 159.27 690.909 Q156.978 690.493 154.524 689.636 L154.524 685.122 Q156.469 686.256 158.784 686.835 Q161.098 687.414 163.622 687.414 Q168.02 687.414 170.311 685.678 Q172.626 683.942 172.626 680.631 Q172.626 677.576 170.473 675.863 Q168.344 674.127 164.524 674.127 L160.497 674.127 L160.497 670.284 L164.71 670.284 Q168.159 670.284 169.987 668.919 Q171.816 667.53 171.816 664.937 Q171.816 662.275 169.918 660.863 Q168.043 659.428 164.524 659.428 Q162.603 659.428 160.404 659.845 Q158.205 660.261 155.566 661.141 L155.566 656.974 Q158.228 656.233 160.543 655.863 Q162.881 655.493 164.941 655.493 Q170.265 655.493 173.367 657.923 Q176.469 660.331 176.469 664.451 Q176.469 667.321 174.825 669.312 Q173.182 671.28 170.149 672.044 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M117.164 471.857 L146.839 471.857 L146.839 475.792 L117.164 475.792 L117.164 471.857 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M160.96 484.751 L177.279 484.751 L177.279 488.686 L155.335 488.686 L155.335 484.751 Q157.997 481.996 162.58 477.367 Q167.186 472.714 168.367 471.371 Q170.612 468.848 171.492 467.112 Q172.395 465.353 172.395 463.663 Q172.395 460.908 170.45 459.172 Q168.529 457.436 165.427 457.436 Q163.228 457.436 160.774 458.2 Q158.344 458.964 155.566 460.515 L155.566 455.793 Q158.39 454.658 160.844 454.08 Q163.298 453.501 165.335 453.501 Q170.705 453.501 173.899 456.186 Q177.094 458.871 177.094 463.362 Q177.094 465.492 176.284 467.413 Q175.497 469.311 173.39 471.904 Q172.811 472.575 169.71 475.792 Q166.608 478.987 160.96 484.751 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M116.793 269.865 L146.469 269.865 L146.469 273.801 L116.793 273.801 L116.793 269.865 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M157.372 282.759 L165.01 282.759 L165.01 256.393 L156.7 258.06 L156.7 253.801 L164.964 252.134 L169.64 252.134 L169.64 282.759 L177.279 282.759 L177.279 286.694 L157.372 286.694 L157.372 282.759 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M165.335 53.221 Q161.723 53.221 159.895 56.7857 Q158.089 60.3274 158.089 67.457 Q158.089 74.5634 159.895 78.1282 Q161.723 81.6699 165.335 81.6699 Q168.969 81.6699 170.774 78.1282 Q172.603 74.5634 172.603 67.457 Q172.603 60.3274 170.774 56.7857 Q168.969 53.221 165.335 53.221 M165.335 49.5173 Q171.145 49.5173 174.2 54.1237 Q177.279 58.707 177.279 67.457 Q177.279 76.1838 174.2 80.7903 Q171.145 85.3736 165.335 85.3736 Q159.524 85.3736 156.446 80.7903 Q153.39 76.1838 153.39 67.457 Q153.39 58.707 156.446 54.1237 Q159.524 49.5173 165.335 49.5173 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M47.5702 425.608 L25.9905 425.608 L25.9905 419.752 L47.3474 419.752 Q52.4082 419.752 54.9545 417.778 Q57.4689 415.805 57.4689 411.858 Q57.4689 407.116 54.4452 404.378 Q51.4215 401.609 46.2016 401.609 L25.9905 401.609 L25.9905 395.753 L61.6384 395.753 L61.6384 401.609 L56.1639 401.609 Q59.4104 403.742 61.0019 406.575 Q62.5615 409.376 62.5615 413.1 Q62.5615 419.242 58.742 422.425 Q54.9226 425.608 47.5702 425.608 M25.1311 410.872 L25.1311 410.872 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip952)" d="M286.179 737.545 L270.179 753.545 L286.179 769.545 L302.179 753.545 L286.179 737.545 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip952)" d="M540.179 371.179 L524.179 387.179 L540.179 403.179 L556.179 387.179 L540.179 371.179 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip952)" d="M794.178 197.446 L778.178 213.446 L794.178 229.446 L810.178 213.446 L794.178 197.446 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip952)" d="M1048.18 117.595 L1032.18 133.595 L1048.18 149.595 L1064.18 133.595 L1048.18 117.595 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip952)" d="M1302.18 81.3175 L1286.18 97.3175 L1302.18 113.318 L1318.18 97.3175 L1302.18 81.3175 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip952)" d="M1556.18 64.9075 L1540.18 80.9075 L1556.18 96.9075 L1572.18 80.9075 L1556.18 64.9075 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip952)" d="M1810.18 57.4911 L1794.18 73.4911 L1810.18 89.4911 L1826.18 73.4911 L1810.18 57.4911 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip952)" d="M2064.18 54.1283 L2048.18 70.1283 L2064.18 86.1283 L2080.18 70.1283 L2064.18 54.1283 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip952)" d="M2318.18 52.5771 L2302.18 68.5771 L2318.18 84.5771 L2334.18 68.5771 L2318.18 52.5771 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip952)" d="M2572.18 51.816 L2556.18 67.816 L2572.18 83.816 L2588.18 67.816 L2572.18 51.816 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip952)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="286.179,753.545 540.179,753.545 540.179,387.179 794.178,387.179 794.178,213.446 1048.18,213.446 1048.18,133.595 1302.18,133.595 1302.18,97.3175 1556.18,97.3175 1556.18,80.9075 1810.18,80.9075 1810.18,73.4911 2064.18,73.4911 2064.18,70.1283 2318.18,70.1283 2318.18,68.5771 2572.18,68.5771 2572.18,67.816 "></polyline>
<path clip-path="url(#clip950)" d="M2295.96 749.888 L2559.98 749.888 L2559.98 646.208 L2295.96 646.208  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2295.96,749.888 2559.98,749.888 2559.98,646.208 2295.96,646.208 2295.96,749.888 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2322.88,698.048 2484.42,698.048 "></polyline>
<path clip-path="url(#clip950)" d="M2511.35 705.096 L2511.35 689.402 L2515.61 689.402 L2515.61 704.934 Q2515.61 708.615 2517.04 710.467 Q2518.48 712.295 2521.35 712.295 Q2524.8 712.295 2526.79 710.096 Q2528.8 707.897 2528.8 704.101 L2528.8 689.402 L2533.06 689.402 L2533.06 715.328 L2528.8 715.328 L2528.8 711.346 Q2527.25 713.708 2525.19 714.865 Q2523.15 715.999 2520.44 715.999 Q2515.98 715.999 2513.66 713.221 Q2511.35 710.444 2511.35 705.096 M2522.06 688.777 L2522.06 688.777 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M217.599 1734.12 L2640.76 1734.12 L2640.76 1007.24 L217.599 1007.24  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip953">
    <rect x="217" y="1007" width="2424" height="728"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip953)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="286.179,1734.12 286.179,1007.24 "></polyline>
<polyline clip-path="url(#clip953)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="857.678,1734.12 857.678,1007.24 "></polyline>
<polyline clip-path="url(#clip953)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1429.18,1734.12 1429.18,1007.24 "></polyline>
<polyline clip-path="url(#clip953)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2000.68,1734.12 2000.68,1007.24 "></polyline>
<polyline clip-path="url(#clip953)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2572.18,1734.12 2572.18,1007.24 "></polyline>
<polyline clip-path="url(#clip953)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="217.599,1667.15 2640.76,1667.15 "></polyline>
<polyline clip-path="url(#clip953)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="217.599,1454.04 2640.76,1454.04 "></polyline>
<polyline clip-path="url(#clip953)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="217.599,1240.93 2640.76,1240.93 "></polyline>
<polyline clip-path="url(#clip953)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="217.599,1027.82 2640.76,1027.82 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,1734.12 2640.76,1734.12 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="286.179,1734.12 286.179,1715.22 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="857.678,1734.12 857.678,1715.22 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1429.18,1734.12 1429.18,1715.22 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2000.68,1734.12 2000.68,1715.22 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2572.18,1734.12 2572.18,1715.22 "></polyline>
<path clip-path="url(#clip950)" d="M263.563 1767.34 Q259.952 1767.34 258.123 1770.9 Q256.318 1774.45 256.318 1781.58 Q256.318 1788.68 258.123 1792.25 Q259.952 1795.79 263.563 1795.79 Q267.197 1795.79 269.003 1792.25 Q270.832 1788.68 270.832 1781.58 Q270.832 1774.45 269.003 1770.9 Q267.197 1767.34 263.563 1767.34 M263.563 1763.64 Q269.373 1763.64 272.429 1768.24 Q275.508 1772.83 275.508 1781.58 Q275.508 1790.3 272.429 1794.91 Q269.373 1799.49 263.563 1799.49 Q257.753 1799.49 254.674 1794.91 Q251.619 1790.3 251.619 1781.58 Q251.619 1772.83 254.674 1768.24 Q257.753 1763.64 263.563 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M283.725 1792.94 L288.609 1792.94 L288.609 1798.82 L283.725 1798.82 L283.725 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M308.794 1767.34 Q305.183 1767.34 303.355 1770.9 Q301.549 1774.45 301.549 1781.58 Q301.549 1788.68 303.355 1792.25 Q305.183 1795.79 308.794 1795.79 Q312.429 1795.79 314.234 1792.25 Q316.063 1788.68 316.063 1781.58 Q316.063 1774.45 314.234 1770.9 Q312.429 1767.34 308.794 1767.34 M308.794 1763.64 Q314.605 1763.64 317.66 1768.24 Q320.739 1772.83 320.739 1781.58 Q320.739 1790.3 317.66 1794.91 Q314.605 1799.49 308.794 1799.49 Q302.984 1799.49 299.906 1794.91 Q296.85 1790.3 296.85 1781.58 Q296.85 1772.83 299.906 1768.24 Q302.984 1763.64 308.794 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M829.414 1794.89 L845.734 1794.89 L845.734 1798.82 L823.789 1798.82 L823.789 1794.89 Q826.451 1792.13 831.035 1787.5 Q835.641 1782.85 836.822 1781.51 Q839.067 1778.98 839.947 1777.25 Q840.85 1775.49 840.85 1773.8 Q840.85 1771.04 838.905 1769.31 Q836.984 1767.57 833.882 1767.57 Q831.683 1767.57 829.229 1768.34 Q826.799 1769.1 824.021 1770.65 L824.021 1765.93 Q826.845 1764.79 829.299 1764.21 Q831.752 1763.64 833.789 1763.64 Q839.16 1763.64 842.354 1766.32 Q845.549 1769.01 845.549 1773.5 Q845.549 1775.63 844.738 1777.55 Q843.951 1779.45 841.845 1782.04 Q841.266 1782.71 838.164 1785.93 Q835.063 1789.12 829.414 1794.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M855.549 1792.94 L860.433 1792.94 L860.433 1798.82 L855.549 1798.82 L855.549 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M870.664 1764.26 L889.021 1764.26 L889.021 1768.2 L874.947 1768.2 L874.947 1776.67 Q875.965 1776.32 876.984 1776.16 Q878.002 1775.97 879.021 1775.97 Q884.808 1775.97 888.187 1779.15 Q891.567 1782.32 891.567 1787.73 Q891.567 1793.31 888.095 1796.41 Q884.622 1799.49 878.303 1799.49 Q876.127 1799.49 873.859 1799.12 Q871.613 1798.75 869.206 1798.01 L869.206 1793.31 Q871.289 1794.45 873.511 1795 Q875.734 1795.56 878.21 1795.56 Q882.215 1795.56 884.553 1793.45 Q886.891 1791.34 886.891 1787.73 Q886.891 1784.12 884.553 1782.02 Q882.215 1779.91 878.21 1779.91 Q876.335 1779.91 874.46 1780.33 Q872.609 1780.74 870.664 1781.62 L870.664 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M1396.34 1764.26 L1414.7 1764.26 L1414.7 1768.2 L1400.62 1768.2 L1400.62 1776.67 Q1401.64 1776.32 1402.66 1776.16 Q1403.68 1775.97 1404.7 1775.97 Q1410.49 1775.97 1413.87 1779.15 Q1417.24 1782.32 1417.24 1787.73 Q1417.24 1793.31 1413.77 1796.41 Q1410.3 1799.49 1403.98 1799.49 Q1401.8 1799.49 1399.54 1799.12 Q1397.29 1798.75 1394.88 1798.01 L1394.88 1793.31 Q1396.97 1794.45 1399.19 1795 Q1401.41 1795.56 1403.89 1795.56 Q1407.89 1795.56 1410.23 1793.45 Q1412.57 1791.34 1412.57 1787.73 Q1412.57 1784.12 1410.23 1782.02 Q1407.89 1779.91 1403.89 1779.91 Q1402.01 1779.91 1400.14 1780.33 Q1398.29 1780.74 1396.34 1781.62 L1396.34 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M1426.46 1792.94 L1431.34 1792.94 L1431.34 1798.82 L1426.46 1798.82 L1426.46 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M1451.53 1767.34 Q1447.92 1767.34 1446.09 1770.9 Q1444.28 1774.45 1444.28 1781.58 Q1444.28 1788.68 1446.09 1792.25 Q1447.92 1795.79 1451.53 1795.79 Q1455.16 1795.79 1456.97 1792.25 Q1458.8 1788.68 1458.8 1781.58 Q1458.8 1774.45 1456.97 1770.9 Q1455.16 1767.34 1451.53 1767.34 M1451.53 1763.64 Q1457.34 1763.64 1460.39 1768.24 Q1463.47 1772.83 1463.47 1781.58 Q1463.47 1790.3 1460.39 1794.91 Q1457.34 1799.49 1451.53 1799.49 Q1445.72 1799.49 1442.64 1794.91 Q1439.58 1790.3 1439.58 1781.58 Q1439.58 1772.83 1442.64 1768.24 Q1445.72 1763.64 1451.53 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M1967 1764.26 L1989.22 1764.26 L1989.22 1766.25 L1976.67 1798.82 L1971.79 1798.82 L1983.59 1768.2 L1967 1768.2 L1967 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M1998.34 1792.94 L2003.22 1792.94 L2003.22 1798.82 L1998.34 1798.82 L1998.34 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M2013.45 1764.26 L2031.81 1764.26 L2031.81 1768.2 L2017.74 1768.2 L2017.74 1776.67 Q2018.76 1776.32 2019.77 1776.16 Q2020.79 1775.97 2021.81 1775.97 Q2027.6 1775.97 2030.98 1779.15 Q2034.36 1782.32 2034.36 1787.73 Q2034.36 1793.31 2030.88 1796.41 Q2027.41 1799.49 2021.09 1799.49 Q2018.92 1799.49 2016.65 1799.12 Q2014.4 1798.75 2012 1798.01 L2012 1793.31 Q2014.08 1794.45 2016.3 1795 Q2018.52 1795.56 2021 1795.56 Q2025.01 1795.56 2027.34 1793.45 Q2029.68 1791.34 2029.68 1787.73 Q2029.68 1784.12 2027.34 1782.02 Q2025.01 1779.91 2021 1779.91 Q2019.13 1779.91 2017.25 1780.33 Q2015.4 1780.74 2013.45 1781.62 L2013.45 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M2524.25 1794.89 L2531.89 1794.89 L2531.89 1768.52 L2523.58 1770.19 L2523.58 1765.93 L2531.84 1764.26 L2536.52 1764.26 L2536.52 1794.89 L2544.16 1794.89 L2544.16 1798.82 L2524.25 1798.82 L2524.25 1794.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M2563.6 1767.34 Q2559.99 1767.34 2558.16 1770.9 Q2556.35 1774.45 2556.35 1781.58 Q2556.35 1788.68 2558.16 1792.25 Q2559.99 1795.79 2563.6 1795.79 Q2567.23 1795.79 2569.04 1792.25 Q2570.87 1788.68 2570.87 1781.58 Q2570.87 1774.45 2569.04 1770.9 Q2567.23 1767.34 2563.6 1767.34 M2563.6 1763.64 Q2569.41 1763.64 2572.47 1768.24 Q2575.54 1772.83 2575.54 1781.58 Q2575.54 1790.3 2572.47 1794.91 Q2569.41 1799.49 2563.6 1799.49 Q2557.79 1799.49 2554.71 1794.91 Q2551.66 1790.3 2551.66 1781.58 Q2551.66 1772.83 2554.71 1768.24 Q2557.79 1763.64 2563.6 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M2583.76 1792.94 L2588.65 1792.94 L2588.65 1798.82 L2583.76 1798.82 L2583.76 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M2608.83 1767.34 Q2605.22 1767.34 2603.39 1770.9 Q2601.59 1774.45 2601.59 1781.58 Q2601.59 1788.68 2603.39 1792.25 Q2605.22 1795.79 2608.83 1795.79 Q2612.47 1795.79 2614.27 1792.25 Q2616.1 1788.68 2616.1 1781.58 Q2616.1 1774.45 2614.27 1770.9 Q2612.47 1767.34 2608.83 1767.34 M2608.83 1763.64 Q2614.64 1763.64 2617.7 1768.24 Q2620.78 1772.83 2620.78 1781.58 Q2620.78 1790.3 2617.7 1794.91 Q2614.64 1799.49 2608.83 1799.49 Q2603.02 1799.49 2599.94 1794.91 Q2596.89 1790.3 2596.89 1781.58 Q2596.89 1772.83 2599.94 1768.24 Q2603.02 1763.64 2608.83 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M1413.36 1833.78 L1419.25 1833.78 L1419.25 1863.03 L1436.72 1847.65 L1444.2 1847.65 L1425.29 1864.33 L1445 1883.3 L1437.36 1883.3 L1419.25 1865.89 L1419.25 1883.3 L1413.36 1883.3 L1413.36 1833.78 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,1734.12 217.599,1007.24 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,1667.15 236.497,1667.15 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,1454.04 236.497,1454.04 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,1240.93 236.497,1240.93 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,1027.82 236.497,1027.82 "></polyline>
<path clip-path="url(#clip950)" d="M165.335 1652.95 Q161.723 1652.95 159.895 1656.51 Q158.089 1660.05 158.089 1667.18 Q158.089 1674.29 159.895 1677.86 Q161.723 1681.4 165.335 1681.4 Q168.969 1681.4 170.774 1677.86 Q172.603 1674.29 172.603 1667.18 Q172.603 1660.05 170.774 1656.51 Q168.969 1652.95 165.335 1652.95 M165.335 1649.24 Q171.145 1649.24 174.2 1653.85 Q177.279 1658.43 177.279 1667.18 Q177.279 1675.91 174.2 1680.52 Q171.145 1685.1 165.335 1685.1 Q159.524 1685.1 156.446 1680.52 Q153.39 1675.91 153.39 1667.18 Q153.39 1658.43 156.446 1653.85 Q159.524 1649.24 165.335 1649.24 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M157.372 1467.38 L165.01 1467.38 L165.01 1441.02 L156.7 1442.68 L156.7 1438.42 L164.964 1436.76 L169.64 1436.76 L169.64 1467.38 L177.279 1467.38 L177.279 1471.32 L157.372 1471.32 L157.372 1467.38 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M160.96 1254.27 L177.279 1254.27 L177.279 1258.21 L155.335 1258.21 L155.335 1254.27 Q157.997 1251.52 162.58 1246.89 Q167.186 1242.23 168.367 1240.89 Q170.612 1238.37 171.492 1236.63 Q172.395 1234.87 172.395 1233.18 Q172.395 1230.43 170.45 1228.69 Q168.529 1226.96 165.427 1226.96 Q163.228 1226.96 160.774 1227.72 Q158.344 1228.48 155.566 1230.04 L155.566 1225.31 Q158.39 1224.18 160.844 1223.6 Q163.298 1223.02 165.335 1223.02 Q170.705 1223.02 173.899 1225.71 Q177.094 1228.39 177.094 1232.88 Q177.094 1235.01 176.284 1236.93 Q175.497 1238.83 173.39 1241.42 Q172.811 1242.1 169.71 1245.31 Q166.608 1248.51 160.96 1254.27 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M170.149 1026.46 Q173.506 1027.18 175.381 1029.45 Q177.279 1031.72 177.279 1035.05 Q177.279 1040.17 173.76 1042.97 Q170.242 1045.77 163.76 1045.77 Q161.585 1045.77 159.27 1045.33 Q156.978 1044.91 154.524 1044.05 L154.524 1039.54 Q156.469 1040.67 158.784 1041.25 Q161.098 1041.83 163.622 1041.83 Q168.02 1041.83 170.311 1040.1 Q172.626 1038.36 172.626 1035.05 Q172.626 1031.99 170.473 1030.28 Q168.344 1028.55 164.524 1028.55 L160.497 1028.55 L160.497 1024.7 L164.71 1024.7 Q168.159 1024.7 169.987 1023.34 Q171.816 1021.95 171.816 1019.36 Q171.816 1016.69 169.918 1015.28 Q168.043 1013.85 164.524 1013.85 Q162.603 1013.85 160.404 1014.26 Q158.205 1014.68 155.566 1015.56 L155.566 1011.39 Q158.228 1010.65 160.543 1010.28 Q162.881 1009.91 164.941 1009.91 Q170.265 1009.91 173.367 1012.34 Q176.469 1014.75 176.469 1018.87 Q176.469 1021.74 174.825 1023.73 Q173.182 1025.7 170.149 1026.46 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M63.1662 1354.07 L80.5128 1366.96 L98.8142 1353.4 L98.8142 1360.3 L84.8096 1370.68 L98.8142 1381.06 L98.8142 1387.96 L80.1626 1374.12 L63.1662 1386.79 L63.1662 1379.88 L75.8658 1370.43 L63.1662 1360.97 L63.1662 1354.07 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip953)" d="M286.179 1438.04 L270.179 1454.04 L286.179 1470.04 L302.179 1454.04 L286.179 1438.04 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M514.779 1697.55 L498.779 1713.55 L514.779 1729.55 L530.779 1713.55 L514.779 1697.55 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M743.378 1697.24 L727.378 1713.24 L743.378 1729.24 L759.378 1713.24 L743.378 1697.24 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M971.978 1676.38 L955.978 1692.38 L971.978 1708.38 L987.978 1692.38 L971.978 1676.38 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M1200.58 1663.31 L1184.58 1679.31 L1200.58 1695.31 L1216.58 1679.31 L1200.58 1663.31 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M1429.18 1656.77 L1413.18 1672.77 L1429.18 1688.77 L1445.18 1672.77 L1429.18 1656.77 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M1657.78 1653.7 L1641.78 1669.7 L1657.78 1685.7 L1673.78 1669.7 L1657.78 1653.7 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M1886.38 1652.3 L1870.38 1668.3 L1886.38 1684.3 L1902.38 1668.3 L1886.38 1652.3 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M2114.98 1651.65 L2098.98 1667.65 L2114.98 1683.65 L2130.98 1667.65 L2114.98 1651.65 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M2343.58 1651.34 L2327.58 1667.34 L2343.58 1683.34 L2359.58 1667.34 L2343.58 1651.34 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M2572.18 1651.16 L2556.18 1667.16 L2572.18 1683.16 L2588.18 1667.16 L2572.18 1651.16 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip953)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="286.179,1454.04 514.779,1454.04 514.779,1713.55 743.378,1713.55 743.378,1713.24 971.978,1713.24 971.978,1692.38 1200.58,1692.38 1200.58,1679.31 1429.18,1679.31 1429.18,1672.77 1657.78,1672.77 1657.78,1669.7 1886.38,1669.7 1886.38,1668.3 2114.98,1668.3 2114.98,1667.65 2343.58,1667.65 2343.58,1667.34 2572.18,1667.34 2572.18,1667.16 "></polyline>
<path clip-path="url(#clip953)" d="M286.179 1011.82 L270.179 1027.82 L286.179 1043.82 L302.179 1027.82 L286.179 1011.82 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M514.779 1247.82 L498.779 1263.82 L514.779 1279.82 L530.779 1263.82 L514.779 1247.82 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M743.378 1448.95 L727.378 1464.95 L743.378 1480.95 L759.378 1464.95 L743.378 1448.95 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M971.978 1556.38 L955.978 1572.38 L971.978 1588.38 L987.978 1572.38 L971.978 1556.38 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M1200.58 1607.78 L1184.58 1623.78 L1200.58 1639.78 L1216.58 1623.78 L1200.58 1607.78 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M1429.18 1631.48 L1413.18 1647.48 L1429.18 1663.48 L1445.18 1647.48 L1429.18 1631.48 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M1657.78 1642.25 L1641.78 1658.25 L1657.78 1674.25 L1673.78 1658.25 L1657.78 1642.25 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M1886.38 1647.12 L1870.38 1663.12 L1886.38 1679.12 L1902.38 1663.12 L1886.38 1647.12 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M2114.98 1649.3 L2098.98 1665.3 L2114.98 1681.3 L2130.98 1665.3 L2114.98 1649.3 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M2343.58 1650.25 L2327.58 1666.25 L2343.58 1682.25 L2359.58 1666.25 L2343.58 1650.25 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip953)" d="M2572.18 1650.62 L2556.18 1666.62 L2572.18 1682.62 L2588.18 1666.62 L2572.18 1650.62 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip953)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="286.179,1027.82 514.779,1027.82 514.779,1263.82 743.378,1263.82 743.378,1464.95 971.978,1464.95 971.978,1572.38 1200.58,1572.38 1200.58,1623.78 1429.18,1623.78 1429.18,1647.48 1657.78,1647.48 1657.78,1658.25 1886.38,1658.25 1886.38,1663.12 2114.98,1663.12 2114.98,1665.3 2343.58,1665.3 2343.58,1666.25 2572.18,1666.25 2572.18,1666.62 "></polyline>
<path clip-path="url(#clip950)" d="M2274.57 1186.99 L2559.98 1186.99 L2559.98 1031.47 L2274.57 1031.47  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip950)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2274.57,1186.99 2559.98,1186.99 2559.98,1031.47 2274.57,1031.47 2274.57,1186.99 "></polyline>
<polyline clip-path="url(#clip950)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2301.49,1083.31 2463.03,1083.31 "></polyline>
<path clip-path="url(#clip950)" d="M2514.61 1074.67 L2505.24 1087.28 L2515.1 1100.59 L2510.07 1100.59 L2502.53 1090.41 L2494.98 1100.59 L2489.96 1100.59 L2500.03 1087.03 L2490.81 1074.67 L2495.84 1074.67 L2502.71 1083.9 L2509.59 1074.67 L2514.61 1074.67 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M2520.26 1098.05 L2524.98 1098.05 L2524.98 1083.9 L2519.82 1084.85 L2519.82 1082.17 L2525.14 1081.26 L2528.31 1081.26 L2528.31 1098.05 L2533.06 1098.05 L2533.06 1100.59 L2520.26 1100.59 L2520.26 1098.05 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip950)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2301.49,1135.15 2463.03,1135.15 "></polyline>
<path clip-path="url(#clip950)" d="M2514.61 1126.51 L2505.24 1139.12 L2515.1 1152.43 L2510.07 1152.43 L2502.53 1142.25 L2494.98 1152.43 L2489.96 1152.43 L2500.03 1138.87 L2490.81 1126.51 L2495.84 1126.51 L2502.71 1135.74 L2509.59 1126.51 L2514.61 1126.51 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip950)" d="M2522.85 1149.79 L2532.67 1149.79 L2532.67 1152.43 L2518.82 1152.43 L2518.82 1149.89 Q2519.61 1149.17 2521.07 1147.87 Q2529.03 1140.81 2529.03 1138.64 Q2529.03 1137.11 2527.83 1136.18 Q2526.62 1135.23 2524.66 1135.23 Q2523.45 1135.23 2522.04 1135.65 Q2520.63 1136.04 2518.96 1136.85 L2518.96 1134.01 Q2520.75 1133.36 2522.27 1133.04 Q2523.82 1132.71 2525.14 1132.71 Q2528.5 1132.71 2530.51 1134.24 Q2532.53 1135.77 2532.53 1138.27 Q2532.53 1141.48 2524.87 1148.06 Q2523.57 1149.17 2522.85 1149.79 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path></svg>
</div>
</div>
</div>
<section id="adding-constraints-on-controls-and-states" class="level3">
<h3 class="anchored" data-anchor-id="adding-constraints-on-controls-and-states">Adding constraints on controls and states</h3>
<p>When solving a realistic optimal control problem, we may want to impose inequality constraints on <span class="math inline">\bm u_k</span> due to saturation of actuators. We may also want to add constraints on <span class="math inline">\bm x_k</span> as well, which may reflect some performance specifications. In both cases, we would arrive at the full KKT conditions, and rather than trying to solve these, we resort to some finetuned numerical solver for quadratic programming (QP) instead.</p>
<div id="exm-direct-simultaneous-constrained-using-jump" class="theorem example">
<p><span class="theorem-title"><strong>Example 2 (Simultaneous approach to the LQR problem with constraints on control – higher-level implementation using optimization modelling language JuMP)</strong></span> While developing the model all the way down to the individual matrices and vectors gives an insight into the structure of the problem (we learnt that in absence of constraints it amounts to solving an indefinite system of linear equations), here we show how the use of an optimization modelling language can make the process of building the model a lot more convenient. We use JuMP for this purpose, but things would be similar with, say, cvxpy in Python or Yalmip in Matlab.</p>
<div id="4" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LinearAlgebra</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">JuMP</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">OSQP</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Random</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="bu">Random</span>.<span class="fu">seed!</span>(<span class="fl">1234</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="fl">2</span>               <span class="co"># Number of state variables.</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> <span class="fl">1</span>               <span class="co"># Number of (control) input variables. </span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> <span class="fu">rand</span>(n,n)       <span class="co"># State matrix.</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> <span class="fu">rand</span>(n,m)       <span class="co"># Input coupling matrix.</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>x₀ <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">3.0</span>]     <span class="co"># Initial state.</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="fl">10</span>              <span class="co"># Time horizon.</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">2.0</span>]      </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">2.0</span>]</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> [<span class="fl">1.0</span>]</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>S <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>s)     <span class="co"># Matrix defining the terminal state cost.</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>Q <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>q)     <span class="co"># Matrix defining the running state dost.</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>R <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>r)     <span class="co"># Matrix defining the cost of control.</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>umin <span class="op">=</span> <span class="op">-</span><span class="fl">1.0</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>umax <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>ocp <span class="op">=</span> <span class="fu">Model</span>(OSQP.Optimizer)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="fu">set_silent</span>(ocp)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="pp">@variable</span>(ocp, umin <span class="op">&lt;=</span> u[<span class="fl">1</span><span class="op">:</span>N] <span class="op">&lt;=</span> umax)</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="pp">@variable</span>(ocp, x[<span class="fl">1</span><span class="op">:</span>n,<span class="fl">1</span><span class="op">:</span>N<span class="op">+</span><span class="fl">1</span>])</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>N</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    <span class="pp">@constraint</span>(ocp, x[<span class="op">:</span>,i<span class="op">+</span><span class="fl">1</span>] <span class="op">==</span> A<span class="op">*</span>x[<span class="op">:</span>,i] <span class="op">+</span> B<span class="op">*</span>u[i])</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a><span class="fu">fix</span>(x[<span class="fl">1</span>,<span class="fl">1</span>], x₀[<span class="fl">1</span>])</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a><span class="fu">fix</span>(x[<span class="fl">2</span>,<span class="fl">1</span>], x₀[<span class="fl">2</span>])</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a><span class="pp">@objective</span>(ocp, Min, <span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="fu">*dot</span>(x[<span class="op">:</span>,N],S,x[<span class="op">:</span>,N]) <span class="op">+</span> <span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="fu">*sum</span>(<span class="fu">dot</span>(x[<span class="op">:</span>,i],Q,x[<span class="op">:</span>,i]) <span class="op">+</span> <span class="fu">dot</span>(u[i],R,u[i]) <span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>N<span class="op">-</span><span class="fl">1</span>))</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a><span class="fu">optimize!</span>(ocp)</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>uopt <span class="op">=</span> <span class="fu">value</span>.(u)</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>xopt <span class="op">=</span> <span class="fu">value</span>.(x)</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Plots</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>p1 <span class="op">=</span> <span class="fu">plot</span>(<span class="fl">0</span><span class="op">:</span>(N<span class="op">-</span><span class="fl">1</span>),uopt,marker<span class="op">=:</span>diamond,label<span class="op">=</span><span class="st">"u"</span>,linetype<span class="op">=:</span>steppost)</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"k"</span>)</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"u"</span>)</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>p2 <span class="op">=</span> <span class="fu">plot</span>(<span class="fl">0</span><span class="op">:</span>N,xopt<span class="op">'</span>,marker<span class="op">=:</span>diamond,label<span class="op">=</span>[<span class="st">"x₁"</span> <span class="st">"x₂"</span>],linetype<span class="op">=:</span>steppost)</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"k"</span>)</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"x"</span>)</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(p1,p2,layout<span class="op">=</span>(<span class="fl">2</span>,<span class="fl">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="1">
<!--?xml version="1.0" encoding="utf-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="672" height="480" viewbox="0 0 2688 1920">
<defs>
  <clippath id="clip010">
    <rect x="0" y="0" width="2688" height="1920"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip010)" d="M0 1920 L2688 1920 L2688 0 L0 0  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip011">
    <rect x="537" y="0" width="1883" height="1883"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip010)" d="M293.64 774.117 L2640.76 774.117 L2640.76 47.2441 L293.64 47.2441  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip012">
    <rect x="293" y="47" width="2348" height="728"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="360.068,774.117 360.068,47.2441 "></polyline>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="852.126,774.117 852.126,47.2441 "></polyline>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1344.18,774.117 1344.18,47.2441 "></polyline>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1836.24,774.117 1836.24,47.2441 "></polyline>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2328.3,774.117 2328.3,47.2441 "></polyline>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="293.64,753.435 2640.76,753.435 "></polyline>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="293.64,582.03 2640.76,582.03 "></polyline>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="293.64,410.625 2640.76,410.625 "></polyline>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="293.64,239.221 2640.76,239.221 "></polyline>
<polyline clip-path="url(#clip012)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="293.64,67.8159 2640.76,67.8159 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="293.64,774.117 2640.76,774.117 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="360.068,774.117 360.068,755.219 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="852.126,774.117 852.126,755.219 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1344.18,774.117 1344.18,755.219 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1836.24,774.117 1836.24,755.219 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2328.3,774.117 2328.3,755.219 "></polyline>
<path clip-path="url(#clip010)" d="M360.068 807.34 Q356.457 807.34 354.628 810.904 Q352.823 814.446 352.823 821.576 Q352.823 828.682 354.628 832.247 Q356.457 835.789 360.068 835.789 Q363.702 835.789 365.508 832.247 Q367.336 828.682 367.336 821.576 Q367.336 814.446 365.508 810.904 Q363.702 807.34 360.068 807.34 M360.068 803.636 Q365.878 803.636 368.934 808.242 Q372.012 812.826 372.012 821.576 Q372.012 830.303 368.934 834.909 Q365.878 839.492 360.068 839.492 Q354.258 839.492 351.179 834.909 Q348.124 830.303 348.124 821.576 Q348.124 812.826 351.179 808.242 Q354.258 803.636 360.068 803.636 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M846.779 834.886 L863.098 834.886 L863.098 838.821 L841.154 838.821 L841.154 834.886 Q843.816 832.131 848.399 827.502 Q853.005 822.849 854.186 821.506 Q856.431 818.983 857.311 817.247 Q858.214 815.488 858.214 813.798 Q858.214 811.043 856.269 809.307 Q854.348 807.571 851.246 807.571 Q849.047 807.571 846.593 808.335 Q844.163 809.099 841.385 810.65 L841.385 805.928 Q844.209 804.793 846.663 804.215 Q849.117 803.636 851.154 803.636 Q856.524 803.636 859.718 806.321 Q862.913 809.006 862.913 813.497 Q862.913 815.627 862.103 817.548 Q861.316 819.446 859.209 822.039 Q858.63 822.71 855.529 825.928 Q852.427 829.122 846.779 834.886 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M1347.19 808.335 L1335.39 826.784 L1347.19 826.784 L1347.19 808.335 M1345.97 804.261 L1351.85 804.261 L1351.85 826.784 L1356.78 826.784 L1356.78 830.673 L1351.85 830.673 L1351.85 838.821 L1347.19 838.821 L1347.19 830.673 L1331.59 830.673 L1331.59 826.159 L1345.97 804.261 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M1836.65 819.678 Q1833.5 819.678 1831.65 821.83 Q1829.82 823.983 1829.82 827.733 Q1829.82 831.46 1831.65 833.636 Q1833.5 835.789 1836.65 835.789 Q1839.79 835.789 1841.62 833.636 Q1843.48 831.46 1843.48 827.733 Q1843.48 823.983 1841.62 821.83 Q1839.79 819.678 1836.65 819.678 M1845.93 805.025 L1845.93 809.284 Q1844.17 808.451 1842.36 808.011 Q1840.58 807.571 1838.82 807.571 Q1834.19 807.571 1831.74 810.696 Q1829.31 813.821 1828.96 820.141 Q1830.33 818.127 1832.39 817.062 Q1834.45 815.974 1836.92 815.974 Q1842.13 815.974 1845.14 819.145 Q1848.17 822.293 1848.17 827.733 Q1848.17 833.057 1845.03 836.275 Q1841.88 839.492 1836.65 839.492 Q1830.65 839.492 1827.48 834.909 Q1824.31 830.303 1824.31 821.576 Q1824.31 813.381 1828.2 808.52 Q1832.09 803.636 1838.64 803.636 Q1840.4 803.636 1842.18 803.983 Q1843.98 804.33 1845.93 805.025 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M2328.3 822.409 Q2324.97 822.409 2323.04 824.191 Q2321.15 825.974 2321.15 829.099 Q2321.15 832.224 2323.04 834.006 Q2324.97 835.789 2328.3 835.789 Q2331.63 835.789 2333.55 834.006 Q2335.48 832.201 2335.48 829.099 Q2335.48 825.974 2333.55 824.191 Q2331.66 822.409 2328.3 822.409 M2323.62 820.418 Q2320.61 819.678 2318.92 817.617 Q2317.26 815.557 2317.26 812.594 Q2317.26 808.451 2320.2 806.043 Q2323.16 803.636 2328.3 803.636 Q2333.46 803.636 2336.4 806.043 Q2339.34 808.451 2339.34 812.594 Q2339.34 815.557 2337.65 817.617 Q2335.98 819.678 2333 820.418 Q2336.38 821.205 2338.25 823.497 Q2340.15 825.789 2340.15 829.099 Q2340.15 834.122 2337.07 836.807 Q2334.02 839.492 2328.3 839.492 Q2322.58 839.492 2319.5 836.807 Q2316.45 834.122 2316.45 829.099 Q2316.45 825.789 2318.35 823.497 Q2320.24 821.205 2323.62 820.418 M2321.91 813.034 Q2321.91 815.719 2323.58 817.224 Q2325.27 818.729 2328.3 818.729 Q2331.31 818.729 2333 817.224 Q2334.71 815.719 2334.71 813.034 Q2334.71 810.349 2333 808.844 Q2331.31 807.34 2328.3 807.34 Q2325.27 807.34 2323.58 808.844 Q2321.91 810.349 2321.91 813.034 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M1451.38 873.776 L1457.27 873.776 L1457.27 903.026 L1474.74 887.653 L1482.22 887.653 L1463.31 904.331 L1483.02 923.301 L1475.38 923.301 L1457.27 905.891 L1457.27 923.301 L1451.38 923.301 L1451.38 873.776 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="293.64,774.117 293.64,47.2441 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="293.64,753.435 312.538,753.435 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="293.64,582.03 312.538,582.03 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="293.64,410.625 312.538,410.625 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="293.64,239.221 312.538,239.221 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="293.64,67.8159 312.538,67.8159 "></polyline>
<path clip-path="url(#clip010)" d="M116.214 753.886 L145.89 753.886 L145.89 757.821 L116.214 757.821 L116.214 753.886 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M156.793 766.78 L164.432 766.78 L164.432 740.414 L156.122 742.081 L156.122 737.821 L164.385 736.155 L169.061 736.155 L169.061 766.78 L176.7 766.78 L176.7 770.715 L156.793 770.715 L156.793 766.78 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M186.145 764.835 L191.029 764.835 L191.029 770.715 L186.145 770.715 L186.145 764.835 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M211.214 739.233 Q207.603 739.233 205.774 742.798 Q203.969 746.34 203.969 753.469 Q203.969 760.576 205.774 764.141 Q207.603 767.682 211.214 767.682 Q214.848 767.682 216.654 764.141 Q218.482 760.576 218.482 753.469 Q218.482 746.34 216.654 742.798 Q214.848 739.233 211.214 739.233 M211.214 735.53 Q217.024 735.53 220.08 740.136 Q223.158 744.719 223.158 753.469 Q223.158 762.196 220.08 766.803 Q217.024 771.386 211.214 771.386 Q205.404 771.386 202.325 766.803 Q199.27 762.196 199.27 753.469 Q199.27 744.719 202.325 740.136 Q205.404 735.53 211.214 735.53 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M241.376 739.233 Q237.765 739.233 235.936 742.798 Q234.13 746.34 234.13 753.469 Q234.13 760.576 235.936 764.141 Q237.765 767.682 241.376 767.682 Q245.01 767.682 246.816 764.141 Q248.644 760.576 248.644 753.469 Q248.644 746.34 246.816 742.798 Q245.01 739.233 241.376 739.233 M241.376 735.53 Q247.186 735.53 250.242 740.136 Q253.32 744.719 253.32 753.469 Q253.32 762.196 250.242 766.803 Q247.186 771.386 241.376 771.386 Q235.566 771.386 232.487 766.803 Q229.431 762.196 229.431 753.469 Q229.431 744.719 232.487 740.136 Q235.566 735.53 241.376 735.53 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M117.21 582.481 L146.886 582.481 L146.886 586.417 L117.21 586.417 L117.21 582.481 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M166.978 567.829 Q163.367 567.829 161.538 571.393 Q159.733 574.935 159.733 582.065 Q159.733 589.171 161.538 592.736 Q163.367 596.278 166.978 596.278 Q170.612 596.278 172.418 592.736 Q174.247 589.171 174.247 582.065 Q174.247 574.935 172.418 571.393 Q170.612 567.829 166.978 567.829 M166.978 564.125 Q172.788 564.125 175.844 568.731 Q178.922 573.315 178.922 582.065 Q178.922 590.792 175.844 595.398 Q172.788 599.981 166.978 599.981 Q161.168 599.981 158.089 595.398 Q155.034 590.792 155.034 582.065 Q155.034 573.315 158.089 568.731 Q161.168 564.125 166.978 564.125 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M187.14 593.43 L192.024 593.43 L192.024 599.31 L187.14 599.31 L187.14 593.43 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M201.029 564.75 L223.251 564.75 L223.251 566.741 L210.705 599.31 L205.82 599.31 L217.626 568.685 L201.029 568.685 L201.029 564.75 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M232.418 564.75 L250.774 564.75 L250.774 568.685 L236.7 568.685 L236.7 577.157 Q237.718 576.81 238.737 576.648 Q239.755 576.463 240.774 576.463 Q246.561 576.463 249.941 579.634 Q253.32 582.805 253.32 588.222 Q253.32 593.801 249.848 596.903 Q246.376 599.981 240.056 599.981 Q237.88 599.981 235.612 599.611 Q233.367 599.241 230.959 598.5 L230.959 593.801 Q233.043 594.935 235.265 595.491 Q237.487 596.046 239.964 596.046 Q243.968 596.046 246.306 593.94 Q248.644 591.833 248.644 588.222 Q248.644 584.611 246.306 582.505 Q243.968 580.398 239.964 580.398 Q238.089 580.398 236.214 580.815 Q234.362 581.231 232.418 582.111 L232.418 564.75 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M116.214 411.077 L145.89 411.077 L145.89 415.012 L116.214 415.012 L116.214 411.077 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M165.983 396.424 Q162.372 396.424 160.543 399.989 Q158.737 403.53 158.737 410.66 Q158.737 417.766 160.543 421.331 Q162.372 424.873 165.983 424.873 Q169.617 424.873 171.422 421.331 Q173.251 417.766 173.251 410.66 Q173.251 403.53 171.422 399.989 Q169.617 396.424 165.983 396.424 M165.983 392.72 Q171.793 392.72 174.848 397.327 Q177.927 401.91 177.927 410.66 Q177.927 419.387 174.848 423.993 Q171.793 428.577 165.983 428.577 Q160.173 428.577 157.094 423.993 Q154.038 419.387 154.038 410.66 Q154.038 401.91 157.094 397.327 Q160.173 392.72 165.983 392.72 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M186.145 422.026 L191.029 422.026 L191.029 427.905 L186.145 427.905 L186.145 422.026 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M201.26 393.345 L219.617 393.345 L219.617 397.28 L205.543 397.28 L205.543 405.753 Q206.561 405.405 207.58 405.243 Q208.598 405.058 209.617 405.058 Q215.404 405.058 218.783 408.229 Q222.163 411.401 222.163 416.817 Q222.163 422.396 218.691 425.498 Q215.219 428.577 208.899 428.577 Q206.723 428.577 204.455 428.206 Q202.209 427.836 199.802 427.095 L199.802 422.396 Q201.885 423.53 204.107 424.086 Q206.33 424.641 208.807 424.641 Q212.811 424.641 215.149 422.535 Q217.487 420.428 217.487 416.817 Q217.487 413.206 215.149 411.1 Q212.811 408.993 208.807 408.993 Q206.932 408.993 205.057 409.41 Q203.205 409.827 201.26 410.706 L201.26 393.345 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M241.376 396.424 Q237.765 396.424 235.936 399.989 Q234.13 403.53 234.13 410.66 Q234.13 417.766 235.936 421.331 Q237.765 424.873 241.376 424.873 Q245.01 424.873 246.816 421.331 Q248.644 417.766 248.644 410.66 Q248.644 403.53 246.816 399.989 Q245.01 396.424 241.376 396.424 M241.376 392.72 Q247.186 392.72 250.242 397.327 Q253.32 401.91 253.32 410.66 Q253.32 419.387 250.242 423.993 Q247.186 428.577 241.376 428.577 Q235.566 428.577 232.487 423.993 Q229.431 419.387 229.431 410.66 Q229.431 401.91 232.487 397.327 Q235.566 392.72 241.376 392.72 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M117.21 239.672 L146.886 239.672 L146.886 243.607 L117.21 243.607 L117.21 239.672 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M166.978 225.019 Q163.367 225.019 161.538 228.584 Q159.733 232.126 159.733 239.255 Q159.733 246.362 161.538 249.927 Q163.367 253.468 166.978 253.468 Q170.612 253.468 172.418 249.927 Q174.247 246.362 174.247 239.255 Q174.247 232.126 172.418 228.584 Q170.612 225.019 166.978 225.019 M166.978 221.316 Q172.788 221.316 175.844 225.922 Q178.922 230.505 178.922 239.255 Q178.922 247.982 175.844 252.589 Q172.788 257.172 166.978 257.172 Q161.168 257.172 158.089 252.589 Q155.034 247.982 155.034 239.255 Q155.034 230.505 158.089 225.922 Q161.168 221.316 166.978 221.316 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M187.14 250.621 L192.024 250.621 L192.024 256.501 L187.14 256.501 L187.14 250.621 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M206.237 252.565 L222.556 252.565 L222.556 256.501 L200.612 256.501 L200.612 252.565 Q203.274 249.811 207.857 245.181 Q212.464 240.528 213.644 239.186 Q215.89 236.663 216.769 234.927 Q217.672 233.167 217.672 231.478 Q217.672 228.723 215.728 226.987 Q213.807 225.251 210.705 225.251 Q208.506 225.251 206.052 226.015 Q203.621 226.779 200.844 228.329 L200.844 223.607 Q203.668 222.473 206.121 221.894 Q208.575 221.316 210.612 221.316 Q215.982 221.316 219.177 224.001 Q222.371 226.686 222.371 231.177 Q222.371 233.306 221.561 235.228 Q220.774 237.126 218.668 239.718 Q218.089 240.39 214.987 243.607 Q211.885 246.802 206.237 252.565 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M232.418 221.941 L250.774 221.941 L250.774 225.876 L236.7 225.876 L236.7 234.348 Q237.718 234.001 238.737 233.839 Q239.755 233.654 240.774 233.654 Q246.561 233.654 249.941 236.825 Q253.32 239.996 253.32 245.413 Q253.32 250.991 249.848 254.093 Q246.376 257.172 240.056 257.172 Q237.88 257.172 235.612 256.802 Q233.367 256.431 230.959 255.69 L230.959 250.991 Q233.043 252.126 235.265 252.681 Q237.487 253.237 239.964 253.237 Q243.968 253.237 246.306 251.13 Q248.644 249.024 248.644 245.413 Q248.644 241.802 246.306 239.695 Q243.968 237.589 239.964 237.589 Q238.089 237.589 236.214 238.005 Q234.362 238.422 232.418 239.302 L232.418 221.941 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M165.983 53.6146 Q162.372 53.6146 160.543 57.1794 Q158.737 60.7211 158.737 67.8507 Q158.737 74.9571 160.543 78.5219 Q162.372 82.0635 165.983 82.0635 Q169.617 82.0635 171.422 78.5219 Q173.251 74.9571 173.251 67.8507 Q173.251 60.7211 171.422 57.1794 Q169.617 53.6146 165.983 53.6146 M165.983 49.9109 Q171.793 49.9109 174.848 54.5174 Q177.927 59.1007 177.927 67.8507 Q177.927 76.5775 174.848 81.1839 Q171.793 85.7672 165.983 85.7672 Q160.173 85.7672 157.094 81.1839 Q154.038 76.5775 154.038 67.8507 Q154.038 59.1007 157.094 54.5174 Q160.173 49.9109 165.983 49.9109 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M186.145 79.2163 L191.029 79.2163 L191.029 85.0959 L186.145 85.0959 L186.145 79.2163 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M211.214 53.6146 Q207.603 53.6146 205.774 57.1794 Q203.969 60.7211 203.969 67.8507 Q203.969 74.9571 205.774 78.5219 Q207.603 82.0635 211.214 82.0635 Q214.848 82.0635 216.654 78.5219 Q218.482 74.9571 218.482 67.8507 Q218.482 60.7211 216.654 57.1794 Q214.848 53.6146 211.214 53.6146 M211.214 49.9109 Q217.024 49.9109 220.08 54.5174 Q223.158 59.1007 223.158 67.8507 Q223.158 76.5775 220.08 81.1839 Q217.024 85.7672 211.214 85.7672 Q205.404 85.7672 202.325 81.1839 Q199.27 76.5775 199.27 67.8507 Q199.27 59.1007 202.325 54.5174 Q205.404 49.9109 211.214 49.9109 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M241.376 53.6146 Q237.765 53.6146 235.936 57.1794 Q234.13 60.7211 234.13 67.8507 Q234.13 74.9571 235.936 78.5219 Q237.765 82.0635 241.376 82.0635 Q245.01 82.0635 246.816 78.5219 Q248.644 74.9571 248.644 67.8507 Q248.644 60.7211 246.816 57.1794 Q245.01 53.6146 241.376 53.6146 M241.376 49.9109 Q247.186 49.9109 250.242 54.5174 Q253.32 59.1007 253.32 67.8507 Q253.32 76.5775 250.242 81.1839 Q247.186 85.7672 241.376 85.7672 Q235.566 85.7672 232.487 81.1839 Q229.431 76.5775 229.431 67.8507 Q229.431 59.1007 232.487 54.5174 Q235.566 49.9109 241.376 49.9109 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M47.5702 425.608 L25.9905 425.608 L25.9905 419.752 L47.3474 419.752 Q52.4082 419.752 54.9545 417.778 Q57.4689 415.805 57.4689 411.858 Q57.4689 407.116 54.4452 404.378 Q51.4215 401.609 46.2016 401.609 L25.9905 401.609 L25.9905 395.753 L61.6384 395.753 L61.6384 401.609 L56.1639 401.609 Q59.4104 403.742 61.0019 406.575 Q62.5615 409.376 62.5615 413.1 Q62.5615 419.242 58.742 422.425 Q54.9226 425.608 47.5702 425.608 M25.1311 410.872 L25.1311 410.872 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip012)" d="M360.068 737.545 L344.068 753.545 L360.068 769.545 L376.068 753.545 L360.068 737.545 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip012)" d="M606.097 737.535 L590.097 753.535 L606.097 769.535 L622.097 753.535 L606.097 737.535 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip012)" d="M852.126 737.522 L836.126 753.522 L852.126 769.522 L868.126 753.522 L852.126 737.522 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip012)" d="M1098.15 737.506 L1082.15 753.506 L1098.15 769.506 L1114.15 753.506 L1098.15 737.506 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip012)" d="M1344.18 737.488 L1328.18 753.488 L1344.18 769.488 L1360.18 753.488 L1344.18 737.488 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip012)" d="M1590.21 737.469 L1574.21 753.469 L1590.21 769.469 L1606.21 753.469 L1590.21 737.469 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip012)" d="M1836.24 473.525 L1820.24 489.525 L1836.24 505.525 L1852.24 489.525 L1836.24 473.525 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip012)" d="M2082.27 234.336 L2066.27 250.336 L2082.27 266.336 L2098.27 250.336 L2082.27 234.336 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip012)" d="M2328.3 114.384 L2312.3 130.384 L2328.3 146.384 L2344.3 130.384 L2328.3 114.384 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip012)" d="M2574.33 51.816 L2558.33 67.816 L2574.33 83.816 L2590.33 67.816 L2574.33 51.816 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip012)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="360.068,753.545 606.097,753.545 606.097,753.535 852.126,753.535 852.126,753.522 1098.15,753.522 1098.15,753.506 1344.18,753.506 1344.18,753.488 1590.21,753.488 1590.21,753.469 1836.24,753.469 1836.24,489.525 2082.27,489.525 2082.27,250.336 2328.3,250.336 2328.3,130.384 2574.33,130.384 2574.33,67.816 "></polyline>
<path clip-path="url(#clip010)" d="M371.877 175.153 L628.302 175.153 L628.302 71.4732 L371.877 71.4732  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="371.877,175.153 628.302,175.153 628.302,71.4732 371.877,71.4732 371.877,175.153 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="397.956,123.313 554.431,123.313 "></polyline>
<path clip-path="url(#clip010)" d="M580.51 130.362 L580.51 114.667 L584.769 114.667 L584.769 130.2 Q584.769 133.88 586.204 135.732 Q587.639 137.561 590.51 137.561 Q593.959 137.561 595.95 135.362 Q597.963 133.163 597.963 129.366 L597.963 114.667 L602.223 114.667 L602.223 140.593 L597.963 140.593 L597.963 136.612 Q596.413 138.973 594.352 140.13 Q592.315 141.264 589.607 141.264 Q585.139 141.264 582.825 138.487 Q580.51 135.709 580.51 130.362 M591.227 114.042 L591.227 114.042 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M293.64 1734.12 L2640.76 1734.12 L2640.76 1007.24 L293.64 1007.24  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip013">
    <rect x="293" y="1007" width="2348" height="728"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip013)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="360.068,1734.12 360.068,1007.24 "></polyline>
<polyline clip-path="url(#clip013)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="913.633,1734.12 913.633,1007.24 "></polyline>
<polyline clip-path="url(#clip013)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1467.2,1734.12 1467.2,1007.24 "></polyline>
<polyline clip-path="url(#clip013)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2020.76,1734.12 2020.76,1007.24 "></polyline>
<polyline clip-path="url(#clip013)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2574.33,1734.12 2574.33,1007.24 "></polyline>
<polyline clip-path="url(#clip013)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="293.64,1696.41 2640.76,1696.41 "></polyline>
<polyline clip-path="url(#clip013)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="293.64,1473.55 2640.76,1473.55 "></polyline>
<polyline clip-path="url(#clip013)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="293.64,1250.68 2640.76,1250.68 "></polyline>
<polyline clip-path="url(#clip013)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="293.64,1027.82 2640.76,1027.82 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="293.64,1734.12 2640.76,1734.12 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="360.068,1734.12 360.068,1715.22 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="913.633,1734.12 913.633,1715.22 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1467.2,1734.12 1467.2,1715.22 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2020.76,1734.12 2020.76,1715.22 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2574.33,1734.12 2574.33,1715.22 "></polyline>
<path clip-path="url(#clip010)" d="M337.452 1767.34 Q333.841 1767.34 332.013 1770.9 Q330.207 1774.45 330.207 1781.58 Q330.207 1788.68 332.013 1792.25 Q333.841 1795.79 337.452 1795.79 Q341.087 1795.79 342.892 1792.25 Q344.721 1788.68 344.721 1781.58 Q344.721 1774.45 342.892 1770.9 Q341.087 1767.34 337.452 1767.34 M337.452 1763.64 Q343.263 1763.64 346.318 1768.24 Q349.397 1772.83 349.397 1781.58 Q349.397 1790.3 346.318 1794.91 Q343.263 1799.49 337.452 1799.49 Q331.642 1799.49 328.564 1794.91 Q325.508 1790.3 325.508 1781.58 Q325.508 1772.83 328.564 1768.24 Q331.642 1763.64 337.452 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M357.614 1792.94 L362.499 1792.94 L362.499 1798.82 L357.614 1798.82 L357.614 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M382.684 1767.34 Q379.073 1767.34 377.244 1770.9 Q375.438 1774.45 375.438 1781.58 Q375.438 1788.68 377.244 1792.25 Q379.073 1795.79 382.684 1795.79 Q386.318 1795.79 388.123 1792.25 Q389.952 1788.68 389.952 1781.58 Q389.952 1774.45 388.123 1770.9 Q386.318 1767.34 382.684 1767.34 M382.684 1763.64 Q388.494 1763.64 391.549 1768.24 Q394.628 1772.83 394.628 1781.58 Q394.628 1790.3 391.549 1794.91 Q388.494 1799.49 382.684 1799.49 Q376.873 1799.49 373.795 1794.91 Q370.739 1790.3 370.739 1781.58 Q370.739 1772.83 373.795 1768.24 Q376.873 1763.64 382.684 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M885.369 1794.89 L901.689 1794.89 L901.689 1798.82 L879.744 1798.82 L879.744 1794.89 Q882.406 1792.13 886.99 1787.5 Q891.596 1782.85 892.777 1781.51 Q895.022 1778.98 895.902 1777.25 Q896.804 1775.49 896.804 1773.8 Q896.804 1771.04 894.86 1769.31 Q892.939 1767.57 889.837 1767.57 Q887.638 1767.57 885.184 1768.34 Q882.754 1769.1 879.976 1770.65 L879.976 1765.93 Q882.8 1764.79 885.254 1764.21 Q887.707 1763.64 889.744 1763.64 Q895.115 1763.64 898.309 1766.32 Q901.503 1769.01 901.503 1773.5 Q901.503 1775.63 900.693 1777.55 Q899.906 1779.45 897.8 1782.04 Q897.221 1782.71 894.119 1785.93 Q891.017 1789.12 885.369 1794.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M911.503 1792.94 L916.388 1792.94 L916.388 1798.82 L911.503 1798.82 L911.503 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M926.619 1764.26 L944.975 1764.26 L944.975 1768.2 L930.901 1768.2 L930.901 1776.67 Q931.92 1776.32 932.938 1776.16 Q933.957 1775.97 934.975 1775.97 Q940.763 1775.97 944.142 1779.15 Q947.522 1782.32 947.522 1787.73 Q947.522 1793.31 944.05 1796.41 Q940.577 1799.49 934.258 1799.49 Q932.082 1799.49 929.813 1799.12 Q927.568 1798.75 925.161 1798.01 L925.161 1793.31 Q927.244 1794.45 929.466 1795 Q931.688 1795.56 934.165 1795.56 Q938.17 1795.56 940.508 1793.45 Q942.846 1791.34 942.846 1787.73 Q942.846 1784.12 940.508 1782.02 Q938.17 1779.91 934.165 1779.91 Q932.29 1779.91 930.415 1780.33 Q928.563 1780.74 926.619 1781.62 L926.619 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M1434.36 1764.26 L1452.72 1764.26 L1452.72 1768.2 L1438.64 1768.2 L1438.64 1776.67 Q1439.66 1776.32 1440.68 1776.16 Q1441.7 1775.97 1442.72 1775.97 Q1448.51 1775.97 1451.89 1779.15 Q1455.27 1782.32 1455.27 1787.73 Q1455.27 1793.31 1451.79 1796.41 Q1448.32 1799.49 1442 1799.49 Q1439.83 1799.49 1437.56 1799.12 Q1435.31 1798.75 1432.9 1798.01 L1432.9 1793.31 Q1434.99 1794.45 1437.21 1795 Q1439.43 1795.56 1441.91 1795.56 Q1445.91 1795.56 1448.25 1793.45 Q1450.59 1791.34 1450.59 1787.73 Q1450.59 1784.12 1448.25 1782.02 Q1445.91 1779.91 1441.91 1779.91 Q1440.03 1779.91 1438.16 1780.33 Q1436.31 1780.74 1434.36 1781.62 L1434.36 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M1464.48 1792.94 L1469.36 1792.94 L1469.36 1798.82 L1464.48 1798.82 L1464.48 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M1489.55 1767.34 Q1485.94 1767.34 1484.11 1770.9 Q1482.3 1774.45 1482.3 1781.58 Q1482.3 1788.68 1484.11 1792.25 Q1485.94 1795.79 1489.55 1795.79 Q1493.18 1795.79 1494.99 1792.25 Q1496.82 1788.68 1496.82 1781.58 Q1496.82 1774.45 1494.99 1770.9 Q1493.18 1767.34 1489.55 1767.34 M1489.55 1763.64 Q1495.36 1763.64 1498.41 1768.24 Q1501.49 1772.83 1501.49 1781.58 Q1501.49 1790.3 1498.41 1794.91 Q1495.36 1799.49 1489.55 1799.49 Q1483.74 1799.49 1480.66 1794.91 Q1477.6 1790.3 1477.6 1781.58 Q1477.6 1772.83 1480.66 1768.24 Q1483.74 1763.64 1489.55 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M1987.08 1764.26 L2009.3 1764.26 L2009.3 1766.25 L1996.76 1798.82 L1991.87 1798.82 L2003.68 1768.2 L1987.08 1768.2 L1987.08 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M2018.43 1792.94 L2023.31 1792.94 L2023.31 1798.82 L2018.43 1798.82 L2018.43 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M2033.54 1764.26 L2051.9 1764.26 L2051.9 1768.2 L2037.82 1768.2 L2037.82 1776.67 Q2038.84 1776.32 2039.86 1776.16 Q2040.88 1775.97 2041.9 1775.97 Q2047.68 1775.97 2051.06 1779.15 Q2054.44 1782.32 2054.44 1787.73 Q2054.44 1793.31 2050.97 1796.41 Q2047.5 1799.49 2041.18 1799.49 Q2039 1799.49 2036.74 1799.12 Q2034.49 1798.75 2032.08 1798.01 L2032.08 1793.31 Q2034.17 1794.45 2036.39 1795 Q2038.61 1795.56 2041.09 1795.56 Q2045.09 1795.56 2047.43 1793.45 Q2049.77 1791.34 2049.77 1787.73 Q2049.77 1784.12 2047.43 1782.02 Q2045.09 1779.91 2041.09 1779.91 Q2039.21 1779.91 2037.34 1780.33 Q2035.49 1780.74 2033.54 1781.62 L2033.54 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M2526.4 1794.89 L2534.04 1794.89 L2534.04 1768.52 L2525.73 1770.19 L2525.73 1765.93 L2533.99 1764.26 L2538.67 1764.26 L2538.67 1794.89 L2546.31 1794.89 L2546.31 1798.82 L2526.4 1798.82 L2526.4 1794.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M2565.75 1767.34 Q2562.14 1767.34 2560.31 1770.9 Q2558.51 1774.45 2558.51 1781.58 Q2558.51 1788.68 2560.31 1792.25 Q2562.14 1795.79 2565.75 1795.79 Q2569.39 1795.79 2571.19 1792.25 Q2573.02 1788.68 2573.02 1781.58 Q2573.02 1774.45 2571.19 1770.9 Q2569.39 1767.34 2565.75 1767.34 M2565.75 1763.64 Q2571.56 1763.64 2574.62 1768.24 Q2577.7 1772.83 2577.7 1781.58 Q2577.7 1790.3 2574.62 1794.91 Q2571.56 1799.49 2565.75 1799.49 Q2559.94 1799.49 2556.86 1794.91 Q2553.81 1790.3 2553.81 1781.58 Q2553.81 1772.83 2556.86 1768.24 Q2559.94 1763.64 2565.75 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M2585.91 1792.94 L2590.8 1792.94 L2590.8 1798.82 L2585.91 1798.82 L2585.91 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M2610.98 1767.34 Q2607.37 1767.34 2605.54 1770.9 Q2603.74 1774.45 2603.74 1781.58 Q2603.74 1788.68 2605.54 1792.25 Q2607.37 1795.79 2610.98 1795.79 Q2614.62 1795.79 2616.42 1792.25 Q2618.25 1788.68 2618.25 1781.58 Q2618.25 1774.45 2616.42 1770.9 Q2614.62 1767.34 2610.98 1767.34 M2610.98 1763.64 Q2616.79 1763.64 2619.85 1768.24 Q2622.93 1772.83 2622.93 1781.58 Q2622.93 1790.3 2619.85 1794.91 Q2616.79 1799.49 2610.98 1799.49 Q2605.17 1799.49 2602.09 1794.91 Q2599.04 1790.3 2599.04 1781.58 Q2599.04 1772.83 2602.09 1768.24 Q2605.17 1763.64 2610.98 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M1451.38 1833.78 L1457.27 1833.78 L1457.27 1863.03 L1474.74 1847.65 L1482.22 1847.65 L1463.31 1864.33 L1483.02 1883.3 L1475.38 1883.3 L1457.27 1865.89 L1457.27 1883.3 L1451.38 1883.3 L1451.38 1833.78 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="293.64,1734.12 293.64,1007.24 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="293.64,1696.41 312.538,1696.41 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="293.64,1473.55 312.538,1473.55 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="293.64,1250.68 312.538,1250.68 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="293.64,1027.82 312.538,1027.82 "></polyline>
<path clip-path="url(#clip010)" d="M241.376 1682.21 Q237.765 1682.21 235.936 1685.78 Q234.13 1689.32 234.13 1696.45 Q234.13 1703.56 235.936 1707.12 Q237.765 1710.66 241.376 1710.66 Q245.01 1710.66 246.816 1707.12 Q248.644 1703.56 248.644 1696.45 Q248.644 1689.32 246.816 1685.78 Q245.01 1682.21 241.376 1682.21 M241.376 1678.51 Q247.186 1678.51 250.242 1683.12 Q253.32 1687.7 253.32 1696.45 Q253.32 1705.18 250.242 1709.78 Q247.186 1714.37 241.376 1714.37 Q235.566 1714.37 232.487 1709.78 Q229.431 1705.18 229.431 1696.45 Q229.431 1687.7 232.487 1683.12 Q235.566 1678.51 241.376 1678.51 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M233.413 1486.89 L241.052 1486.89 L241.052 1460.53 L232.742 1462.19 L232.742 1457.93 L241.005 1456.27 L245.681 1456.27 L245.681 1486.89 L253.32 1486.89 L253.32 1490.83 L233.413 1490.83 L233.413 1486.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M237.001 1264.03 L253.32 1264.03 L253.32 1267.96 L231.376 1267.96 L231.376 1264.03 Q234.038 1261.27 238.621 1256.64 Q243.228 1251.99 244.408 1250.65 Q246.654 1248.12 247.533 1246.39 Q248.436 1244.63 248.436 1242.94 Q248.436 1240.18 246.492 1238.45 Q244.57 1236.71 241.468 1236.71 Q239.269 1236.71 236.816 1237.48 Q234.385 1238.24 231.607 1239.79 L231.607 1235.07 Q234.431 1233.93 236.885 1233.36 Q239.339 1232.78 241.376 1232.78 Q246.746 1232.78 249.941 1235.46 Q253.135 1238.15 253.135 1242.64 Q253.135 1244.77 252.325 1246.69 Q251.538 1248.59 249.431 1251.18 Q248.853 1251.85 245.751 1255.07 Q242.649 1258.26 237.001 1264.03 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M246.191 1026.46 Q249.547 1027.18 251.422 1029.45 Q253.32 1031.72 253.32 1035.05 Q253.32 1040.17 249.802 1042.97 Q246.283 1045.77 239.802 1045.77 Q237.626 1045.77 235.311 1045.33 Q233.019 1044.91 230.566 1044.05 L230.566 1039.54 Q232.51 1040.67 234.825 1041.25 Q237.14 1041.83 239.663 1041.83 Q244.061 1041.83 246.353 1040.1 Q248.667 1038.36 248.667 1035.05 Q248.667 1031.99 246.515 1030.28 Q244.385 1028.55 240.566 1028.55 L236.538 1028.55 L236.538 1024.7 L240.751 1024.7 Q244.2 1024.7 246.029 1023.34 Q247.857 1021.95 247.857 1019.36 Q247.857 1016.69 245.959 1015.28 Q244.084 1013.85 240.566 1013.85 Q238.644 1013.85 236.445 1014.26 Q234.246 1014.68 231.607 1015.56 L231.607 1011.39 Q234.269 1010.65 236.584 1010.28 Q238.922 1009.91 240.982 1009.91 Q246.306 1009.91 249.408 1012.34 Q252.51 1014.75 252.51 1018.87 Q252.51 1021.74 250.866 1023.73 Q249.223 1025.7 246.191 1026.46 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M139.207 1354.07 L156.554 1366.96 L174.855 1353.4 L174.855 1360.3 L160.851 1370.68 L174.855 1381.06 L174.855 1387.96 L156.204 1374.12 L139.207 1386.79 L139.207 1379.88 L151.907 1370.43 L139.207 1360.97 L139.207 1354.07 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip013)" d="M360.068 1457.55 L344.068 1473.55 L360.068 1489.55 L376.068 1473.55 L360.068 1457.55 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M581.494 1540.33 L565.494 1556.33 L581.494 1572.33 L597.494 1556.33 L581.494 1540.33 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M802.92 1575.23 L786.92 1591.23 L802.92 1607.23 L818.92 1591.23 L802.92 1575.23 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M1024.35 1603.62 L1008.35 1619.62 L1024.35 1635.62 L1040.35 1619.62 L1024.35 1603.62 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M1245.77 1632.28 L1229.77 1648.28 L1245.77 1664.28 L1261.77 1648.28 L1245.77 1632.28 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M1467.2 1662.37 L1451.2 1678.37 L1467.2 1694.37 L1483.2 1678.37 L1467.2 1662.37 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M1688.62 1694.18 L1672.62 1710.18 L1688.62 1726.18 L1704.62 1710.18 L1688.62 1694.18 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M1910.05 1697.55 L1894.05 1713.55 L1910.05 1729.55 L1926.05 1713.55 L1910.05 1697.55 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M2131.48 1688.43 L2115.48 1704.43 L2131.48 1720.43 L2147.48 1704.43 L2131.48 1688.43 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M2352.9 1680.82 L2336.9 1696.82 L2352.9 1712.82 L2368.9 1696.82 L2352.9 1680.82 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M2574.33 1674.87 L2558.33 1690.87 L2574.33 1706.87 L2590.33 1690.87 L2574.33 1674.87 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip013)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="360.068,1473.55 581.494,1473.55 581.494,1556.33 802.92,1556.33 802.92,1591.23 1024.35,1591.23 1024.35,1619.62 1245.77,1619.62 1245.77,1648.28 1467.2,1648.28 1467.2,1678.37 1688.62,1678.37 1688.62,1710.18 1910.05,1710.18 1910.05,1713.55 2131.48,1713.55 2131.48,1704.43 2352.9,1704.43 2352.9,1696.82 2574.33,1696.82 2574.33,1690.87 "></polyline>
<path clip-path="url(#clip013)" d="M360.068 1011.82 L344.068 1027.82 L360.068 1043.82 L376.068 1027.82 L360.068 1011.82 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M581.494 1048.04 L565.494 1064.04 L581.494 1080.04 L597.494 1064.04 L581.494 1048.04 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M802.92 1125.88 L786.92 1141.88 L802.92 1157.88 L818.92 1141.88 L802.92 1125.88 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M1024.35 1214.65 L1008.35 1230.65 L1024.35 1246.65 L1040.35 1230.65 L1024.35 1214.65 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M1245.77 1309.62 L1229.77 1325.62 L1245.77 1341.62 L1261.77 1325.62 L1245.77 1309.62 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M1467.2 1410.27 L1451.2 1426.27 L1467.2 1442.27 L1483.2 1426.27 L1467.2 1410.27 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M1688.62 1516.81 L1672.62 1532.81 L1688.62 1548.81 L1704.62 1532.81 L1688.62 1516.81 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M1910.05 1595.71 L1894.05 1611.71 L1910.05 1627.71 L1926.05 1611.71 L1910.05 1595.71 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M2131.48 1637.47 L2115.48 1653.47 L2131.48 1669.47 L2147.48 1653.47 L2131.48 1637.47 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M2352.9 1654.43 L2336.9 1670.43 L2352.9 1686.43 L2368.9 1670.43 L2352.9 1654.43 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip013)" d="M2574.33 1657.4 L2558.33 1673.4 L2574.33 1689.4 L2590.33 1673.4 L2574.33 1657.4 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip013)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="360.068,1027.82 581.494,1027.82 581.494,1064.04 802.92,1064.04 802.92,1141.88 1024.35,1141.88 1024.35,1230.65 1245.77,1230.65 1245.77,1325.62 1467.2,1325.62 1467.2,1426.27 1688.62,1426.27 1688.62,1532.81 1910.05,1532.81 1910.05,1611.71 2131.48,1611.71 2131.48,1653.47 2352.9,1653.47 2352.9,1670.43 2574.33,1670.43 2574.33,1673.4 "></polyline>
<path clip-path="url(#clip010)" d="M2284.71 1186.99 L2562.52 1186.99 L2562.52 1031.47 L2284.71 1031.47  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip010)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2284.71,1186.99 2562.52,1186.99 2562.52,1031.47 2284.71,1031.47 2284.71,1186.99 "></polyline>
<polyline clip-path="url(#clip010)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2310.78,1083.31 2467.26,1083.31 "></polyline>
<path clip-path="url(#clip010)" d="M2517.99 1074.67 L2508.62 1087.28 L2518.48 1100.59 L2513.45 1100.59 L2505.91 1090.41 L2498.36 1100.59 L2493.34 1100.59 L2503.41 1087.03 L2494.19 1074.67 L2499.22 1074.67 L2506.09 1083.9 L2512.97 1074.67 L2517.99 1074.67 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M2523.64 1098.05 L2528.36 1098.05 L2528.36 1083.9 L2523.2 1084.85 L2523.2 1082.17 L2528.52 1081.26 L2531.69 1081.26 L2531.69 1098.05 L2536.44 1098.05 L2536.44 1100.59 L2523.64 1100.59 L2523.64 1098.05 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip010)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2310.78,1135.15 2467.26,1135.15 "></polyline>
<path clip-path="url(#clip010)" d="M2517.99 1126.51 L2508.62 1139.12 L2518.48 1152.43 L2513.45 1152.43 L2505.91 1142.25 L2498.36 1152.43 L2493.34 1152.43 L2503.41 1138.87 L2494.19 1126.51 L2499.22 1126.51 L2506.09 1135.74 L2512.97 1126.51 L2517.99 1126.51 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip010)" d="M2526.23 1149.79 L2536.05 1149.79 L2536.05 1152.43 L2522.2 1152.43 L2522.2 1149.89 Q2522.99 1149.17 2524.45 1147.87 Q2532.41 1140.81 2532.41 1138.64 Q2532.41 1137.11 2531.21 1136.18 Q2530 1135.23 2528.04 1135.23 Q2526.83 1135.23 2525.42 1135.65 Q2524.01 1136.04 2522.34 1136.85 L2522.34 1134.01 Q2524.12 1133.36 2525.65 1133.04 Q2527.2 1132.71 2528.52 1132.71 Q2531.88 1132.71 2533.89 1134.24 Q2535.91 1135.77 2535.91 1138.27 Q2535.91 1141.48 2528.25 1148.06 Q2526.95 1149.17 2526.23 1149.79 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path></svg>
</div>
</div>
</div>
</section>
</section>
<section id="sequential-dense-formulation" class="level2">
<h2 class="anchored" data-anchor-id="sequential-dense-formulation">Sequential (dense) formulation</h2>
<p>We can express <span class="math inline">\bar{\bm x}</span> as a function of <span class="math inline">\bar{\bm u}</span> and <span class="math inline">\mathbf x_0</span>. This can be done in a straightforward way using (<a href="#eq-linear_system_linear_constraints_matrix_format" class="quarto-xref">Eq.&nbsp;1</a>), namely, <span class="math display">
\bar{\bm x} = (\mathbf I-\overline{\mathbf A})^{-1}\overline{\mathbf B} \bm u + (\mathbf I-\overline{\mathbf A})^{-1} \overline{\mathbf A}_0 \mathbf x_0.
</span></p>
<p>However, instead of solving the sets of equations, we can do this substitution in a more insightful way. Write down the state equation for several discrete times <span class="math display">
\begin{aligned}
\bm x_1 &amp;= \mathbf A\mathbf x_0 + \mathbf B\bm u_0\\
\bm x_2 &amp;= \mathbf A\mathbf x_0 + \mathbf B\bm u_0\\
     &amp;= \mathbf A(\mathbf A\mathbf x_0 + \mathbf B\bm u_0)+ \mathbf B\bm u_0\\
     &amp;= \mathbf A^2\mathbf x_0 + \mathbf A\mathbf B\bm u_0 + \mathbf B\bm u_0\\
     &amp;\vdots\\
\bm x_k &amp;= \mathbf A^k\mathbf x_0 + \mathbf A^{k-1}\mathbf B\bm u_0 +\mathbf A^{k-2}\mathbf B\bm u_1 +\ldots \mathbf B\bm u_{k-1}.
\end{aligned}
</span></p>
<p>Rewriting into matrix-vector form (and extending the time <span class="math inline">k</span> up to the final time <span class="math inline">N</span>) <span class="math display">
\begin{bmatrix}
\bm x_1\\\bm x_2\\\vdots\\\bm x_N
\end{bmatrix}
=
\underbrace{
\begin{bmatrix}
  \mathbf B &amp; &amp; &amp; \\
  \mathbf A\mathbf B &amp; \mathbf B &amp; &amp; \\
  \vdots &amp; &amp; \ddots &amp;\\
  \mathbf A^{N-1}\mathbf B &amp; \mathbf A^{N-2}\mathbf B &amp; &amp; \mathbf B
\end{bmatrix}}_{\widehat{\mathbf C}}
  \begin{bmatrix}
\bm u_0\\\bm u_1\\\vdots\\\bm u_{N-1}
\end{bmatrix}
+
\underbrace{
  \begin{bmatrix}
\mathbf A\\\mathbf A^2\\\vdots\\\mathbf A^N
\end{bmatrix}}_{\widehat{\mathbf A}}\mathbf x_0.
</span></p>
<p>For convenience, let’s rewrite the compact relation between <span class="math inline">\bar{\bm x}</span> and <span class="math inline">\bar{\bm u}</span> and <span class="math inline">\mathbf x_0</span> <span id="eq-x_as_function_of_u_and_x0"><span class="math display">
\bar{\bm x} = \widehat{\mathbf C} \bar{\bm u} + \widehat{\mathbf A} \mathbf x_0.
\tag{2}</span></span></p>
<p>We can now substitute this into the original cost, which then becomes independent of <span class="math inline">\bar{\bm x}</span>, which we reflect formally by using a new name <span class="math inline">\tilde J</span> <span class="math display">
\begin{aligned}
\tilde J(\bar{\bm u};\mathbf x_0) &amp;= \frac{1}{2}(\widehat{\mathbf C} \bar{\bm u} + \widehat{\mathbf A} \mathbf x_0)^\top\overline{\mathbf Q} (\widehat{\mathbf C} \bar{\bm u} + \widehat{\mathbf A} \mathbf x_0) + \frac{1}{2}\bar{\bm u}^\top\overline{\mathbf R} \bar{\bm u} + \frac{1}{2}\mathbf x_0^\top\mathbf Q\mathbf x_0\\
&amp;= \frac{1}{2}\bar{\bm u}^\top\widehat{\mathbf C}^\top \overline{\mathbf Q} \widehat{\mathbf C} \bar{\bm u} + \mathbf x_0^\top\widehat{\mathbf A}^\top \overline{\mathbf Q} \widehat{\mathbf C} \bar{\bm u} + \frac{1}{2} \mathbf x_0^\top\widehat{\mathbf A}^\top \overline{\mathbf Q} \widehat{\mathbf A} \mathbf x_0 + \frac{1}{2}\bar{\bm u}^\top\overline{\mathbf R} \bar{\bm u} + \frac{1}{2}\mathbf x_0^\top\mathbf Q\mathbf x_0\\
&amp;= \frac{1}{2}\bar{\bm u}^\top(\widehat{\mathbf C}^\top \overline{\mathbf Q} \widehat{\mathbf C} + \overline{\mathbf R})\bar{\bm u} + \mathbf x_0^\top\widehat{\mathbf A}^\top \overline{\mathbf Q} \widehat{\mathbf C} \bar{\bm u} + \frac{1}{2} \mathbf x_0^\top(\widehat{\mathbf A}^\top \overline{\mathbf Q} \widehat{\mathbf A} + \mathbf Q)\mathbf x_0.
\end{aligned}
</span></p>
<p>The last term (the one independent of <span class="math inline">\bar{\bm u}</span>) does not have an impact on the optimal <span class="math inline">\bar{\bm u}</span> and therefore it can be discarded, but such minor modification perhaps does not justify a new name for the cost function. We write it as <span class="math display">
\tilde J(\bar{\bm u};\mathbf x_0) = \frac{1}{2}\bar{\bm u}^\top\underbrace{(\widehat{\mathbf C}^\top \overline{\mathbf Q} \widehat{\mathbf C} + \overline{\mathbf R})}_{\mathbf H}\bar{\bm u} +  \mathbf x_0^\top\underbrace{\widehat{\mathbf A}^\top \overline{\mathbf Q} \widehat{\mathbf C}}_{\mathbf F^\top} \bar{\bm u}.
</span></p>
<p>This cost is a function of <span class="math inline">\bar{\bm u}</span>, the initial state <span class="math inline">\mathbf x_0</span> is regarded as a fixed parameter. Its gradient is <span class="math display">
\nabla \tilde J = \mathbf H\bar{\bm u}+\mathbf F\mathbf x_0.
</span></p>
<p>Setting it to zero leads to the following linear system of equations <span class="math display">
\mathbf H\bar{\bm u}=-\mathbf F\mathbf x_0
</span> that needs to be solved for <span class="math inline">\bar{\bm u}</span>. Formally, we write the solution as <span class="math display">
\bar{\bm u} = -\mathbf H^{-1} \mathbf F \mathbf x_0.
</span></p>
<div id="exm-direct-sequential" class="theorem example">
<p><span class="theorem-title"><strong>Example 3 (Reformulating the unconstrained LQR problem as a system of linear equations – sequential approach)</strong></span> &nbsp;</p>
<div id="6" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Random</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="bu">Random</span>.<span class="fu">seed!</span>(<span class="fl">1234</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">direct_dlqr_sequential</span>(A,B,x₀,Q,R,S,N)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="fu">size</span>(A)[<span class="fl">1</span>]</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    m <span class="op">=</span> <span class="fu">size</span>(B)[<span class="fl">2</span>]</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    Q̄ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>n,N<span class="op">*</span>n),<span class="fu">repeat</span>([n],N),<span class="fu">repeat</span>([n],N))</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>(N<span class="op">-</span><span class="fl">1</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        Q̄[<span class="fu">Block</span>(i,i)] <span class="op">=</span> Q</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    Q̄[<span class="fu">Block</span>(N,N)] <span class="op">=</span> S</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    R̄ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>m,N<span class="op">*</span>m),<span class="fu">repeat</span>([m],N),<span class="fu">repeat</span>([m],N))</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>N</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        R̄[<span class="fu">Block</span>(i,i)] <span class="op">=</span> R</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    Ĉ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>n,N<span class="op">*</span>m),<span class="fu">repeat</span>([n],N),<span class="fu">repeat</span>([m],N))</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    Â <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>n,n),<span class="fu">repeat</span>([n],N),[n])</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>N</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> j <span class="op">=</span> <span class="fl">1</span><span class="op">:</span>i</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>            Ĉ[<span class="fu">Block</span>(i,j)] <span class="op">=</span> A<span class="op">^</span>(i<span class="op">-</span>j)<span class="op">*</span>B</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>            Â[<span class="fu">Block</span>(i,<span class="fl">1</span>)] <span class="op">=</span> A<span class="op">^</span>i</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    H <span class="op">=</span> Ĉ<span class="ch">'*Q̄*Ĉ + R̄</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    H <span class="op">=</span> <span class="fu">Array</span>(H)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    F <span class="op">=</span> Ĉ<span class="ch">'*Q̄*Â</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    F <span class="op">=</span> <span class="fu">Array</span>(F)</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    uopt <span class="op">=</span> <span class="fu">-H\</span>(F<span class="op">*</span>x₀)</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    xopt <span class="op">=</span> Ĉ<span class="op">*</span>uopt <span class="op">+</span> Â<span class="op">*</span>x₀</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    xopt <span class="op">=</span> <span class="fu">reshape</span>(xopt,(<span class="fl">2</span>,<span class="op">:</span>))</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> xopt,uopt</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="fl">2</span>               <span class="co"># Number of state variables.</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> <span class="fl">1</span>               <span class="co"># Number of (control) input variables. </span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> <span class="fu">rand</span>(n,n)       <span class="co"># State matrix.</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> <span class="fu">rand</span>(n,m)       <span class="co"># Input coupling matrix.</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>x₀ <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">3.0</span>]     <span class="co"># Initial state.</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="fl">10</span>              <span class="co"># Time horizon.</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">2.0</span>]      </span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">2.0</span>]</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> [<span class="fl">1.0</span>]</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>S <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>s)     <span class="co"># Matrix defining the terminal state cost.</span></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>Q <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>q)     <span class="co"># Matrix defining the running state dost.</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>R <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>r)     <span class="co"># Matrix defining the cost of control.</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>xopt,uopt <span class="op">=</span> <span class="fu">direct_dlqr_sequential</span>(A,B,x₀,Q,R,S,N)</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Plots</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>p1 <span class="op">=</span> <span class="fu">plot</span>(<span class="fl">0</span><span class="op">:</span>(N<span class="op">-</span><span class="fl">1</span>),uopt,marker<span class="op">=:</span>diamond,label<span class="op">=</span><span class="st">"u"</span>,linetype<span class="op">=:</span>steppost)</span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"k"</span>)</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"u"</span>)</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>p2 <span class="op">=</span> <span class="fu">plot</span>(<span class="fl">0</span><span class="op">:</span>N,<span class="fu">hcat</span>(x₀,xopt)<span class="ch">',marker=:diamond,label=["x₁" "x₂"],linetype=:steppost)</span></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"k"</span>)</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"x"</span>)</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(p1,p2,layout<span class="op">=</span>(<span class="fl">2</span>,<span class="fl">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="1">
<!--?xml version="1.0" encoding="utf-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="672" height="480" viewbox="0 0 2688 1920">
<defs>
  <clippath id="clip070">
    <rect x="0" y="0" width="2688" height="1920"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip070)" d="M0 1920 L2688 1920 L2688 0 L0 0  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip071">
    <rect x="537" y="0" width="1883" height="1883"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip070)" d="M217.599 774.117 L2640.76 774.117 L2640.76 47.2441 L217.599 47.2441  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip072">
    <rect x="217" y="47" width="2424" height="728"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="286.179,774.117 286.179,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="794.178,774.117 794.178,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1302.18,774.117 1302.18,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1810.18,774.117 1810.18,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2318.18,774.117 2318.18,47.2441 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="217.599,673.398 2640.76,673.398 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="217.599,471.406 2640.76,471.406 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="217.599,269.414 2640.76,269.414 "></polyline>
<polyline clip-path="url(#clip072)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="217.599,67.4223 2640.76,67.4223 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,774.117 2640.76,774.117 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="286.179,774.117 286.179,755.219 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="794.178,774.117 794.178,755.219 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1302.18,774.117 1302.18,755.219 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1810.18,774.117 1810.18,755.219 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2318.18,774.117 2318.18,755.219 "></polyline>
<path clip-path="url(#clip070)" d="M286.179 807.34 Q282.568 807.34 280.739 810.904 Q278.934 814.446 278.934 821.576 Q278.934 828.682 280.739 832.247 Q282.568 835.789 286.179 835.789 Q289.813 835.789 291.619 832.247 Q293.447 828.682 293.447 821.576 Q293.447 814.446 291.619 810.904 Q289.813 807.34 286.179 807.34 M286.179 803.636 Q291.989 803.636 295.045 808.242 Q298.123 812.826 298.123 821.576 Q298.123 830.303 295.045 834.909 Q291.989 839.492 286.179 839.492 Q280.369 839.492 277.29 834.909 Q274.234 830.303 274.234 821.576 Q274.234 812.826 277.29 808.242 Q280.369 803.636 286.179 803.636 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M788.831 834.886 L805.15 834.886 L805.15 838.821 L783.206 838.821 L783.206 834.886 Q785.868 832.131 790.451 827.502 Q795.058 822.849 796.238 821.506 Q798.484 818.983 799.363 817.247 Q800.266 815.488 800.266 813.798 Q800.266 811.043 798.322 809.307 Q796.4 807.571 793.299 807.571 Q791.1 807.571 788.646 808.335 Q786.215 809.099 783.438 810.65 L783.438 805.928 Q786.262 804.793 788.715 804.215 Q791.169 803.636 793.206 803.636 Q798.576 803.636 801.771 806.321 Q804.965 809.006 804.965 813.497 Q804.965 815.627 804.155 817.548 Q803.368 819.446 801.262 822.039 Q800.683 822.71 797.581 825.928 Q794.479 829.122 788.831 834.886 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M1305.19 808.335 L1293.38 826.784 L1305.19 826.784 L1305.19 808.335 M1303.96 804.261 L1309.84 804.261 L1309.84 826.784 L1314.77 826.784 L1314.77 830.673 L1309.84 830.673 L1309.84 838.821 L1305.19 838.821 L1305.19 830.673 L1289.59 830.673 L1289.59 826.159 L1303.96 804.261 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M1810.58 819.678 Q1807.43 819.678 1805.58 821.83 Q1803.75 823.983 1803.75 827.733 Q1803.75 831.46 1805.58 833.636 Q1807.43 835.789 1810.58 835.789 Q1813.73 835.789 1815.56 833.636 Q1817.41 831.46 1817.41 827.733 Q1817.41 823.983 1815.56 821.83 Q1813.73 819.678 1810.58 819.678 M1819.86 805.025 L1819.86 809.284 Q1818.11 808.451 1816.3 808.011 Q1814.52 807.571 1812.76 807.571 Q1808.13 807.571 1805.67 810.696 Q1803.24 813.821 1802.9 820.141 Q1804.26 818.127 1806.32 817.062 Q1808.38 815.974 1810.86 815.974 Q1816.07 815.974 1819.08 819.145 Q1822.11 822.293 1822.11 827.733 Q1822.11 833.057 1818.96 836.275 Q1815.81 839.492 1810.58 839.492 Q1804.59 839.492 1801.42 834.909 Q1798.24 830.303 1798.24 821.576 Q1798.24 813.381 1802.13 808.52 Q1806.02 803.636 1812.57 803.636 Q1814.33 803.636 1816.11 803.983 Q1817.92 804.33 1819.86 805.025 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2318.18 822.409 Q2314.84 822.409 2312.92 824.191 Q2311.02 825.974 2311.02 829.099 Q2311.02 832.224 2312.92 834.006 Q2314.84 835.789 2318.18 835.789 Q2321.51 835.789 2323.43 834.006 Q2325.35 832.201 2325.35 829.099 Q2325.35 825.974 2323.43 824.191 Q2321.53 822.409 2318.18 822.409 M2313.5 820.418 Q2310.49 819.678 2308.8 817.617 Q2307.13 815.557 2307.13 812.594 Q2307.13 808.451 2310.07 806.043 Q2313.04 803.636 2318.18 803.636 Q2323.34 803.636 2326.28 806.043 Q2329.22 808.451 2329.22 812.594 Q2329.22 815.557 2327.53 817.617 Q2325.86 819.678 2322.88 820.418 Q2326.25 821.205 2328.13 823.497 Q2330.03 825.789 2330.03 829.099 Q2330.03 834.122 2326.95 836.807 Q2323.89 839.492 2318.18 839.492 Q2312.46 839.492 2309.38 836.807 Q2306.32 834.122 2306.32 829.099 Q2306.32 825.789 2308.22 823.497 Q2310.12 821.205 2313.5 820.418 M2311.79 813.034 Q2311.79 815.719 2313.45 817.224 Q2315.14 818.729 2318.18 818.729 Q2321.19 818.729 2322.88 817.224 Q2324.59 815.719 2324.59 813.034 Q2324.59 810.349 2322.88 808.844 Q2321.19 807.34 2318.18 807.34 Q2315.14 807.34 2313.45 808.844 Q2311.79 810.349 2311.79 813.034 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M1413.36 873.776 L1419.25 873.776 L1419.25 903.026 L1436.72 887.653 L1444.2 887.653 L1425.29 904.331 L1445 923.301 L1437.36 923.301 L1419.25 905.891 L1419.25 923.301 L1413.36 923.301 L1413.36 873.776 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,774.117 217.599,47.2441 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,673.398 236.497,673.398 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,471.406 236.497,471.406 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,269.414 236.497,269.414 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,67.4223 236.497,67.4223 "></polyline>
<path clip-path="url(#clip070)" d="M116.214 673.849 L145.89 673.849 L145.89 677.784 L116.214 677.784 L116.214 673.849 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M170.149 672.044 Q173.506 672.761 175.381 675.03 Q177.279 677.298 177.279 680.631 Q177.279 685.747 173.76 688.548 Q170.242 691.349 163.76 691.349 Q161.585 691.349 159.27 690.909 Q156.978 690.493 154.524 689.636 L154.524 685.122 Q156.469 686.256 158.784 686.835 Q161.098 687.414 163.622 687.414 Q168.02 687.414 170.311 685.678 Q172.626 683.942 172.626 680.631 Q172.626 677.576 170.473 675.863 Q168.344 674.127 164.524 674.127 L160.497 674.127 L160.497 670.284 L164.71 670.284 Q168.159 670.284 169.987 668.919 Q171.816 667.53 171.816 664.937 Q171.816 662.275 169.918 660.863 Q168.043 659.428 164.524 659.428 Q162.603 659.428 160.404 659.845 Q158.205 660.261 155.566 661.141 L155.566 656.974 Q158.228 656.233 160.543 655.863 Q162.881 655.493 164.941 655.493 Q170.265 655.493 173.367 657.923 Q176.469 660.331 176.469 664.451 Q176.469 667.321 174.825 669.312 Q173.182 671.28 170.149 672.044 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M117.164 471.857 L146.839 471.857 L146.839 475.792 L117.164 475.792 L117.164 471.857 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M160.96 484.751 L177.279 484.751 L177.279 488.686 L155.335 488.686 L155.335 484.751 Q157.997 481.996 162.58 477.367 Q167.186 472.714 168.367 471.371 Q170.612 468.848 171.492 467.112 Q172.395 465.353 172.395 463.663 Q172.395 460.908 170.45 459.172 Q168.529 457.436 165.427 457.436 Q163.228 457.436 160.774 458.2 Q158.344 458.964 155.566 460.515 L155.566 455.793 Q158.39 454.658 160.844 454.08 Q163.298 453.501 165.335 453.501 Q170.705 453.501 173.899 456.186 Q177.094 458.871 177.094 463.362 Q177.094 465.492 176.284 467.413 Q175.497 469.311 173.39 471.904 Q172.811 472.575 169.71 475.792 Q166.608 478.987 160.96 484.751 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M116.793 269.865 L146.469 269.865 L146.469 273.801 L116.793 273.801 L116.793 269.865 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M157.372 282.759 L165.01 282.759 L165.01 256.393 L156.7 258.06 L156.7 253.801 L164.964 252.134 L169.64 252.134 L169.64 282.759 L177.279 282.759 L177.279 286.694 L157.372 286.694 L157.372 282.759 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M165.335 53.221 Q161.723 53.221 159.895 56.7857 Q158.089 60.3274 158.089 67.457 Q158.089 74.5634 159.895 78.1282 Q161.723 81.6699 165.335 81.6699 Q168.969 81.6699 170.774 78.1282 Q172.603 74.5634 172.603 67.457 Q172.603 60.3274 170.774 56.7857 Q168.969 53.221 165.335 53.221 M165.335 49.5173 Q171.145 49.5173 174.2 54.1237 Q177.279 58.707 177.279 67.457 Q177.279 76.1838 174.2 80.7903 Q171.145 85.3736 165.335 85.3736 Q159.524 85.3736 156.446 80.7903 Q153.39 76.1838 153.39 67.457 Q153.39 58.707 156.446 54.1237 Q159.524 49.5173 165.335 49.5173 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M47.5702 425.608 L25.9905 425.608 L25.9905 419.752 L47.3474 419.752 Q52.4082 419.752 54.9545 417.778 Q57.4689 415.805 57.4689 411.858 Q57.4689 407.116 54.4452 404.378 Q51.4215 401.609 46.2016 401.609 L25.9905 401.609 L25.9905 395.753 L61.6384 395.753 L61.6384 401.609 L56.1639 401.609 Q59.4104 403.742 61.0019 406.575 Q62.5615 409.376 62.5615 413.1 Q62.5615 419.242 58.742 422.425 Q54.9226 425.608 47.5702 425.608 M25.1311 410.872 L25.1311 410.872 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip072)" d="M286.179 737.545 L270.179 753.545 L286.179 769.545 L302.179 753.545 L286.179 737.545 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip072)" d="M540.179 371.179 L524.179 387.179 L540.179 403.179 L556.179 387.179 L540.179 371.179 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip072)" d="M794.178 197.446 L778.178 213.446 L794.178 229.446 L810.178 213.446 L794.178 197.446 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip072)" d="M1048.18 117.595 L1032.18 133.595 L1048.18 149.595 L1064.18 133.595 L1048.18 117.595 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip072)" d="M1302.18 81.3175 L1286.18 97.3175 L1302.18 113.318 L1318.18 97.3175 L1302.18 81.3175 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip072)" d="M1556.18 64.9075 L1540.18 80.9075 L1556.18 96.9075 L1572.18 80.9075 L1556.18 64.9075 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip072)" d="M1810.18 57.4911 L1794.18 73.4911 L1810.18 89.4911 L1826.18 73.4911 L1810.18 57.4911 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip072)" d="M2064.18 54.1283 L2048.18 70.1283 L2064.18 86.1283 L2080.18 70.1283 L2064.18 54.1283 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip072)" d="M2318.18 52.5771 L2302.18 68.5771 L2318.18 84.5771 L2334.18 68.5771 L2318.18 52.5771 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip072)" d="M2572.18 51.816 L2556.18 67.816 L2572.18 83.816 L2588.18 67.816 L2572.18 51.816 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip072)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="286.179,753.545 540.179,753.545 540.179,387.179 794.178,387.179 794.178,213.446 1048.18,213.446 1048.18,133.595 1302.18,133.595 1302.18,97.3175 1556.18,97.3175 1556.18,80.9075 1810.18,80.9075 1810.18,73.4911 2064.18,73.4911 2064.18,70.1283 2318.18,70.1283 2318.18,68.5771 2572.18,68.5771 2572.18,67.816 "></polyline>
<path clip-path="url(#clip070)" d="M2295.96 749.888 L2559.98 749.888 L2559.98 646.208 L2295.96 646.208  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2295.96,749.888 2559.98,749.888 2559.98,646.208 2295.96,646.208 2295.96,749.888 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2322.88,698.048 2484.42,698.048 "></polyline>
<path clip-path="url(#clip070)" d="M2511.35 705.096 L2511.35 689.402 L2515.61 689.402 L2515.61 704.934 Q2515.61 708.615 2517.04 710.467 Q2518.48 712.295 2521.35 712.295 Q2524.8 712.295 2526.79 710.096 Q2528.8 707.897 2528.8 704.101 L2528.8 689.402 L2533.06 689.402 L2533.06 715.328 L2528.8 715.328 L2528.8 711.346 Q2527.25 713.708 2525.19 714.865 Q2523.15 715.999 2520.44 715.999 Q2515.98 715.999 2513.66 713.221 Q2511.35 710.444 2511.35 705.096 M2522.06 688.777 L2522.06 688.777 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M217.599 1734.12 L2640.76 1734.12 L2640.76 1007.24 L217.599 1007.24  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip073">
    <rect x="217" y="1007" width="2424" height="728"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip073)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="286.179,1734.12 286.179,1007.24 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="857.678,1734.12 857.678,1007.24 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1429.18,1734.12 1429.18,1007.24 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2000.68,1734.12 2000.68,1007.24 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2572.18,1734.12 2572.18,1007.24 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="217.599,1667.15 2640.76,1667.15 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="217.599,1454.04 2640.76,1454.04 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="217.599,1240.93 2640.76,1240.93 "></polyline>
<polyline clip-path="url(#clip073)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="217.599,1027.82 2640.76,1027.82 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,1734.12 2640.76,1734.12 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="286.179,1734.12 286.179,1715.22 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="857.678,1734.12 857.678,1715.22 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1429.18,1734.12 1429.18,1715.22 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2000.68,1734.12 2000.68,1715.22 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2572.18,1734.12 2572.18,1715.22 "></polyline>
<path clip-path="url(#clip070)" d="M263.563 1767.34 Q259.952 1767.34 258.123 1770.9 Q256.318 1774.45 256.318 1781.58 Q256.318 1788.68 258.123 1792.25 Q259.952 1795.79 263.563 1795.79 Q267.197 1795.79 269.003 1792.25 Q270.832 1788.68 270.832 1781.58 Q270.832 1774.45 269.003 1770.9 Q267.197 1767.34 263.563 1767.34 M263.563 1763.64 Q269.373 1763.64 272.429 1768.24 Q275.508 1772.83 275.508 1781.58 Q275.508 1790.3 272.429 1794.91 Q269.373 1799.49 263.563 1799.49 Q257.753 1799.49 254.674 1794.91 Q251.619 1790.3 251.619 1781.58 Q251.619 1772.83 254.674 1768.24 Q257.753 1763.64 263.563 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M283.725 1792.94 L288.609 1792.94 L288.609 1798.82 L283.725 1798.82 L283.725 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M308.794 1767.34 Q305.183 1767.34 303.355 1770.9 Q301.549 1774.45 301.549 1781.58 Q301.549 1788.68 303.355 1792.25 Q305.183 1795.79 308.794 1795.79 Q312.429 1795.79 314.234 1792.25 Q316.063 1788.68 316.063 1781.58 Q316.063 1774.45 314.234 1770.9 Q312.429 1767.34 308.794 1767.34 M308.794 1763.64 Q314.605 1763.64 317.66 1768.24 Q320.739 1772.83 320.739 1781.58 Q320.739 1790.3 317.66 1794.91 Q314.605 1799.49 308.794 1799.49 Q302.984 1799.49 299.906 1794.91 Q296.85 1790.3 296.85 1781.58 Q296.85 1772.83 299.906 1768.24 Q302.984 1763.64 308.794 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M829.414 1794.89 L845.734 1794.89 L845.734 1798.82 L823.789 1798.82 L823.789 1794.89 Q826.451 1792.13 831.035 1787.5 Q835.641 1782.85 836.822 1781.51 Q839.067 1778.98 839.947 1777.25 Q840.85 1775.49 840.85 1773.8 Q840.85 1771.04 838.905 1769.31 Q836.984 1767.57 833.882 1767.57 Q831.683 1767.57 829.229 1768.34 Q826.799 1769.1 824.021 1770.65 L824.021 1765.93 Q826.845 1764.79 829.299 1764.21 Q831.752 1763.64 833.789 1763.64 Q839.16 1763.64 842.354 1766.32 Q845.549 1769.01 845.549 1773.5 Q845.549 1775.63 844.738 1777.55 Q843.951 1779.45 841.845 1782.04 Q841.266 1782.71 838.164 1785.93 Q835.063 1789.12 829.414 1794.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M855.549 1792.94 L860.433 1792.94 L860.433 1798.82 L855.549 1798.82 L855.549 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M870.664 1764.26 L889.021 1764.26 L889.021 1768.2 L874.947 1768.2 L874.947 1776.67 Q875.965 1776.32 876.984 1776.16 Q878.002 1775.97 879.021 1775.97 Q884.808 1775.97 888.187 1779.15 Q891.567 1782.32 891.567 1787.73 Q891.567 1793.31 888.095 1796.41 Q884.622 1799.49 878.303 1799.49 Q876.127 1799.49 873.859 1799.12 Q871.613 1798.75 869.206 1798.01 L869.206 1793.31 Q871.289 1794.45 873.511 1795 Q875.734 1795.56 878.21 1795.56 Q882.215 1795.56 884.553 1793.45 Q886.891 1791.34 886.891 1787.73 Q886.891 1784.12 884.553 1782.02 Q882.215 1779.91 878.21 1779.91 Q876.335 1779.91 874.46 1780.33 Q872.609 1780.74 870.664 1781.62 L870.664 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M1396.34 1764.26 L1414.7 1764.26 L1414.7 1768.2 L1400.62 1768.2 L1400.62 1776.67 Q1401.64 1776.32 1402.66 1776.16 Q1403.68 1775.97 1404.7 1775.97 Q1410.49 1775.97 1413.87 1779.15 Q1417.24 1782.32 1417.24 1787.73 Q1417.24 1793.31 1413.77 1796.41 Q1410.3 1799.49 1403.98 1799.49 Q1401.8 1799.49 1399.54 1799.12 Q1397.29 1798.75 1394.88 1798.01 L1394.88 1793.31 Q1396.97 1794.45 1399.19 1795 Q1401.41 1795.56 1403.89 1795.56 Q1407.89 1795.56 1410.23 1793.45 Q1412.57 1791.34 1412.57 1787.73 Q1412.57 1784.12 1410.23 1782.02 Q1407.89 1779.91 1403.89 1779.91 Q1402.01 1779.91 1400.14 1780.33 Q1398.29 1780.74 1396.34 1781.62 L1396.34 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M1426.46 1792.94 L1431.34 1792.94 L1431.34 1798.82 L1426.46 1798.82 L1426.46 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M1451.53 1767.34 Q1447.92 1767.34 1446.09 1770.9 Q1444.28 1774.45 1444.28 1781.58 Q1444.28 1788.68 1446.09 1792.25 Q1447.92 1795.79 1451.53 1795.79 Q1455.16 1795.79 1456.97 1792.25 Q1458.8 1788.68 1458.8 1781.58 Q1458.8 1774.45 1456.97 1770.9 Q1455.16 1767.34 1451.53 1767.34 M1451.53 1763.64 Q1457.34 1763.64 1460.39 1768.24 Q1463.47 1772.83 1463.47 1781.58 Q1463.47 1790.3 1460.39 1794.91 Q1457.34 1799.49 1451.53 1799.49 Q1445.72 1799.49 1442.64 1794.91 Q1439.58 1790.3 1439.58 1781.58 Q1439.58 1772.83 1442.64 1768.24 Q1445.72 1763.64 1451.53 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M1967 1764.26 L1989.22 1764.26 L1989.22 1766.25 L1976.67 1798.82 L1971.79 1798.82 L1983.59 1768.2 L1967 1768.2 L1967 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M1998.34 1792.94 L2003.22 1792.94 L2003.22 1798.82 L1998.34 1798.82 L1998.34 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2013.45 1764.26 L2031.81 1764.26 L2031.81 1768.2 L2017.74 1768.2 L2017.74 1776.67 Q2018.76 1776.32 2019.77 1776.16 Q2020.79 1775.97 2021.81 1775.97 Q2027.6 1775.97 2030.98 1779.15 Q2034.36 1782.32 2034.36 1787.73 Q2034.36 1793.31 2030.88 1796.41 Q2027.41 1799.49 2021.09 1799.49 Q2018.92 1799.49 2016.65 1799.12 Q2014.4 1798.75 2012 1798.01 L2012 1793.31 Q2014.08 1794.45 2016.3 1795 Q2018.52 1795.56 2021 1795.56 Q2025.01 1795.56 2027.34 1793.45 Q2029.68 1791.34 2029.68 1787.73 Q2029.68 1784.12 2027.34 1782.02 Q2025.01 1779.91 2021 1779.91 Q2019.13 1779.91 2017.25 1780.33 Q2015.4 1780.74 2013.45 1781.62 L2013.45 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2524.25 1794.89 L2531.89 1794.89 L2531.89 1768.52 L2523.58 1770.19 L2523.58 1765.93 L2531.84 1764.26 L2536.52 1764.26 L2536.52 1794.89 L2544.16 1794.89 L2544.16 1798.82 L2524.25 1798.82 L2524.25 1794.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2563.6 1767.34 Q2559.99 1767.34 2558.16 1770.9 Q2556.35 1774.45 2556.35 1781.58 Q2556.35 1788.68 2558.16 1792.25 Q2559.99 1795.79 2563.6 1795.79 Q2567.23 1795.79 2569.04 1792.25 Q2570.87 1788.68 2570.87 1781.58 Q2570.87 1774.45 2569.04 1770.9 Q2567.23 1767.34 2563.6 1767.34 M2563.6 1763.64 Q2569.41 1763.64 2572.47 1768.24 Q2575.54 1772.83 2575.54 1781.58 Q2575.54 1790.3 2572.47 1794.91 Q2569.41 1799.49 2563.6 1799.49 Q2557.79 1799.49 2554.71 1794.91 Q2551.66 1790.3 2551.66 1781.58 Q2551.66 1772.83 2554.71 1768.24 Q2557.79 1763.64 2563.6 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2583.76 1792.94 L2588.65 1792.94 L2588.65 1798.82 L2583.76 1798.82 L2583.76 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2608.83 1767.34 Q2605.22 1767.34 2603.39 1770.9 Q2601.59 1774.45 2601.59 1781.58 Q2601.59 1788.68 2603.39 1792.25 Q2605.22 1795.79 2608.83 1795.79 Q2612.47 1795.79 2614.27 1792.25 Q2616.1 1788.68 2616.1 1781.58 Q2616.1 1774.45 2614.27 1770.9 Q2612.47 1767.34 2608.83 1767.34 M2608.83 1763.64 Q2614.64 1763.64 2617.7 1768.24 Q2620.78 1772.83 2620.78 1781.58 Q2620.78 1790.3 2617.7 1794.91 Q2614.64 1799.49 2608.83 1799.49 Q2603.02 1799.49 2599.94 1794.91 Q2596.89 1790.3 2596.89 1781.58 Q2596.89 1772.83 2599.94 1768.24 Q2603.02 1763.64 2608.83 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M1413.36 1833.78 L1419.25 1833.78 L1419.25 1863.03 L1436.72 1847.65 L1444.2 1847.65 L1425.29 1864.33 L1445 1883.3 L1437.36 1883.3 L1419.25 1865.89 L1419.25 1883.3 L1413.36 1883.3 L1413.36 1833.78 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,1734.12 217.599,1007.24 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,1667.15 236.497,1667.15 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,1454.04 236.497,1454.04 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,1240.93 236.497,1240.93 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="217.599,1027.82 236.497,1027.82 "></polyline>
<path clip-path="url(#clip070)" d="M165.335 1652.95 Q161.723 1652.95 159.895 1656.51 Q158.089 1660.05 158.089 1667.18 Q158.089 1674.29 159.895 1677.86 Q161.723 1681.4 165.335 1681.4 Q168.969 1681.4 170.774 1677.86 Q172.603 1674.29 172.603 1667.18 Q172.603 1660.05 170.774 1656.51 Q168.969 1652.95 165.335 1652.95 M165.335 1649.24 Q171.145 1649.24 174.2 1653.85 Q177.279 1658.43 177.279 1667.18 Q177.279 1675.91 174.2 1680.52 Q171.145 1685.1 165.335 1685.1 Q159.524 1685.1 156.446 1680.52 Q153.39 1675.91 153.39 1667.18 Q153.39 1658.43 156.446 1653.85 Q159.524 1649.24 165.335 1649.24 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M157.372 1467.38 L165.01 1467.38 L165.01 1441.02 L156.7 1442.68 L156.7 1438.42 L164.964 1436.76 L169.64 1436.76 L169.64 1467.38 L177.279 1467.38 L177.279 1471.32 L157.372 1471.32 L157.372 1467.38 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M160.96 1254.27 L177.279 1254.27 L177.279 1258.21 L155.335 1258.21 L155.335 1254.27 Q157.997 1251.52 162.58 1246.89 Q167.186 1242.23 168.367 1240.89 Q170.612 1238.37 171.492 1236.63 Q172.395 1234.87 172.395 1233.18 Q172.395 1230.43 170.45 1228.69 Q168.529 1226.96 165.427 1226.96 Q163.228 1226.96 160.774 1227.72 Q158.344 1228.48 155.566 1230.04 L155.566 1225.31 Q158.39 1224.18 160.844 1223.6 Q163.298 1223.02 165.335 1223.02 Q170.705 1223.02 173.899 1225.71 Q177.094 1228.39 177.094 1232.88 Q177.094 1235.01 176.284 1236.93 Q175.497 1238.83 173.39 1241.42 Q172.811 1242.1 169.71 1245.31 Q166.608 1248.51 160.96 1254.27 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M170.149 1026.46 Q173.506 1027.18 175.381 1029.45 Q177.279 1031.72 177.279 1035.05 Q177.279 1040.17 173.76 1042.97 Q170.242 1045.77 163.76 1045.77 Q161.585 1045.77 159.27 1045.33 Q156.978 1044.91 154.524 1044.05 L154.524 1039.54 Q156.469 1040.67 158.784 1041.25 Q161.098 1041.83 163.622 1041.83 Q168.02 1041.83 170.311 1040.1 Q172.626 1038.36 172.626 1035.05 Q172.626 1031.99 170.473 1030.28 Q168.344 1028.55 164.524 1028.55 L160.497 1028.55 L160.497 1024.7 L164.71 1024.7 Q168.159 1024.7 169.987 1023.34 Q171.816 1021.95 171.816 1019.36 Q171.816 1016.69 169.918 1015.28 Q168.043 1013.85 164.524 1013.85 Q162.603 1013.85 160.404 1014.26 Q158.205 1014.68 155.566 1015.56 L155.566 1011.39 Q158.228 1010.65 160.543 1010.28 Q162.881 1009.91 164.941 1009.91 Q170.265 1009.91 173.367 1012.34 Q176.469 1014.75 176.469 1018.87 Q176.469 1021.74 174.825 1023.73 Q173.182 1025.7 170.149 1026.46 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M63.1662 1354.07 L80.5128 1366.96 L98.8142 1353.4 L98.8142 1360.3 L84.8096 1370.68 L98.8142 1381.06 L98.8142 1387.96 L80.1626 1374.12 L63.1662 1386.79 L63.1662 1379.88 L75.8658 1370.43 L63.1662 1360.97 L63.1662 1354.07 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip073)" d="M286.179 1438.04 L270.179 1454.04 L286.179 1470.04 L302.179 1454.04 L286.179 1438.04 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M514.779 1697.55 L498.779 1713.55 L514.779 1729.55 L530.779 1713.55 L514.779 1697.55 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M743.378 1697.24 L727.378 1713.24 L743.378 1729.24 L759.378 1713.24 L743.378 1697.24 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M971.978 1676.38 L955.978 1692.38 L971.978 1708.38 L987.978 1692.38 L971.978 1676.38 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M1200.58 1663.31 L1184.58 1679.31 L1200.58 1695.31 L1216.58 1679.31 L1200.58 1663.31 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M1429.18 1656.77 L1413.18 1672.77 L1429.18 1688.77 L1445.18 1672.77 L1429.18 1656.77 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M1657.78 1653.7 L1641.78 1669.7 L1657.78 1685.7 L1673.78 1669.7 L1657.78 1653.7 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M1886.38 1652.3 L1870.38 1668.3 L1886.38 1684.3 L1902.38 1668.3 L1886.38 1652.3 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M2114.98 1651.65 L2098.98 1667.65 L2114.98 1683.65 L2130.98 1667.65 L2114.98 1651.65 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M2343.58 1651.34 L2327.58 1667.34 L2343.58 1683.34 L2359.58 1667.34 L2343.58 1651.34 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M2572.18 1651.16 L2556.18 1667.16 L2572.18 1683.16 L2588.18 1667.16 L2572.18 1651.16 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip073)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="286.179,1454.04 514.779,1454.04 514.779,1713.55 743.378,1713.55 743.378,1713.24 971.978,1713.24 971.978,1692.38 1200.58,1692.38 1200.58,1679.31 1429.18,1679.31 1429.18,1672.77 1657.78,1672.77 1657.78,1669.7 1886.38,1669.7 1886.38,1668.3 2114.98,1668.3 2114.98,1667.65 2343.58,1667.65 2343.58,1667.34 2572.18,1667.34 2572.18,1667.16 "></polyline>
<path clip-path="url(#clip073)" d="M286.179 1011.82 L270.179 1027.82 L286.179 1043.82 L302.179 1027.82 L286.179 1011.82 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M514.779 1247.82 L498.779 1263.82 L514.779 1279.82 L530.779 1263.82 L514.779 1247.82 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M743.378 1448.95 L727.378 1464.95 L743.378 1480.95 L759.378 1464.95 L743.378 1448.95 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M971.978 1556.38 L955.978 1572.38 L971.978 1588.38 L987.978 1572.38 L971.978 1556.38 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M1200.58 1607.78 L1184.58 1623.78 L1200.58 1639.78 L1216.58 1623.78 L1200.58 1607.78 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M1429.18 1631.48 L1413.18 1647.48 L1429.18 1663.48 L1445.18 1647.48 L1429.18 1631.48 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M1657.78 1642.25 L1641.78 1658.25 L1657.78 1674.25 L1673.78 1658.25 L1657.78 1642.25 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M1886.38 1647.12 L1870.38 1663.12 L1886.38 1679.12 L1902.38 1663.12 L1886.38 1647.12 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M2114.98 1649.3 L2098.98 1665.3 L2114.98 1681.3 L2130.98 1665.3 L2114.98 1649.3 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M2343.58 1650.25 L2327.58 1666.25 L2343.58 1682.25 L2359.58 1666.25 L2343.58 1650.25 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip073)" d="M2572.18 1650.62 L2556.18 1666.62 L2572.18 1682.62 L2588.18 1666.62 L2572.18 1650.62 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip073)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="286.179,1027.82 514.779,1027.82 514.779,1263.82 743.378,1263.82 743.378,1464.95 971.978,1464.95 971.978,1572.38 1200.58,1572.38 1200.58,1623.78 1429.18,1623.78 1429.18,1647.48 1657.78,1647.48 1657.78,1658.25 1886.38,1658.25 1886.38,1663.12 2114.98,1663.12 2114.98,1665.3 2343.58,1665.3 2343.58,1666.25 2572.18,1666.25 2572.18,1666.62 "></polyline>
<path clip-path="url(#clip070)" d="M2274.57 1186.99 L2559.98 1186.99 L2559.98 1031.47 L2274.57 1031.47  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip070)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2274.57,1186.99 2559.98,1186.99 2559.98,1031.47 2274.57,1031.47 2274.57,1186.99 "></polyline>
<polyline clip-path="url(#clip070)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2301.49,1083.31 2463.03,1083.31 "></polyline>
<path clip-path="url(#clip070)" d="M2514.61 1074.67 L2505.24 1087.28 L2515.1 1100.59 L2510.07 1100.59 L2502.53 1090.41 L2494.98 1100.59 L2489.96 1100.59 L2500.03 1087.03 L2490.81 1074.67 L2495.84 1074.67 L2502.71 1083.9 L2509.59 1074.67 L2514.61 1074.67 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2520.26 1098.05 L2524.98 1098.05 L2524.98 1083.9 L2519.82 1084.85 L2519.82 1082.17 L2525.14 1081.26 L2528.31 1081.26 L2528.31 1098.05 L2533.06 1098.05 L2533.06 1100.59 L2520.26 1100.59 L2520.26 1098.05 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip070)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2301.49,1135.15 2463.03,1135.15 "></polyline>
<path clip-path="url(#clip070)" d="M2514.61 1126.51 L2505.24 1139.12 L2515.1 1152.43 L2510.07 1152.43 L2502.53 1142.25 L2494.98 1152.43 L2489.96 1152.43 L2500.03 1138.87 L2490.81 1126.51 L2495.84 1126.51 L2502.71 1135.74 L2509.59 1126.51 L2514.61 1126.51 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip070)" d="M2522.85 1149.79 L2532.67 1149.79 L2532.67 1152.43 L2518.82 1152.43 L2518.82 1149.89 Q2519.61 1149.17 2521.07 1147.87 Q2529.03 1140.81 2529.03 1138.64 Q2529.03 1137.11 2527.83 1136.18 Q2526.62 1135.23 2524.66 1135.23 Q2523.45 1135.23 2522.04 1135.65 Q2520.63 1136.04 2518.96 1136.85 L2518.96 1134.01 Q2520.75 1133.36 2522.27 1133.04 Q2523.82 1132.71 2525.14 1132.71 Q2528.5 1132.71 2530.51 1134.24 Q2532.53 1135.77 2532.53 1138.27 Q2532.53 1141.48 2524.87 1148.06 Q2523.57 1149.17 2522.85 1149.79 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path></svg>
</div>
</div>
</div>
<section id="adding-the-constraints-on-controls" class="level3">
<h3 class="anchored" data-anchor-id="adding-the-constraints-on-controls">Adding the constraints on controls</h3>
<p>Adding constraints on <span class="math inline">\bar{\bm u}</span> is straightforward. It is just that instead of a linear system we will have a linear system with additional inequality constraints. Let’s get one <span class="math display">
\begin{aligned}
\operatorname*{minimize}_{\bar{\bm u}} &amp; \quad \frac{1}{2}\bar{\bm u}^T \mathbf H \bar{\bm u} + \mathbf x_0^T\mathbf F^T \bar{\bm u}\\
\text{subject to} &amp;\quad \bar{\bm u} \leq \bar{\mathbf u}^\mathrm{max}\\
               &amp;\quad \bar{\bm u} \geq \bar{\mathbf u}^\mathrm{min},
\end{aligned}
</span> which we can rewrite more explicitly (in the matrix-vector format) as <span class="math display">
\begin{aligned}
\operatorname*{minimize}_{\bar{\bm u}} &amp; \quad \frac{1}{2}\bar{\bm u}^T \mathbf H \bar{\bm u} + \mathbf x_0^T\mathbf F^T \bar{\bm u}\\
\text{subject to} &amp; \begin{bmatrix}
                  \mathbf{I}  &amp;    &amp;         &amp;    \\
                    &amp; \mathbf{I}  &amp;         &amp;    \\
                    &amp;    &amp; \ddots  &amp;    \\
                    &amp;    &amp;         &amp;  \mathbf{I} \\
                    -\mathbf{I}   &amp;   &amp;     &amp;    \\
                    &amp; -\mathbf{I} &amp;         &amp;    \\
                    &amp;    &amp; \ddots  &amp;    \\
                    &amp;    &amp;         &amp;  -\mathbf{I}
                 \end{bmatrix}
                 \begin{bmatrix}
                  \bm u_0 \\ \bm u_1 \\ \vdots \\ \bm u_{N-1}
                 \end{bmatrix}
                 \leq
                 \begin{bmatrix}
                  \mathbf u^\mathbf{max} \\ \mathbf u^\mathrm{max} \\ \vdots \\ \mathbf u^\mathrm{max}\\ -\mathbf u^\mathrm{min} \\ -\mathbf u^\mathrm{min} \\ \vdots \\ -\mathbf u^\mathrm{min}
                 \end{bmatrix}.
\end{aligned}
</span></p>
<div id="exm-direct-sequential-constrained-u" class="theorem example">
<p><span class="theorem-title"><strong>Example 4 (Reformulating the LQR problem with constraints on control as a quadratic program – sequential approach)</strong></span> &nbsp;</p>
<div id="8" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LinearAlgebra</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">BlockArrays</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">SparseArrays</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">JuMP</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">OSQP</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Random</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="bu">Random</span>.<span class="fu">seed!</span>(<span class="fl">1234</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">direct_dlqr_sequential</span>(A,B,x₀,Q,R,S,N,(umin,umax))</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="fu">size</span>(A)[<span class="fl">1</span>]</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    m <span class="op">=</span> <span class="fu">size</span>(B)[<span class="fl">2</span>]</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    Q̄ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>n,N<span class="op">*</span>n),<span class="fu">repeat</span>([n],N),<span class="fu">repeat</span>([n],N))</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>(N<span class="op">-</span><span class="fl">1</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>        Q̄[<span class="fu">Block</span>(i,i)] <span class="op">=</span> Q</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    Q̄[<span class="fu">Block</span>(N,N)] <span class="op">=</span> S</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    R̄ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>m,N<span class="op">*</span>m),<span class="fu">repeat</span>([m],N),<span class="fu">repeat</span>([m],N))</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>N</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>        R̄[<span class="fu">Block</span>(i,i)] <span class="op">=</span> R</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    Ĉ <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>n,N<span class="op">*</span>m),<span class="fu">repeat</span>([n],N),<span class="fu">repeat</span>([m],N))</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    Â <span class="op">=</span> <span class="fu">BlockArray</span>(<span class="fu">spzeros</span>(N<span class="op">*</span>n,n),<span class="fu">repeat</span>([n],N),[n])</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i<span class="op">=</span><span class="fl">1</span><span class="op">:</span>N</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> j <span class="op">=</span> <span class="fl">1</span><span class="op">:</span>i</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>            Ĉ[<span class="fu">Block</span>(i,j)] <span class="op">=</span> A<span class="op">^</span>(i<span class="op">-</span>j)<span class="op">*</span>B</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>            Â[<span class="fu">Block</span>(i,<span class="fl">1</span>)] <span class="op">=</span> A<span class="op">^</span>i</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>    H <span class="op">=</span> Ĉ<span class="ch">'*Q̄*Ĉ + R̄</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    H <span class="op">=</span> <span class="fu">Array</span>(H)</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    F <span class="op">=</span> Ĉ<span class="ch">'*Q̄*Â</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>    F <span class="op">=</span> <span class="fu">Array</span>(F)</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>    prob <span class="op">=</span> <span class="fu">Model</span>()</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>    <span class="pp">@variable</span>(prob, u[<span class="fl">1</span><span class="op">:</span>N<span class="op">*</span>m])</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>    <span class="pp">@objective</span>(prob, Min, <span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="fu">*dot</span>(u,H,u) <span class="op">+</span> <span class="fu">dot</span>(F<span class="op">*</span>x₀,u))</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>    <span class="pp">@constraint</span>(prob, u <span class="op">.&gt;=</span> umin)</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>    <span class="pp">@constraint</span>(prob, u <span class="op">.&lt;=</span> umax)</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_silent</span>(prob)</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_optimizer</span>(prob, OSQP.Optimizer)</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">optimize!</span>(prob)</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    uopt <span class="op">=</span> <span class="fu">value</span>.(u)</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    xopt <span class="op">=</span> Ĉ<span class="op">*</span>uopt <span class="op">+</span> Â<span class="op">*</span>x₀</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>    xopt <span class="op">=</span> <span class="fu">reshape</span>(xopt,(<span class="fl">2</span>,<span class="op">:</span>))</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a><span class="co">#=     u = Variable(N*m)</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a><span class="co">    problem = minimize(1/2*quadform(u,H) + dot(F*x₀,u))</span></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a><span class="co">    problem.constraints = [u &gt;= umin, u &lt;= umax]</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a><span class="co">    Convex.solve!(problem, SCS.Optimizer; silent = true)</span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a><span class="co">    xopt = Ĉ*u.value + Â*x₀</span></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a><span class="co">    xopt = reshape(xopt,(2,:))</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a><span class="co">    uopt = u.value =#</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> xopt,uopt</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="fl">2</span>               <span class="co"># Number of state variables.</span></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> <span class="fl">1</span>               <span class="co"># Number of (control) input variables. </span></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> <span class="fu">rand</span>(n,n)       <span class="co"># State matrix.</span></span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> <span class="fu">rand</span>(n,m)       <span class="co"># Input coupling matrix.</span></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>x₀ <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">3.0</span>]     <span class="co"># Initial state.</span></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="fl">10</span>              <span class="co"># Time horizon.</span></span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">2.0</span>]      </span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> [<span class="fl">1.0</span>, <span class="fl">2.0</span>]</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> [<span class="fl">1.0</span>]</span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>S <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>s)     <span class="co"># Matrix defining the terminal state cost.</span></span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>Q <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>q)     <span class="co"># Matrix defining the running state dost.</span></span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>R <span class="op">=</span> <span class="fu">diagm</span>(<span class="fl">0</span><span class="op">=&gt;</span>r)     <span class="co"># Matrix defining the cost of control.</span></span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>umin <span class="op">=</span> <span class="op">-</span><span class="fl">1.0</span></span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>umax <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>xopt,uopt <span class="op">=</span> <span class="fu">direct_dlqr_sequential</span>(A,B,x₀,Q,R,S,N,(umin,umax))</span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Plots</span></span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>p1 <span class="op">=</span> <span class="fu">plot</span>(<span class="fl">0</span><span class="op">:</span>(N<span class="op">-</span><span class="fl">1</span>),uopt,marker<span class="op">=:</span>diamond,label<span class="op">=</span><span class="st">"u"</span>,linetype<span class="op">=:</span>steppost)</span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"k"</span>)</span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"u"</span>)</span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>p2 <span class="op">=</span> <span class="fu">plot</span>(<span class="fl">0</span><span class="op">:</span>N,<span class="fu">hcat</span>(x₀,xopt)<span class="ch">',marker=:diamond,label=["x₁" "x₂"],linetype=:steppost)</span></span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a><span class="fu">xlabel!</span>(<span class="st">"k"</span>)</span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a><span class="fu">ylabel!</span>(<span class="st">"x"</span>)</span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(p1,p2,layout<span class="op">=</span>(<span class="fl">2</span>,<span class="fl">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="1">
<!--?xml version="1.0" encoding="utf-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="672" height="480" viewbox="0 0 2688 1920">
<defs>
  <clippath id="clip130">
    <rect x="0" y="0" width="2688" height="1920"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip130)" d="M0 1920 L2688 1920 L2688 0 L0 0  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip131">
    <rect x="537" y="0" width="1883" height="1883"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip130)" d="M263.964 774.117 L2640.76 774.117 L2640.76 47.2441 L263.964 47.2441  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip132">
    <rect x="263" y="47" width="2378" height="728"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip132)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="331.232,774.117 331.232,47.2441 "></polyline>
<polyline clip-path="url(#clip132)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="829.511,774.117 829.511,47.2441 "></polyline>
<polyline clip-path="url(#clip132)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1327.79,774.117 1327.79,47.2441 "></polyline>
<polyline clip-path="url(#clip132)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1826.07,774.117 1826.07,47.2441 "></polyline>
<polyline clip-path="url(#clip132)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2324.35,774.117 2324.35,47.2441 "></polyline>
<polyline clip-path="url(#clip132)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.964,753.344 2640.76,753.344 "></polyline>
<polyline clip-path="url(#clip132)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.964,610.332 2640.76,610.332 "></polyline>
<polyline clip-path="url(#clip132)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.964,467.321 2640.76,467.321 "></polyline>
<polyline clip-path="url(#clip132)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.964,324.309 2640.76,324.309 "></polyline>
<polyline clip-path="url(#clip132)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.964,181.297 2640.76,181.297 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.964,774.117 2640.76,774.117 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="331.232,774.117 331.232,755.219 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="829.511,774.117 829.511,755.219 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1327.79,774.117 1327.79,755.219 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1826.07,774.117 1826.07,755.219 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2324.35,774.117 2324.35,755.219 "></polyline>
<path clip-path="url(#clip130)" d="M331.232 807.34 Q327.621 807.34 325.792 810.904 Q323.987 814.446 323.987 821.576 Q323.987 828.682 325.792 832.247 Q327.621 835.789 331.232 835.789 Q334.866 835.789 336.672 832.247 Q338.501 828.682 338.501 821.576 Q338.501 814.446 336.672 810.904 Q334.866 807.34 331.232 807.34 M331.232 803.636 Q337.042 803.636 340.098 808.242 Q343.176 812.826 343.176 821.576 Q343.176 830.303 340.098 834.909 Q337.042 839.492 331.232 839.492 Q325.422 839.492 322.343 834.909 Q319.288 830.303 319.288 821.576 Q319.288 812.826 322.343 808.242 Q325.422 803.636 331.232 803.636 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M824.164 834.886 L840.483 834.886 L840.483 838.821 L818.539 838.821 L818.539 834.886 Q821.201 832.131 825.784 827.502 Q830.391 822.849 831.571 821.506 Q833.817 818.983 834.696 817.247 Q835.599 815.488 835.599 813.798 Q835.599 811.043 833.655 809.307 Q831.733 807.571 828.632 807.571 Q826.433 807.571 823.979 808.335 Q821.548 809.099 818.771 810.65 L818.771 805.928 Q821.595 804.793 824.048 804.215 Q826.502 803.636 828.539 803.636 Q833.909 803.636 837.104 806.321 Q840.298 809.006 840.298 813.497 Q840.298 815.627 839.488 817.548 Q838.701 819.446 836.595 822.039 Q836.016 822.71 832.914 825.928 Q829.812 829.122 824.164 834.886 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M1330.8 808.335 L1318.99 826.784 L1330.8 826.784 L1330.8 808.335 M1329.57 804.261 L1335.45 804.261 L1335.45 826.784 L1340.38 826.784 L1340.38 830.673 L1335.45 830.673 L1335.45 838.821 L1330.8 838.821 L1330.8 830.673 L1315.2 830.673 L1315.2 826.159 L1329.57 804.261 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M1826.47 819.678 Q1823.33 819.678 1821.47 821.83 Q1819.65 823.983 1819.65 827.733 Q1819.65 831.46 1821.47 833.636 Q1823.33 835.789 1826.47 835.789 Q1829.62 835.789 1831.45 833.636 Q1833.3 831.46 1833.3 827.733 Q1833.3 823.983 1831.45 821.83 Q1829.62 819.678 1826.47 819.678 M1835.76 805.025 L1835.76 809.284 Q1834 808.451 1832.19 808.011 Q1830.41 807.571 1828.65 807.571 Q1824.02 807.571 1821.57 810.696 Q1819.14 813.821 1818.79 820.141 Q1820.16 818.127 1822.22 817.062 Q1824.28 815.974 1826.75 815.974 Q1831.96 815.974 1834.97 819.145 Q1838 822.293 1838 827.733 Q1838 833.057 1834.85 836.275 Q1831.71 839.492 1826.47 839.492 Q1820.48 839.492 1817.31 834.909 Q1814.14 830.303 1814.14 821.576 Q1814.14 813.381 1818.03 808.52 Q1821.91 803.636 1828.47 803.636 Q1830.22 803.636 1832.01 803.983 Q1833.81 804.33 1835.76 805.025 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M2324.35 822.409 Q2321.02 822.409 2319.09 824.191 Q2317.2 825.974 2317.2 829.099 Q2317.2 832.224 2319.09 834.006 Q2321.02 835.789 2324.35 835.789 Q2327.68 835.789 2329.6 834.006 Q2331.52 832.201 2331.52 829.099 Q2331.52 825.974 2329.6 824.191 Q2327.71 822.409 2324.35 822.409 M2319.67 820.418 Q2316.66 819.678 2314.97 817.617 Q2313.31 815.557 2313.31 812.594 Q2313.31 808.451 2316.25 806.043 Q2319.21 803.636 2324.35 803.636 Q2329.51 803.636 2332.45 806.043 Q2335.39 808.451 2335.39 812.594 Q2335.39 815.557 2333.7 817.617 Q2332.03 819.678 2329.05 820.418 Q2332.43 821.205 2334.3 823.497 Q2336.2 825.789 2336.2 829.099 Q2336.2 834.122 2333.12 836.807 Q2330.07 839.492 2324.35 839.492 Q2318.63 839.492 2315.55 836.807 Q2312.5 834.122 2312.5 829.099 Q2312.5 825.789 2314.4 823.497 Q2316.29 821.205 2319.67 820.418 M2317.96 813.034 Q2317.96 815.719 2319.63 817.224 Q2321.32 818.729 2324.35 818.729 Q2327.36 818.729 2329.05 817.224 Q2330.76 815.719 2330.76 813.034 Q2330.76 810.349 2329.05 808.844 Q2327.36 807.34 2324.35 807.34 Q2321.32 807.34 2319.63 808.844 Q2317.96 810.349 2317.96 813.034 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M1436.54 873.776 L1442.43 873.776 L1442.43 903.026 L1459.9 887.653 L1467.38 887.653 L1448.48 904.331 L1468.18 923.301 L1460.54 923.301 L1442.43 905.891 L1442.43 923.301 L1436.54 923.301 L1436.54 873.776 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.964,774.117 263.964,47.2441 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.964,753.344 282.862,753.344 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.964,610.332 282.862,610.332 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.964,467.321 282.862,467.321 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.964,324.309 282.862,324.309 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.964,181.297 282.862,181.297 "></polyline>
<path clip-path="url(#clip130)" d="M116.701 753.795 L146.376 753.795 L146.376 757.73 L116.701 757.73 L116.701 753.795 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M157.279 766.689 L164.918 766.689 L164.918 740.323 L156.608 741.99 L156.608 737.731 L164.872 736.064 L169.547 736.064 L169.547 766.689 L177.186 766.689 L177.186 770.624 L157.279 770.624 L157.279 766.689 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M186.631 764.744 L191.515 764.744 L191.515 770.624 L186.631 770.624 L186.631 764.744 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M211.7 739.143 Q208.089 739.143 206.26 742.707 Q204.455 746.249 204.455 753.379 Q204.455 760.485 206.26 764.05 Q208.089 767.592 211.7 767.592 Q215.334 767.592 217.14 764.05 Q218.969 760.485 218.969 753.379 Q218.969 746.249 217.14 742.707 Q215.334 739.143 211.7 739.143 M211.7 735.439 Q217.51 735.439 220.566 740.045 Q223.644 744.629 223.644 753.379 Q223.644 762.105 220.566 766.712 Q217.51 771.295 211.7 771.295 Q205.89 771.295 202.811 766.712 Q199.756 762.105 199.756 753.379 Q199.756 744.629 202.811 740.045 Q205.89 735.439 211.7 735.439 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M116.793 610.784 L146.469 610.784 L146.469 614.719 L116.793 614.719 L116.793 610.784 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M166.561 596.131 Q162.95 596.131 161.122 599.696 Q159.316 603.237 159.316 610.367 Q159.316 617.473 161.122 621.038 Q162.95 624.58 166.561 624.58 Q170.196 624.58 172.001 621.038 Q173.83 617.473 173.83 610.367 Q173.83 603.237 172.001 599.696 Q170.196 596.131 166.561 596.131 M166.561 592.427 Q172.372 592.427 175.427 597.034 Q178.506 601.617 178.506 610.367 Q178.506 619.094 175.427 623.7 Q172.372 628.284 166.561 628.284 Q160.751 628.284 157.673 623.7 Q154.617 619.094 154.617 610.367 Q154.617 601.617 157.673 597.034 Q160.751 592.427 166.561 592.427 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M186.723 621.733 L191.608 621.733 L191.608 627.612 L186.723 627.612 L186.723 621.733 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M211.793 611.2 Q208.459 611.2 206.538 612.983 Q204.64 614.765 204.64 617.89 Q204.64 621.015 206.538 622.797 Q208.459 624.58 211.793 624.58 Q215.126 624.58 217.047 622.797 Q218.969 620.992 218.969 617.89 Q218.969 614.765 217.047 612.983 Q215.149 611.2 211.793 611.2 M207.117 609.21 Q204.107 608.469 202.418 606.409 Q200.751 604.348 200.751 601.386 Q200.751 597.242 203.691 594.835 Q206.654 592.427 211.793 592.427 Q216.955 592.427 219.894 594.835 Q222.834 597.242 222.834 601.386 Q222.834 604.348 221.144 606.409 Q219.478 608.469 216.492 609.21 Q219.871 609.997 221.746 612.288 Q223.644 614.58 223.644 617.89 Q223.644 622.913 220.566 625.598 Q217.51 628.284 211.793 628.284 Q206.075 628.284 202.996 625.598 Q199.941 622.913 199.941 617.89 Q199.941 614.58 201.839 612.288 Q203.737 609.997 207.117 609.21 M205.404 601.825 Q205.404 604.51 207.07 606.015 Q208.76 607.52 211.793 607.52 Q214.802 607.52 216.492 606.015 Q218.205 604.51 218.205 601.825 Q218.205 599.14 216.492 597.636 Q214.802 596.131 211.793 596.131 Q208.76 596.131 207.07 597.636 Q205.404 599.14 205.404 601.825 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M116.539 467.772 L146.214 467.772 L146.214 471.707 L116.539 471.707 L116.539 467.772 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M166.307 453.119 Q162.696 453.119 160.867 456.684 Q159.061 460.226 159.061 467.355 Q159.061 474.462 160.867 478.027 Q162.696 481.568 166.307 481.568 Q169.941 481.568 171.747 478.027 Q173.575 474.462 173.575 467.355 Q173.575 460.226 171.747 456.684 Q169.941 453.119 166.307 453.119 M166.307 449.416 Q172.117 449.416 175.172 454.022 Q178.251 458.605 178.251 467.355 Q178.251 476.082 175.172 480.689 Q172.117 485.272 166.307 485.272 Q160.497 485.272 157.418 480.689 Q154.362 476.082 154.362 467.355 Q154.362 458.605 157.418 454.022 Q160.497 449.416 166.307 449.416 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M186.469 478.721 L191.353 478.721 L191.353 484.601 L186.469 484.601 L186.469 478.721 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M212.117 465.457 Q208.969 465.457 207.117 467.61 Q205.288 469.763 205.288 473.513 Q205.288 477.239 207.117 479.415 Q208.969 481.568 212.117 481.568 Q215.265 481.568 217.094 479.415 Q218.945 477.239 218.945 473.513 Q218.945 469.763 217.094 467.61 Q215.265 465.457 212.117 465.457 M221.399 450.804 L221.399 455.064 Q219.64 454.23 217.834 453.791 Q216.052 453.351 214.293 453.351 Q209.663 453.351 207.209 456.476 Q204.779 459.601 204.432 465.92 Q205.797 463.906 207.857 462.841 Q209.918 461.753 212.394 461.753 Q217.603 461.753 220.612 464.925 Q223.644 468.073 223.644 473.513 Q223.644 478.837 220.496 482.054 Q217.348 485.272 212.117 485.272 Q206.121 485.272 202.95 480.689 Q199.779 476.082 199.779 467.355 Q199.779 459.161 203.668 454.3 Q207.557 449.416 214.107 449.416 Q215.867 449.416 217.649 449.763 Q219.455 450.11 221.399 450.804 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M116.214 324.76 L145.89 324.76 L145.89 328.695 L116.214 328.695 L116.214 324.76 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M165.983 310.108 Q162.372 310.108 160.543 313.672 Q158.737 317.214 158.737 324.344 Q158.737 331.45 160.543 335.015 Q162.372 338.557 165.983 338.557 Q169.617 338.557 171.422 335.015 Q173.251 331.45 173.251 324.344 Q173.251 317.214 171.422 313.672 Q169.617 310.108 165.983 310.108 M165.983 306.404 Q171.793 306.404 174.848 311.01 Q177.927 315.594 177.927 324.344 Q177.927 333.07 174.848 337.677 Q171.793 342.26 165.983 342.26 Q160.173 342.26 157.094 337.677 Q154.038 333.07 154.038 324.344 Q154.038 315.594 157.094 311.01 Q160.173 306.404 165.983 306.404 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M186.145 335.709 L191.029 335.709 L191.029 341.589 L186.145 341.589 L186.145 335.709 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M214.061 311.103 L202.256 329.552 L214.061 329.552 L214.061 311.103 M212.834 307.029 L218.714 307.029 L218.714 329.552 L223.644 329.552 L223.644 333.441 L218.714 333.441 L218.714 341.589 L214.061 341.589 L214.061 333.441 L198.459 333.441 L198.459 328.927 L212.834 307.029 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M118.298 181.749 L147.974 181.749 L147.974 185.684 L118.298 185.684 L118.298 181.749 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M168.066 167.096 Q164.455 167.096 162.626 170.661 Q160.821 174.202 160.821 181.332 Q160.821 188.438 162.626 192.003 Q164.455 195.545 168.066 195.545 Q171.7 195.545 173.506 192.003 Q175.334 188.438 175.334 181.332 Q175.334 174.202 173.506 170.661 Q171.7 167.096 168.066 167.096 M168.066 163.392 Q173.876 163.392 176.932 167.999 Q180.01 172.582 180.01 181.332 Q180.01 190.059 176.932 194.665 Q173.876 199.249 168.066 199.249 Q162.256 199.249 159.177 194.665 Q156.122 190.059 156.122 181.332 Q156.122 172.582 159.177 167.999 Q162.256 163.392 168.066 163.392 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M188.228 192.698 L193.112 192.698 L193.112 198.577 L188.228 198.577 L188.228 192.698 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M207.325 194.642 L223.644 194.642 L223.644 198.577 L201.7 198.577 L201.7 194.642 Q204.362 191.887 208.945 187.258 Q213.552 182.605 214.732 181.263 Q216.978 178.739 217.857 177.003 Q218.76 175.244 218.76 173.554 Q218.76 170.8 216.816 169.063 Q214.894 167.327 211.793 167.327 Q209.594 167.327 207.14 168.091 Q204.709 168.855 201.932 170.406 L201.932 165.684 Q204.756 164.55 207.209 163.971 Q209.663 163.392 211.7 163.392 Q217.07 163.392 220.265 166.077 Q223.459 168.763 223.459 173.253 Q223.459 175.383 222.649 177.304 Q221.862 179.202 219.756 181.795 Q219.177 182.466 216.075 185.684 Q212.973 188.878 207.325 194.642 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M47.5702 425.608 L25.9905 425.608 L25.9905 419.752 L47.3474 419.752 Q52.4082 419.752 54.9545 417.778 Q57.4689 415.805 57.4689 411.858 Q57.4689 407.116 54.4452 404.378 Q51.4215 401.609 46.2016 401.609 L25.9905 401.609 L25.9905 395.753 L61.6384 395.753 L61.6384 401.609 L56.1639 401.609 Q59.4104 403.742 61.0019 406.575 Q62.5615 409.376 62.5615 413.1 Q62.5615 419.242 58.742 422.425 Q54.9226 425.608 47.5702 425.608 M25.1311 410.872 L25.1311 410.872 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip132)" d="M331.232 737.545 L315.232 753.545 L331.232 769.545 L347.232 753.545 L331.232 737.545 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip132)" d="M580.372 737.286 L564.372 753.286 L580.372 769.286 L596.372 753.286 L580.372 737.286 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip132)" d="M829.511 737.212 L813.511 753.212 L829.511 769.212 L845.511 753.212 L829.511 737.212 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip132)" d="M1078.65 737.158 L1062.65 753.158 L1078.65 769.158 L1094.65 753.158 L1078.65 737.158 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip132)" d="M1327.79 737.489 L1311.79 753.489 L1327.79 769.489 L1343.79 753.489 L1327.79 737.489 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip132)" d="M1576.93 737.25 L1560.93 753.25 L1576.93 769.25 L1592.93 753.25 L1576.93 737.25 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip132)" d="M1826.07 468.895 L1810.07 484.895 L1826.07 500.895 L1842.07 484.895 L1826.07 468.895 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip132)" d="M2075.21 226.648 L2059.21 242.648 L2075.21 258.648 L2091.21 242.648 L2075.21 226.648 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip132)" d="M2324.35 109.465 L2308.35 125.465 L2324.35 141.465 L2340.35 125.465 L2324.35 109.465 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip132)" d="M2573.49 51.816 L2557.49 67.816 L2573.49 83.816 L2589.49 67.816 L2573.49 51.816 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip132)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="331.232,753.545 580.372,753.545 580.372,753.286 829.511,753.286 829.511,753.212 1078.65,753.212 1078.65,753.158 1327.79,753.158 1327.79,753.489 1576.93,753.489 1576.93,753.25 1826.07,753.25 1826.07,484.895 2075.21,484.895 2075.21,242.648 2324.35,242.648 2324.35,125.465 2573.49,125.465 2573.49,67.816 "></polyline>
<path clip-path="url(#clip130)" d="M343.191 175.153 L602.583 175.153 L602.583 71.4732 L343.191 71.4732  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="343.191,175.153 602.583,175.153 602.583,71.4732 343.191,71.4732 343.191,175.153 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="369.6,123.313 528.052,123.313 "></polyline>
<path clip-path="url(#clip130)" d="M554.461 130.362 L554.461 114.667 L558.72 114.667 L558.72 130.2 Q558.72 133.88 560.156 135.732 Q561.591 137.561 564.461 137.561 Q567.91 137.561 569.901 135.362 Q571.915 133.163 571.915 129.366 L571.915 114.667 L576.174 114.667 L576.174 140.593 L571.915 140.593 L571.915 136.612 Q570.364 138.973 568.304 140.13 Q566.267 141.264 563.558 141.264 Q559.091 141.264 556.776 138.487 Q554.461 135.709 554.461 130.362 M565.179 114.042 L565.179 114.042 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M263.964 1734.12 L2640.76 1734.12 L2640.76 1007.24 L263.964 1007.24  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip133">
    <rect x="263" y="1007" width="2378" height="728"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip133)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="331.232,1734.12 331.232,1007.24 "></polyline>
<polyline clip-path="url(#clip133)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="891.796,1734.12 891.796,1007.24 "></polyline>
<polyline clip-path="url(#clip133)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1452.36,1734.12 1452.36,1007.24 "></polyline>
<polyline clip-path="url(#clip133)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2012.92,1734.12 2012.92,1007.24 "></polyline>
<polyline clip-path="url(#clip133)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2573.49,1734.12 2573.49,1007.24 "></polyline>
<polyline clip-path="url(#clip133)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.964,1695.72 2640.76,1695.72 "></polyline>
<polyline clip-path="url(#clip133)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.964,1473.09 2640.76,1473.09 "></polyline>
<polyline clip-path="url(#clip133)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.964,1250.45 2640.76,1250.45 "></polyline>
<polyline clip-path="url(#clip133)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.964,1027.82 2640.76,1027.82 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.964,1734.12 2640.76,1734.12 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="331.232,1734.12 331.232,1715.22 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="891.796,1734.12 891.796,1715.22 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1452.36,1734.12 1452.36,1715.22 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2012.92,1734.12 2012.92,1715.22 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2573.49,1734.12 2573.49,1715.22 "></polyline>
<path clip-path="url(#clip130)" d="M308.616 1767.34 Q305.005 1767.34 303.177 1770.9 Q301.371 1774.45 301.371 1781.58 Q301.371 1788.68 303.177 1792.25 Q305.005 1795.79 308.616 1795.79 Q312.251 1795.79 314.056 1792.25 Q315.885 1788.68 315.885 1781.58 Q315.885 1774.45 314.056 1770.9 Q312.251 1767.34 308.616 1767.34 M308.616 1763.64 Q314.427 1763.64 317.482 1768.24 Q320.561 1772.83 320.561 1781.58 Q320.561 1790.3 317.482 1794.91 Q314.427 1799.49 308.616 1799.49 Q302.806 1799.49 299.728 1794.91 Q296.672 1790.3 296.672 1781.58 Q296.672 1772.83 299.728 1768.24 Q302.806 1763.64 308.616 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M328.778 1792.94 L333.663 1792.94 L333.663 1798.82 L328.778 1798.82 L328.778 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M353.848 1767.34 Q350.237 1767.34 348.408 1770.9 Q346.602 1774.45 346.602 1781.58 Q346.602 1788.68 348.408 1792.25 Q350.237 1795.79 353.848 1795.79 Q357.482 1795.79 359.288 1792.25 Q361.116 1788.68 361.116 1781.58 Q361.116 1774.45 359.288 1770.9 Q357.482 1767.34 353.848 1767.34 M353.848 1763.64 Q359.658 1763.64 362.713 1768.24 Q365.792 1772.83 365.792 1781.58 Q365.792 1790.3 362.713 1794.91 Q359.658 1799.49 353.848 1799.49 Q348.038 1799.49 344.959 1794.91 Q341.903 1790.3 341.903 1781.58 Q341.903 1772.83 344.959 1768.24 Q348.038 1763.64 353.848 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M863.532 1794.89 L879.852 1794.89 L879.852 1798.82 L857.907 1798.82 L857.907 1794.89 Q860.569 1792.13 865.153 1787.5 Q869.759 1782.85 870.94 1781.51 Q873.185 1778.98 874.065 1777.25 Q874.968 1775.49 874.968 1773.8 Q874.968 1771.04 873.023 1769.31 Q871.102 1767.57 868 1767.57 Q865.801 1767.57 863.347 1768.34 Q860.917 1769.1 858.139 1770.65 L858.139 1765.93 Q860.963 1764.79 863.417 1764.21 Q865.87 1763.64 867.907 1763.64 Q873.278 1763.64 876.472 1766.32 Q879.667 1769.01 879.667 1773.5 Q879.667 1775.63 878.856 1777.55 Q878.069 1779.45 875.963 1782.04 Q875.384 1782.71 872.282 1785.93 Q869.181 1789.12 863.532 1794.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M889.667 1792.94 L894.551 1792.94 L894.551 1798.82 L889.667 1798.82 L889.667 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M904.782 1764.26 L923.139 1764.26 L923.139 1768.2 L909.065 1768.2 L909.065 1776.67 Q910.083 1776.32 911.102 1776.16 Q912.12 1775.97 913.139 1775.97 Q918.926 1775.97 922.305 1779.15 Q925.685 1782.32 925.685 1787.73 Q925.685 1793.31 922.213 1796.41 Q918.74 1799.49 912.421 1799.49 Q910.245 1799.49 907.977 1799.12 Q905.731 1798.75 903.324 1798.01 L903.324 1793.31 Q905.407 1794.45 907.629 1795 Q909.852 1795.56 912.328 1795.56 Q916.333 1795.56 918.671 1793.45 Q921.009 1791.34 921.009 1787.73 Q921.009 1784.12 918.671 1782.02 Q916.333 1779.91 912.328 1779.91 Q910.453 1779.91 908.578 1780.33 Q906.727 1780.74 904.782 1781.62 L904.782 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M1419.52 1764.26 L1437.88 1764.26 L1437.88 1768.2 L1423.81 1768.2 L1423.81 1776.67 Q1424.83 1776.32 1425.84 1776.16 Q1426.86 1775.97 1427.88 1775.97 Q1433.67 1775.97 1437.05 1779.15 Q1440.43 1782.32 1440.43 1787.73 Q1440.43 1793.31 1436.96 1796.41 Q1433.48 1799.49 1427.16 1799.49 Q1424.99 1799.49 1422.72 1799.12 Q1420.47 1798.75 1418.07 1798.01 L1418.07 1793.31 Q1420.15 1794.45 1422.37 1795 Q1424.59 1795.56 1427.07 1795.56 Q1431.08 1795.56 1433.41 1793.45 Q1435.75 1791.34 1435.75 1787.73 Q1435.75 1784.12 1433.41 1782.02 Q1431.08 1779.91 1427.07 1779.91 Q1425.2 1779.91 1423.32 1780.33 Q1421.47 1780.74 1419.52 1781.62 L1419.52 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M1449.64 1792.94 L1454.52 1792.94 L1454.52 1798.82 L1449.64 1798.82 L1449.64 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M1474.71 1767.34 Q1471.1 1767.34 1469.27 1770.9 Q1467.46 1774.45 1467.46 1781.58 Q1467.46 1788.68 1469.27 1792.25 Q1471.1 1795.79 1474.71 1795.79 Q1478.34 1795.79 1480.15 1792.25 Q1481.98 1788.68 1481.98 1781.58 Q1481.98 1774.45 1480.15 1770.9 Q1478.34 1767.34 1474.71 1767.34 M1474.71 1763.64 Q1480.52 1763.64 1483.58 1768.24 Q1486.65 1772.83 1486.65 1781.58 Q1486.65 1790.3 1483.58 1794.91 Q1480.52 1799.49 1474.71 1799.49 Q1468.9 1799.49 1465.82 1794.91 Q1462.77 1790.3 1462.77 1781.58 Q1462.77 1772.83 1465.82 1768.24 Q1468.9 1763.64 1474.71 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M1979.24 1764.26 L2001.47 1764.26 L2001.47 1766.25 L1988.92 1798.82 L1984.04 1798.82 L1995.84 1768.2 L1979.24 1768.2 L1979.24 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M2010.59 1792.94 L2015.47 1792.94 L2015.47 1798.82 L2010.59 1798.82 L2010.59 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M2025.7 1764.26 L2044.06 1764.26 L2044.06 1768.2 L2029.98 1768.2 L2029.98 1776.67 Q2031 1776.32 2032.02 1776.16 Q2033.04 1775.97 2034.06 1775.97 Q2039.85 1775.97 2043.22 1779.15 Q2046.6 1782.32 2046.6 1787.73 Q2046.6 1793.31 2043.13 1796.41 Q2039.66 1799.49 2033.34 1799.49 Q2031.16 1799.49 2028.9 1799.12 Q2026.65 1798.75 2024.24 1798.01 L2024.24 1793.31 Q2026.33 1794.45 2028.55 1795 Q2030.77 1795.56 2033.25 1795.56 Q2037.25 1795.56 2039.59 1793.45 Q2041.93 1791.34 2041.93 1787.73 Q2041.93 1784.12 2039.59 1782.02 Q2037.25 1779.91 2033.25 1779.91 Q2031.37 1779.91 2029.5 1780.33 Q2027.65 1780.74 2025.7 1781.62 L2025.7 1764.26 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M2525.56 1794.89 L2533.2 1794.89 L2533.2 1768.52 L2524.89 1770.19 L2524.89 1765.93 L2533.15 1764.26 L2537.83 1764.26 L2537.83 1794.89 L2545.47 1794.89 L2545.47 1798.82 L2525.56 1798.82 L2525.56 1794.89 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M2564.91 1767.34 Q2561.3 1767.34 2559.47 1770.9 Q2557.67 1774.45 2557.67 1781.58 Q2557.67 1788.68 2559.47 1792.25 Q2561.3 1795.79 2564.91 1795.79 Q2568.55 1795.79 2570.35 1792.25 Q2572.18 1788.68 2572.18 1781.58 Q2572.18 1774.45 2570.35 1770.9 Q2568.55 1767.34 2564.91 1767.34 M2564.91 1763.64 Q2570.72 1763.64 2573.78 1768.24 Q2576.86 1772.83 2576.86 1781.58 Q2576.86 1790.3 2573.78 1794.91 Q2570.72 1799.49 2564.91 1799.49 Q2559.1 1799.49 2556.02 1794.91 Q2552.97 1790.3 2552.97 1781.58 Q2552.97 1772.83 2556.02 1768.24 Q2559.1 1763.64 2564.91 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M2585.07 1792.94 L2589.96 1792.94 L2589.96 1798.82 L2585.07 1798.82 L2585.07 1792.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M2610.14 1767.34 Q2606.53 1767.34 2604.7 1770.9 Q2602.9 1774.45 2602.9 1781.58 Q2602.9 1788.68 2604.7 1792.25 Q2606.53 1795.79 2610.14 1795.79 Q2613.78 1795.79 2615.58 1792.25 Q2617.41 1788.68 2617.41 1781.58 Q2617.41 1774.45 2615.58 1770.9 Q2613.78 1767.34 2610.14 1767.34 M2610.14 1763.64 Q2615.95 1763.64 2619.01 1768.24 Q2622.09 1772.83 2622.09 1781.58 Q2622.09 1790.3 2619.01 1794.91 Q2615.95 1799.49 2610.14 1799.49 Q2604.33 1799.49 2601.25 1794.91 Q2598.2 1790.3 2598.2 1781.58 Q2598.2 1772.83 2601.25 1768.24 Q2604.33 1763.64 2610.14 1763.64 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M1436.54 1833.78 L1442.43 1833.78 L1442.43 1863.03 L1459.9 1847.65 L1467.38 1847.65 L1448.48 1864.33 L1468.18 1883.3 L1460.54 1883.3 L1442.43 1865.89 L1442.43 1883.3 L1436.54 1883.3 L1436.54 1833.78 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.964,1734.12 263.964,1007.24 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.964,1695.72 282.862,1695.72 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.964,1473.09 282.862,1473.09 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.964,1250.45 282.862,1250.45 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.964,1027.82 282.862,1027.82 "></polyline>
<path clip-path="url(#clip130)" d="M211.7 1681.52 Q208.089 1681.52 206.26 1685.09 Q204.455 1688.63 204.455 1695.76 Q204.455 1702.86 206.26 1706.43 Q208.089 1709.97 211.7 1709.97 Q215.334 1709.97 217.14 1706.43 Q218.969 1702.86 218.969 1695.76 Q218.969 1688.63 217.14 1685.09 Q215.334 1681.52 211.7 1681.52 M211.7 1677.82 Q217.51 1677.82 220.566 1682.42 Q223.644 1687.01 223.644 1695.76 Q223.644 1704.48 220.566 1709.09 Q217.51 1713.67 211.7 1713.67 Q205.89 1713.67 202.811 1709.09 Q199.756 1704.48 199.756 1695.76 Q199.756 1687.01 202.811 1682.42 Q205.89 1677.82 211.7 1677.82 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M203.737 1486.43 L211.376 1486.43 L211.376 1460.07 L203.066 1461.73 L203.066 1457.47 L211.33 1455.81 L216.006 1455.81 L216.006 1486.43 L223.644 1486.43 L223.644 1490.37 L203.737 1490.37 L203.737 1486.43 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M207.325 1263.8 L223.644 1263.8 L223.644 1267.73 L201.7 1267.73 L201.7 1263.8 Q204.362 1261.04 208.945 1256.41 Q213.552 1251.76 214.732 1250.42 Q216.978 1247.89 217.857 1246.16 Q218.76 1244.4 218.76 1242.71 Q218.76 1239.95 216.816 1238.22 Q214.894 1236.48 211.793 1236.48 Q209.594 1236.48 207.14 1237.25 Q204.709 1238.01 201.932 1239.56 L201.932 1234.84 Q204.756 1233.7 207.209 1233.13 Q209.663 1232.55 211.7 1232.55 Q217.07 1232.55 220.265 1235.23 Q223.459 1237.92 223.459 1242.41 Q223.459 1244.54 222.649 1246.46 Q221.862 1248.36 219.756 1250.95 Q219.177 1251.62 216.075 1254.84 Q212.973 1258.03 207.325 1263.8 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M216.515 1026.46 Q219.871 1027.18 221.746 1029.45 Q223.644 1031.72 223.644 1035.05 Q223.644 1040.17 220.126 1042.97 Q216.607 1045.77 210.126 1045.77 Q207.95 1045.77 205.635 1045.33 Q203.344 1044.91 200.89 1044.05 L200.89 1039.54 Q202.834 1040.67 205.149 1041.25 Q207.464 1041.83 209.987 1041.83 Q214.385 1041.83 216.677 1040.1 Q218.992 1038.36 218.992 1035.05 Q218.992 1031.99 216.839 1030.28 Q214.709 1028.55 210.89 1028.55 L206.862 1028.55 L206.862 1024.7 L211.075 1024.7 Q214.524 1024.7 216.353 1023.34 Q218.181 1021.95 218.181 1019.36 Q218.181 1016.69 216.283 1015.28 Q214.408 1013.85 210.89 1013.85 Q208.969 1013.85 206.77 1014.26 Q204.57 1014.68 201.932 1015.56 L201.932 1011.39 Q204.594 1010.65 206.908 1010.28 Q209.246 1009.91 211.307 1009.91 Q216.631 1009.91 219.732 1012.34 Q222.834 1014.75 222.834 1018.87 Q222.834 1021.74 221.191 1023.73 Q219.547 1025.7 216.515 1026.46 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M109.532 1354.07 L126.878 1366.96 L145.18 1353.4 L145.18 1360.3 L131.175 1370.68 L145.18 1381.06 L145.18 1387.96 L126.528 1374.12 L109.532 1386.79 L109.532 1379.88 L122.231 1370.43 L109.532 1360.97 L109.532 1354.07 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip133)" d="M331.232 1457.09 L315.232 1473.09 L331.232 1489.09 L347.232 1473.09 L331.232 1457.09 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M555.458 1539.79 L539.458 1555.79 L555.458 1571.79 L571.458 1555.79 L555.458 1539.79 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M779.683 1574.63 L763.683 1590.63 L779.683 1606.63 L795.683 1590.63 L779.683 1574.63 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M1003.91 1602.98 L987.909 1618.98 L1003.91 1634.98 L1019.91 1618.98 L1003.91 1602.98 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M1228.13 1631.59 L1212.13 1647.59 L1228.13 1663.59 L1244.13 1647.59 L1228.13 1631.59 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M1452.36 1661.68 L1436.36 1677.68 L1452.36 1693.68 L1468.36 1677.68 L1452.36 1661.68 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M1676.59 1693.44 L1660.59 1709.44 L1676.59 1725.44 L1692.59 1709.44 L1676.59 1693.44 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M1900.81 1697.55 L1884.81 1713.55 L1900.81 1729.55 L1916.81 1713.55 L1900.81 1697.55 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M2125.04 1689.66 L2109.04 1705.66 L2125.04 1721.66 L2141.04 1705.66 L2125.04 1689.66 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M2349.26 1683.77 L2333.26 1699.77 L2349.26 1715.77 L2365.26 1699.77 L2349.26 1683.77 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M2573.49 1679.97 L2557.49 1695.97 L2573.49 1711.97 L2589.49 1695.97 L2573.49 1679.97 Z" fill="#6b9e32" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip133)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="331.232,1473.09 555.458,1473.09 555.458,1555.79 779.683,1555.79 779.683,1590.63 1003.91,1590.63 1003.91,1618.98 1228.13,1618.98 1228.13,1647.59 1452.36,1647.59 1452.36,1677.68 1676.59,1677.68 1676.59,1709.44 1900.81,1709.44 1900.81,1713.55 2125.04,1713.55 2125.04,1705.66 2349.26,1705.66 2349.26,1699.77 2573.49,1699.77 2573.49,1695.97 "></polyline>
<path clip-path="url(#clip133)" d="M331.232 1011.82 L315.232 1027.82 L331.232 1043.82 L347.232 1027.82 L331.232 1011.82 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M555.458 1048.01 L539.458 1064.01 L555.458 1080.01 L571.458 1064.01 L555.458 1048.01 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M779.683 1125.76 L763.683 1141.76 L779.683 1157.76 L795.683 1141.76 L779.683 1125.76 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M1003.91 1214.4 L987.909 1230.4 L1003.91 1246.4 L1019.91 1230.4 L1003.91 1214.4 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M1228.13 1309.23 L1212.13 1325.23 L1228.13 1341.23 L1244.13 1325.23 L1228.13 1309.23 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M1452.36 1409.77 L1436.36 1425.77 L1452.36 1441.77 L1468.36 1425.77 L1452.36 1409.77 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M1676.59 1516.18 L1660.59 1532.18 L1676.59 1548.18 L1692.59 1532.18 L1676.59 1516.18 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M1900.81 1595.82 L1884.81 1611.82 L1900.81 1627.82 L1916.81 1611.82 L1900.81 1595.82 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M2125.04 1639.57 L2109.04 1655.57 L2125.04 1671.57 L2141.04 1655.57 L2125.04 1639.57 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M2349.26 1659.97 L2333.26 1675.97 L2349.26 1691.97 L2365.26 1675.97 L2349.26 1659.97 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<path clip-path="url(#clip133)" d="M2573.49 1667.91 L2557.49 1683.91 L2573.49 1699.91 L2589.49 1683.91 L2573.49 1667.91 Z" fill="#009af9" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.84"></path>
<polyline clip-path="url(#clip133)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="331.232,1027.82 555.458,1027.82 555.458,1064.01 779.683,1064.01 779.683,1141.76 1003.91,1141.76 1003.91,1230.4 1228.13,1230.4 1228.13,1325.23 1452.36,1325.23 1452.36,1425.77 1676.59,1425.77 1676.59,1532.18 1900.81,1532.18 1900.81,1611.82 2125.04,1611.82 2125.04,1655.57 2349.26,1655.57 2349.26,1675.97 2573.49,1675.97 2573.49,1683.91 "></polyline>
<path clip-path="url(#clip130)" d="M2280.75 1186.99 L2561.53 1186.99 L2561.53 1031.47 L2280.75 1031.47  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<polyline clip-path="url(#clip130)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2280.75,1186.99 2561.53,1186.99 2561.53,1031.47 2280.75,1031.47 2280.75,1186.99 "></polyline>
<polyline clip-path="url(#clip130)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2307.16,1083.31 2465.61,1083.31 "></polyline>
<path clip-path="url(#clip130)" d="M2516.67 1074.67 L2507.3 1087.28 L2517.16 1100.59 L2512.13 1100.59 L2504.59 1090.41 L2497.04 1100.59 L2492.02 1100.59 L2502.09 1087.03 L2492.88 1074.67 L2497.9 1074.67 L2504.77 1083.9 L2511.65 1074.67 L2516.67 1074.67 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M2522.32 1098.05 L2527.04 1098.05 L2527.04 1083.9 L2521.88 1084.85 L2521.88 1082.17 L2527.2 1081.26 L2530.38 1081.26 L2530.38 1098.05 L2535.12 1098.05 L2535.12 1100.59 L2522.32 1100.59 L2522.32 1098.05 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip130)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2307.16,1135.15 2465.61,1135.15 "></polyline>
<path clip-path="url(#clip130)" d="M2516.67 1126.51 L2507.3 1139.12 L2517.16 1152.43 L2512.13 1152.43 L2504.59 1142.25 L2497.04 1152.43 L2492.02 1152.43 L2502.09 1138.87 L2492.88 1126.51 L2497.9 1126.51 L2504.77 1135.74 L2511.65 1126.51 L2516.67 1126.51 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip130)" d="M2524.91 1149.79 L2534.73 1149.79 L2534.73 1152.43 L2520.88 1152.43 L2520.88 1149.89 Q2521.67 1149.17 2523.13 1147.87 Q2531.09 1140.81 2531.09 1138.64 Q2531.09 1137.11 2529.89 1136.18 Q2528.69 1135.23 2526.72 1135.23 Q2525.51 1135.23 2524.1 1135.65 Q2522.69 1136.04 2521.02 1136.85 L2521.02 1134.01 Q2522.81 1133.36 2524.33 1133.04 Q2525.88 1132.71 2527.2 1132.71 Q2530.56 1132.71 2532.57 1134.24 Q2534.59 1135.77 2534.59 1138.27 Q2534.59 1141.48 2526.93 1148.06 Q2525.63 1149.17 2524.91 1149.79 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path></svg>
</div>
</div>
</div>
</section>
<section id="adding-the-constraints-on-states" class="level3">
<h3 class="anchored" data-anchor-id="adding-the-constraints-on-states">Adding the constraints on states</h3>
<p>We might feel a little bit uneasy about loosing an immediate access to <span class="math inline">\bar{\bm x}</span>. But the game is not lost. We just need to express <span class="math inline">\bar{\bm x}</span> as a function of <span class="math inline">\bar{\bm u}</span> and <span class="math inline">\mathbf x_0</span> and impose the constraint on the result. But such expression is already available, see (<a href="#eq-x_as_function_of_u_and_x0" class="quarto-xref">Eq.&nbsp;2</a>). Therefore, we can formulate the constraint, say, an upper bound on the state vector <span class="math display">
\bm x_k \leq \mathbf x_\mathrm{max}
</span> as <span class="math display">
\bar{\mathbf x}^\mathrm{min} \leq \widehat{\mathbf C} \bar{\bm u} + \widehat{\mathbf A} \mathbf x_0 \leq \bar{\mathbf x}^\mathrm{max},
</span> where the the bars in <span class="math inline">\bar{\mathbf x}^\mathrm{min}</span> and <span class="math inline">\bar{\mathbf x}^\mathrm{max}</span> obviously indicates that these vectors were obtained by stacking the corresponding vectors for all times <span class="math inline">k=1,\ldots,N</span>.</p>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/hurak\.github\.io\/orr\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./discr_dir_general.html" class="pagination-link" aria-label="General finite-horizon nonlinear optimal control as an NLP">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">General finite-horizon nonlinear optimal control as an NLP</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./discr_dir_mpc.html" class="pagination-link" aria-label="Model predictive control (MPC)">
        <span class="nav-page-text">Model predictive control (MPC)</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2025, Zdeněk Hurák</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/hurak/orr/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>